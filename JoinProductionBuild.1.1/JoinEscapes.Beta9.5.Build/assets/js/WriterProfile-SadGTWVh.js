var e=(e,s,a)=>new Promise((l,t)=>{var r=e=>{try{n(a.next(e))}catch(s){t(s)}},i=e=>{try{n(a.throw(e))}catch(s){t(s)}},n=e=>e.done?l(e.value):Promise.resolve(e.value).then(r,i);n((a=a.apply(e,s)).next())});import{j as s,s as a}from"./index-BpEku7l9.js";import{d as l,r as t,L as r}from"./react-vendor-D69WjZO_.js";import{l as i,v as n,M as o,d as c,U as m,w as d,H as x,x as h,G as p,C as u,o as g}from"./ui-vendor-CQDp9-dR.js";import"./supabase-C6BlnBHX.js";import"./utils-CHphCHSg.js";const f=()=>{const{slug:f}=l(),[j,y]=t.useState(null),[b,w]=t.useState([]),[N,v]=t.useState(!0),[k,z]=t.useState(null);return t.useEffect(()=>{const s=()=>e(null,null,function*(){var s,l,t;v(!0),z(null);try{const r=(e=>{const s={"murat-arkin":"Murat Arkın","aleyna-gemi":"Aleyna Gemi","aleyna-rey-gemi":"Aleyna Rey Gemi","beste-akkor":"Beste Akkor","saykoarmes22-de":"saykoarmes22 de"};if(s[e])return console.log("🔍 DEBUG - slugToName mapping bulundu:",e,"→",s[e]),s[e];const a=e.replace(/-/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ");return console.log("🔍 DEBUG - slugToName normal dönüşüm:",e,"output:",a),a})(f);console.log("🔍 Yazar aranıyor:",r,"slug:",f),console.log("🔍 DEBUG - slugToName fonksiyonu çalıştı, sonuç:",r),console.log("🔍 Tam eşleşme deneniyor:",r);let{data:i,error:n}=yield a.from("writer_profiles").select("*").eq("name",r).single();if(console.log("🔍 Tam eşleşme sonucu:",{data:i,error:n}),n&&"PGRST116"===n.code){console.log("🔍 Tam eşleşme bulunamadı, kısmi arama yapılıyor...");const e=yield a.from("writer_profiles").select("*").ilike("name",`%${r}%`);i=(null==(s=e.data)?void 0:s[0])||null,n=e.error}if(!i&&n){console.log("🔍 İsimle bulunamadı, slug ile deneniyor:",f);const e=yield a.from("writer_profiles").select("*").ilike("name",`%${f.replace(/-/g,"%")}%`);i=(null==(l=e.data)?void 0:l[0])||null,n=e.error}if(!i&&n){console.log("🔍 Writer_profiles'da bulunamadı, posts tablosundan deneniyor:",r);const{data:e,error:s}=yield a.from("posts").select("author_name").ilike("author_name",`%${r}%`).limit(1);if(e&&e.length>0){const s=e[0].author_name;console.log("✅ Posts tablosunda yazar bulundu:",s),i={id:"temp-"+Date.now(),name:s,title:"Yazar",bio:"Bu yazar hakkında detaylı bilgi henüz eklenmemiş.",location:"Türkiye",profile_image:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",specialties:[],social_media:{},join_date:(new Date).toISOString(),followers:0},n=null}}if(n)console.error("❌ Yazar bulunamadı:",n),z("Yazar bulunamadı");else if(i){console.log("✅ Yazar bulundu:",i);const s=yield(t=i.name,e(null,null,function*(){try{let{data:e,error:s}=yield a.from("posts").select("id, title, slug, excerpt, featured_image_url, published_at, views, likes, author_name").eq("author_name",t).eq("status","published").order("published_at",{ascending:!1}).limit(6);if(!e||0===e.length){const l=[t,t.split(" ")[0],t.split(" ")[1]||"",t.toLowerCase(),t.split(" ")[0].toLowerCase()].filter(e=>e&&e.trim());for(const t of l){const l=yield a.from("posts").select("id, title, slug, excerpt, featured_image_url, published_at, views, likes, author_name").ilike("author_name",`%${t}%`).eq("status","published").order("published_at",{ascending:!1}).limit(6);if(l.data&&l.data.length>0){e=l.data,s=l.error;break}}}return s?(console.error("❌ Yazı fetch hatası:",s),[]):(e&&e.length,e&&e.length>0?e.map(e=>({title:e.title,date:new Date(e.published_at).toLocaleDateString("tr-TR"),image:e.featured_image_url||"https://images.unsplash.com/photo-1469474968028-56623f02e42e?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80",slug:e.slug,views:e.views||0,likes:e.likes||0})):[])}catch(e){return console.error("❌ Yazı fetch hatası:",e),[]}})),l={id:i.id,name:i.name,title:i.title||"Yazar",image:i.profile_image||null,bio:i.bio||"Bu yazar henüz bio bilgisi eklememiş.",location:i.location||"Türkiye",joinDate:i.join_date?new Date(i.join_date).toLocaleDateString("tr-TR",{year:"numeric",month:"long"}):"Eylül 2024",followers:i.followers?i.followers>=1e3?`${(i.followers/1e3).toFixed(1)}K`:i.followers.toString():"0",posts:s.length,specialties:"string"==typeof i.specialties?JSON.parse(i.specialties):i.specialties||[],socialMedia:"string"==typeof i.social_media?JSON.parse(i.social_media):i.social_media||{},recentPosts:s};y(l),w(s)}else console.log("⚠️ Yazar profili bulunamadı, slug:",f),z("Yazar bulunamadı")}catch(r){console.error("❌ Fetch hatası:",r),z("Bir hata oluştu")}finally{v(!1)}});f&&s()},[f]),N?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Yazar profili yükleniyor..."})]})}):k||!j?s.jsx("div",{className:"min-h-screen bg-gray-100",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-16 text-center",children:[s.jsx(i,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Yazar bulunamadı"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Aradığınız yazar profili mevcut değil."}),s.jsx(r,{to:"/",className:"text-primary-600 hover:text-primary-700",children:"Ana sayfaya dön"})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-gradient-to-br from-primary-600 to-primary-800 text-white py-16",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"flex items-center mb-6",children:s.jsxs(r,{to:"/",className:"inline-flex items-center text-white/80 hover:text-white transition-colors mr-4",children:[s.jsx(n,{className:"h-5 w-5 mr-2"}),"Ana Sayfa"]})}),s.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start space-y-6 md:space-y-0 md:space-x-8",children:[s.jsxs("div",{className:"relative",children:[j.image?s.jsx("img",{src:j.image,alt:j.name,className:"w-32 h-32 md:w-40 md:h-40 rounded-full object-cover border-4 border-white/20 shadow-xl"}):s.jsx("div",{className:"w-32 h-32 md:w-40 md:h-40 bg-blue-500 rounded-full border-4 border-white/20 shadow-xl flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-4xl md:text-5xl",children:j.name?j.name.charAt(0).toUpperCase():"?"})}),s.jsx("div",{className:"absolute -bottom-2 -right-2 w-8 h-8 bg-green-500 rounded-full border-4 border-white"})]}),s.jsxs("div",{className:"flex-1 text-center md:text-left",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:j.name}),s.jsx("p",{className:"text-xl text-white/90 mb-4",children:j.title}),s.jsx("p",{className:"text-white/80 text-lg leading-relaxed mb-6 max-w-2xl",children:j.bio}),s.jsxs("div",{className:"flex flex-wrap justify-center md:justify-start items-center gap-4 sm:gap-6 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(o,{className:"h-4 w-4"}),s.jsx("span",{children:j.location})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(c,{className:"h-4 w-4"}),s.jsxs("span",{children:["Katıldı: ",j.joinDate]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(m,{className:"h-4 w-4"}),s.jsxs("span",{children:[j.followers," Takipçi"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(d,{className:"h-4 w-4"}),s.jsxs("span",{children:[j.posts," Yazı"]})]})]})]})]})]})}),s.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[s.jsx(d,{className:"h-6 w-6 mr-3 text-primary-600"}),"Son Yazılar"]}),j.recentPosts&&j.recentPosts.length>0?s.jsx("div",{className:"space-y-6",children:j.recentPosts.map((e,a)=>s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4 p-4 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("img",{src:e.image,alt:e.title,className:"w-full sm:w-20 h-48 sm:h-20 rounded-lg object-cover flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2 line-clamp-2",children:e.title}),s.jsx("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-2",children:s.jsx("span",{children:e.date})}),s.jsx(r,{to:`/seyahat/${e.slug}`,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Devamını Oku →"})]}),s.jsxs("div",{className:"flex items-center space-x-1 text-gray-500",children:[s.jsx(x,{className:"h-4 w-4"}),s.jsx("span",{children:e.likes})]})]},a))}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(d,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Henüz yazı yok"}),s.jsx("p",{className:"text-gray-500",children:"Bu yazar henüz hiç yazı paylaşmamış."})]})]})}),s.jsxs("div",{className:"space-y-6",children:[j.specialties&&j.specialties.length>0&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(h,{className:"h-5 w-5 mr-2 text-primary-600"}),"Uzmanlık Alanları"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:j.specialties.map((e,a)=>s.jsx("span",{className:"px-3 py-1 bg-primary-100 text-primary-800 rounded-full text-sm font-medium",children:e},a))})]}),j.socialMedia&&Object.keys(j.socialMedia).length>0&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(p,{className:"h-5 w-5 mr-2 text-primary-600"}),"Sosyal Medya"]}),s.jsxs("div",{className:"space-y-3",children:[j.socialMedia.instagram&&s.jsxs("a",{href:`https://instagram.com/${j.socialMedia.instagram.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 text-gray-600 hover:text-primary-600 transition-colors",children:[s.jsx(u,{className:"h-4 w-4"}),s.jsx("span",{children:j.socialMedia.instagram})]}),j.socialMedia.blog&&s.jsxs("a",{href:"#",className:"flex items-center space-x-3 text-gray-600 hover:text-primary-600 transition-colors",children:[s.jsx(g,{className:"h-4 w-4"}),s.jsx("span",{children:j.socialMedia.blog})]}),j.socialMedia.twitter&&s.jsxs("a",{href:`https://twitter.com/${j.socialMedia.twitter.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 text-gray-600 hover:text-primary-600 transition-colors",children:[s.jsx(g,{className:"h-4 w-4"}),s.jsx("span",{children:j.socialMedia.twitter})]}),j.socialMedia.blog&&s.jsxs("a",{href:j.socialMedia.blog,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 text-gray-600 hover:text-primary-600 transition-colors",children:[s.jsx(p,{className:"h-4 w-4"}),s.jsx("span",{children:"Kişisel Blog"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"İstatistikler"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Toplam Yazı"}),s.jsx("span",{className:"font-semibold text-gray-900",children:j.posts})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Takipçi"}),s.jsx("span",{className:"font-semibold text-gray-900",children:j.followers})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Üyelik"}),s.jsx("span",{className:"font-semibold text-gray-900",children:j.joinDate})]})]})]})]})]})}),s.jsxs("div",{className:"fixed bottom-6 right-6 flex flex-col space-y-3 z-50",children:[s.jsx("button",{className:"w-12 h-12 bg-green-500 hover:bg-green-600 text-white rounded-full shadow-lg flex items-center justify-center transition-all duration-300 hover:scale-110",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})})}),s.jsx("button",{className:"w-12 h-12 bg-gray-500 hover:bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center transition-all duration-300 hover:scale-110",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z"})})})]})]})};export{f as default};
