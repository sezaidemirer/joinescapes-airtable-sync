const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/index-Bf57FA-f.js","assets/js/react-vendor-D69WjZO_.js","assets/js/supabase-C6BlnBHX.js","assets/js/utils-CHphCHSg.js","assets/js/ui-vendor-CQDp9-dR.js","assets/index-BUrYKIb3.css"])))=>i.map(i=>d[i]);
var e=(e,r,a)=>new Promise((s,t)=>{var i=e=>{try{n(a.next(e))}catch(r){t(r)}},l=e=>{try{n(a.throw(e))}catch(r){t(r)}},n=e=>e.done?s(e.value):Promise.resolve(e.value).then(i,l);n((a=a.apply(e,r)).next())});import{_ as r}from"./supabase-C6BlnBHX.js";import{u as a,j as s}from"./index-Bf57FA-f.js";import{u as t,r as i}from"./react-vendor-D69WjZO_.js";import{r as l,i as n}from"./inputValidator-i9iGeD-F.js";import{h as o,E as d,j as c,k as m,L as u,X as x}from"./ui-vendor-CQDp9-dR.js";import"./utils-CHphCHSg.js";const p=()=>{const{isAuthenticated:p,loading:h,signIn:b,signUp:g,user:f}=a(),y=t(),[j,v]=i.useState(!1),[w,N]=i.useState(""),[k,E]=i.useState(""),[z,S]=i.useState(""),[C,G]=i.useState(!1),[_,P]=i.useState(""),[D,K]=i.useState(""),[V,q]=i.useState(!1),[A,L]=i.useState(!1),[F,H]=i.useState(""),[O,T]=i.useState(!1),[Y,$]=i.useState(""),[B,I]=i.useState(!1);i.useEffect(()=>{p&&!h&&f&&f.id&&y("/")},[p,h,f,y]);return h?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-white flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):p?null:A?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-white flex items-center justify-center p-4",children:s.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-6 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(o,{className:"h-8 w-8 text-green-600"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"E-posta DoÄŸrulama"}),s.jsxs("p",{className:"text-gray-600 mb-4",children:[s.jsx("strong",{children:F})," adresine doÄŸrulama linki gÃ¶nderildi."]}),s.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"LÃ¼tfen e-posta kutunuzu kontrol edin ve linke tÄ±klayarak hesabÄ±nÄ±zÄ± aktifleÅŸtirin."}),s.jsx("button",{onClick:()=>{L(!1),H(""),v(!1)},className:"w-full bg-primary-600 text-white py-2 px-4 rounded-lg hover:bg-primary-700 transition-colors",children:"GiriÅŸ Yap"})]})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-white flex items-center justify-center p-4",children:[s.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-6",children:[s.jsx("div",{className:"text-center mb-8",children:s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("img",{src:"/images/join_escape_logo_siyah.webp",alt:"Join Escapes Logo",className:"h-16 w-auto"})})}),s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:j?"Hesap OluÅŸtur":"KullanÄ±cÄ± GiriÅŸi"}),s.jsx("p",{className:"text-gray-600",children:j?"JoinEscapes ailesine katÄ±lÄ±n":"GiriÅŸ yaparak kiÅŸisel deneyiminizi Ã¶zelleÅŸtirin ve gÃ¼ncel keÅŸiflerden ilk siz haberdar olun."})]}),_&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:_}),D&&s.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700 text-sm",children:D}),s.jsxs("form",{onSubmit:r=>e(null,null,function*(){r.preventDefault(),P(""),K(""),q(!0);try{const e=l.checkAuthEndpoint(j?"signup":"signin");if(!e.allowed)return void P(e.message);const r=n.validateEmail(w);if(!r.isValid)return void P("E-posta hatasÄ±: "+r.errors.join(", "));const a=n.validatePassword(k);if(!a.isValid)return void P("Åžifre hatasÄ±: "+a.errors.join(", "));if(j){if(k!==z)return void P("Åžifreler eÅŸleÅŸmiyor");const{data:e,error:r}=yield g(w,k,"user");r?P("KayÄ±t iÅŸlemi baÅŸarÄ±sÄ±z: "+r.message):(null==e?void 0:e.needsEmailConfirmation)?(L(!0),H(w),N(""),E(""),S(""),K("KayÄ±t baÅŸarÄ±lÄ±! E-posta adresinize gÃ¶nderilen doÄŸrulama linkine tÄ±klayarak hesabÄ±nÄ±zÄ± aktifleÅŸtirin.")):K("KayÄ±t baÅŸarÄ±lÄ±! GiriÅŸ yapabilirsiniz.")}else{const{data:e,error:r}=yield b(w,k);r?P("GiriÅŸ baÅŸarÄ±sÄ±z: "+r.message):K("GiriÅŸ baÅŸarÄ±lÄ±! YÃ¶nlendiriliyorsunuz...")}}catch(e){P("Bir hata oluÅŸtu: "+e.message)}finally{q(!1)}}),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-posta"}),s.jsx("input",{type:"email",value:w,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"E-posta adresinizi girin",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Åžifre"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:C?"text":"password",value:k,onChange:e=>E(e.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Åžifrenizi girin",required:!0}),s.jsx("button",{type:"button",onClick:()=>G(!C),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:C?s.jsx(d,{className:"h-4 w-4"}):s.jsx(c,{className:"h-4 w-4"})})]})]}),j&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Åžifre (Tekrar)"}),s.jsx("input",{type:"password",value:z,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Åžifrenizi tekrar girin",required:!0})]}),s.jsx("button",{type:"submit",disabled:V,className:"w-full bg-primary-600 text-white py-2 px-4 rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:V?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):j?s.jsxs(s.Fragment,{children:[s.jsx(m,{className:"h-4 w-4 mr-2"})," Hesap OluÅŸtur"]}):s.jsxs(s.Fragment,{children:[s.jsx(u,{className:"h-4 w-4 mr-2"})," GiriÅŸ Yap"]})}),s.jsxs("div",{className:"text-center space-y-2",children:[!j&&s.jsx("div",{children:s.jsx("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),T(!0)},className:"text-sm text-gray-600 hover:text-primary-600 cursor-pointer",children:"Åžifremi unuttum"})}),s.jsx("div",{children:s.jsx("button",{type:"button",onClick:()=>v(!j),className:"text-sm text-primary-600 hover:text-primary-700",children:j?"Zaten hesabÄ±n var mÄ±? GiriÅŸ yap":"HesabÄ±n yok mu? KayÄ±t ol"})})]})]})]}),O&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Åžifremi Unuttum"}),s.jsx("button",{onClick:()=>{T(!1),$(""),P(""),K("")},className:"text-gray-400 hover:text-gray-600",children:s.jsx(x,{className:"h-5 w-5"})})]}),s.jsx("p",{className:"text-gray-600 mb-4",children:"E-posta adresinizi girin, size ÅŸifre sÄ±fÄ±rlama linki gÃ¶nderelim."}),s.jsxs("form",{onSubmit:a=>e(null,null,function*(){a.preventDefault(),P(""),K(""),I(!0);try{const a=n.validateEmail(Y);if(!a.isValid)return void P("E-posta hatasÄ±: "+a.errors.join(", "));const{supabase:s}=yield r(()=>e(null,null,function*(){const{supabase:e}=yield import("./index-Bf57FA-f.js").then(e=>e.b);return{supabase:e}}),__vite__mapDeps([0,1,2,3,4,5])),t="localhost"===window.location.hostname?`${window.location.protocol}//${window.location.host}/sifre-sifirla`:`${window.location.origin}/sifre-sifirla`;console.log("ðŸ“§ Åžifre sÄ±fÄ±rlama linki:",t);const{error:i}=yield s.auth.resetPasswordForEmail(Y,{redirectTo:t});i?P("Åžifre sÄ±fÄ±rlama hatasÄ±: "+i.message):(K("Åžifre sÄ±fÄ±rlama linki e-posta adresinize gÃ¶nderildi."),T(!1),$(""))}catch(s){P("Bir hata oluÅŸtu: "+s.message)}finally{I(!1)}}),children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta Adresi"}),s.jsx("input",{type:"email",value:Y,onChange:e=>$(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"E-posta adresinizi girin",required:!0})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>{T(!1),$(""),P(""),K("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",disabled:B,children:"Ä°ptal"}),s.jsx("button",{type:"submit",className:"flex-1 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 disabled:opacity-50",disabled:B,children:B?"GÃ¶nderiliyor...":"GÃ¶nder"})]})]})]})})]})};export{p as default};
