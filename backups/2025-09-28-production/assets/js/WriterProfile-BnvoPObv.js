var e=(e,s,a)=>new Promise((l,t)=>{var r=e=>{try{n(a.next(e))}catch(s){t(s)}},i=e=>{try{n(a.throw(e))}catch(s){t(s)}},n=e=>e.done?l(e.value):Promise.resolve(e.value).then(r,i);n((a=a.apply(e,s)).next())});import{j as s,F as a,s as l}from"./index-D5E9gJaD.js";import{c as t,r,L as i}from"./react-vendor-9pH4USaU.js";import{l as n,v as c,M as o,a as m,U as d,w as x,H as h,x as p,G as u,C as g,o as f}from"./ui-vendor-BW9IHOa4.js";import"./supabase-Cd1B4uHG.js";import"./utils-Dxy8Veww.js";const j=()=>{const{slug:j}=t(),[y,b]=r.useState(null),[N,w]=r.useState([]),[v,z]=r.useState(!0),[_,k]=r.useState(null);return r.useEffect(()=>{const s=()=>e(null,null,function*(){var s,a,t;z(!0),k(null);try{const r=j.replace(/-/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ");console.log("🔍 Yazar aranıyor:",r,"slug:",j);let{data:i,error:n}=yield l.from("writer_profiles").select("*").eq("name",r).single();if(n&&"PGRST116"===n.code){console.log("🔍 Tam eşleşme bulunamadı, kısmi arama yapılıyor...");const e=yield l.from("writer_profiles").select("*").ilike("name",`%${r}%`);i=(null==(s=e.data)?void 0:s[0])||null,n=e.error}if(!i&&n){console.log("🔍 İsimle bulunamadı, slug ile deneniyor:",j);const e=yield l.from("writer_profiles").select("*").ilike("name",`%${j.replace(/-/g,"%")}%`);i=(null==(a=e.data)?void 0:a[0])||null,n=e.error}if(n)console.error("❌ Yazar bulunamadı:",n),k("Yazar bulunamadı");else if(i){console.log("✅ Yazar bulundu:",i);const s=yield(t=i.name,e(null,null,function*(){try{console.log("📝 Yazarın yazıları aranıyor:",t);let{data:e,error:s}=yield l.from("posts").select("id, title, slug, excerpt, featured_image_url, published_at, views, likes, author_name").eq("author_name",t).eq("status","published").order("published_at",{ascending:!1}).limit(6);if(!e||0===e.length){console.log("🔍 Tam eşleşme bulunamadı, kısmi arama yapılıyor...");const a=[t,t.split(" ")[0],t.split(" ")[1],"beste","Beste","duran","Duran"];for(const t of a){if(!t)continue;console.log("🔍 Deneniyor:",t);const a=yield l.from("posts").select("id, title, slug, excerpt, featured_image_url, published_at, views, likes, author_name").ilike("author_name",`%${t}%`).eq("status","published").order("published_at",{ascending:!1}).limit(6);if(a.data&&a.data.length>0){console.log("✅ Yazılar bulundu:",t,"sayı:",a.data.length),e=a.data,s=a.error;break}}}return s?(console.error("❌ Yazı fetch hatası:",s),[]):(console.log("📊 Bulunan yazılar:",(null==e?void 0:e.length)||0),e&&e.length>0?console.log("✅ Yazarın yazıları bulundu:",e.map(e=>`${e.title} (${e.author_name})`)):console.log("⚠️ Bu yazarın henüz yazısı yok:",t),e&&e.length>0?e.map(e=>({title:e.title,date:new Date(e.published_at).toLocaleDateString("tr-TR"),image:e.featured_image_url||"https://images.unsplash.com/photo-1469474968028-56623f02e42e?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80",slug:e.slug,views:e.views||0,likes:e.likes||0})):[])}catch(e){return console.error("❌ Yazı fetch hatası:",e),[]}})),a={id:i.id,name:i.name,title:i.title||"Yazar",image:i.profile_image||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",bio:i.bio||"Bu yazar henüz bio bilgisi eklememiş.",location:i.location||"Türkiye",joinDate:i.join_date?new Date(i.join_date).toLocaleDateString("tr-TR",{year:"numeric",month:"long"}):"Eylül 2024",followers:i.followers?i.followers>=1e3?`${(i.followers/1e3).toFixed(1)}K`:i.followers.toString():"0",posts:s.length,specialties:"string"==typeof i.specialties?JSON.parse(i.specialties):i.specialties||[],socialMedia:"string"==typeof i.social_media?JSON.parse(i.social_media):i.social_media||{},recentPosts:s};b(a),w(s)}else console.log("⚠️ Yazar profili bulunamadı, slug:",j),k("Yazar bulunamadı")}catch(r){console.error("❌ Fetch hatası:",r),k("Bir hata oluştu")}finally{z(!1)}});j&&s()},[j]),v?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Yazar profili yükleniyor..."})]})}):_||!y?s.jsxs("div",{className:"min-h-screen bg-gray-100",children:[s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-16 text-center",children:[s.jsx(n,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Yazar bulunamadı"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Aradığınız yazar profili mevcut değil."}),s.jsx(i,{to:"/",className:"text-primary-600 hover:text-primary-700",children:"Ana sayfaya dön"})]}),s.jsx(a,{})]}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-gradient-to-br from-primary-600 to-primary-800 text-white py-16",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"flex items-center mb-6",children:s.jsxs(i,{to:"/",className:"inline-flex items-center text-white/80 hover:text-white transition-colors mr-4",children:[s.jsx(c,{className:"h-5 w-5 mr-2"}),"Ana Sayfa"]})}),s.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start space-y-6 md:space-y-0 md:space-x-8",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:y.image,alt:y.name,className:"w-32 h-32 md:w-40 md:h-40 rounded-full object-cover border-4 border-white/20 shadow-xl"}),s.jsx("div",{className:"absolute -bottom-2 -right-2 w-8 h-8 bg-green-500 rounded-full border-4 border-white"})]}),s.jsxs("div",{className:"flex-1 text-center md:text-left",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:y.name}),s.jsx("p",{className:"text-xl text-white/90 mb-4",children:y.title}),s.jsx("p",{className:"text-white/80 text-lg leading-relaxed mb-6 max-w-2xl",children:y.bio}),s.jsxs("div",{className:"flex flex-wrap justify-center md:justify-start items-center space-x-6 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(o,{className:"h-4 w-4"}),s.jsx("span",{children:y.location})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(m,{className:"h-4 w-4"}),s.jsxs("span",{children:["Katıldı: ",y.joinDate]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(d,{className:"h-4 w-4"}),s.jsxs("span",{children:[y.followers," Takipçi"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(x,{className:"h-4 w-4"}),s.jsxs("span",{children:[y.posts," Yazı"]})]})]})]})]})]})}),s.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[s.jsx(x,{className:"h-6 w-6 mr-3 text-primary-600"}),"Son Yazılar"]}),y.recentPosts&&y.recentPosts.length>0?s.jsx("div",{className:"space-y-6",children:y.recentPosts.map((e,a)=>s.jsxs("div",{className:"flex space-x-4 p-4 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("img",{src:e.image,alt:e.title,className:"w-20 h-20 rounded-lg object-cover flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2 line-clamp-2",children:e.title}),s.jsx("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-2",children:s.jsx("span",{children:e.date})}),s.jsx(i,{to:`/seyahat/${e.slug}`,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Devamını Oku →"})]}),s.jsxs("div",{className:"flex items-center space-x-1 text-gray-500",children:[s.jsx(h,{className:"h-4 w-4"}),s.jsx("span",{children:e.likes})]})]},a))}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(x,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Henüz yazı yok"}),s.jsx("p",{className:"text-gray-500",children:"Bu yazar henüz hiç yazı paylaşmamış."})]})]})}),s.jsxs("div",{className:"space-y-6",children:[y.specialties&&y.specialties.length>0&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(p,{className:"h-5 w-5 mr-2 text-primary-600"}),"Uzmanlık Alanları"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:y.specialties.map((e,a)=>s.jsx("span",{className:"px-3 py-1 bg-primary-100 text-primary-800 rounded-full text-sm font-medium",children:e},a))})]}),y.socialMedia&&Object.keys(y.socialMedia).length>0&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(u,{className:"h-5 w-5 mr-2 text-primary-600"}),"Sosyal Medya"]}),s.jsxs("div",{className:"space-y-3",children:[y.socialMedia.instagram&&s.jsxs("a",{href:`https://instagram.com/${y.socialMedia.instagram.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 text-gray-600 hover:text-primary-600 transition-colors",children:[s.jsx(g,{className:"h-4 w-4"}),s.jsx("span",{children:y.socialMedia.instagram})]}),y.socialMedia.blog&&s.jsxs("a",{href:"#",className:"flex items-center space-x-3 text-gray-600 hover:text-primary-600 transition-colors",children:[s.jsx(f,{className:"h-4 w-4"}),s.jsx("span",{children:y.socialMedia.blog})]}),y.socialMedia.twitter&&s.jsxs("a",{href:`https://twitter.com/${y.socialMedia.twitter.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 text-gray-600 hover:text-primary-600 transition-colors",children:[s.jsx(f,{className:"h-4 w-4"}),s.jsx("span",{children:y.socialMedia.twitter})]}),y.socialMedia.blog&&s.jsxs("a",{href:y.socialMedia.blog,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 text-gray-600 hover:text-primary-600 transition-colors",children:[s.jsx(u,{className:"h-4 w-4"}),s.jsx("span",{children:"Kişisel Blog"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"İstatistikler"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Toplam Yazı"}),s.jsx("span",{className:"font-semibold text-gray-900",children:y.posts})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Takipçi"}),s.jsx("span",{className:"font-semibold text-gray-900",children:y.followers})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Üyelik"}),s.jsx("span",{className:"font-semibold text-gray-900",children:y.joinDate})]})]})]})]})]})}),s.jsxs("div",{className:"fixed bottom-6 right-6 flex flex-col space-y-3 z-50",children:[s.jsx("button",{className:"w-12 h-12 bg-green-500 hover:bg-green-600 text-white rounded-full shadow-lg flex items-center justify-center transition-all duration-300 hover:scale-110",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})})}),s.jsx("button",{className:"w-12 h-12 bg-gray-500 hover:bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center transition-all duration-300 hover:scale-110",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z"})})})]}),s.jsx(a,{})]})};export{j as default};
