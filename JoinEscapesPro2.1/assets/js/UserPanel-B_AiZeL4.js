var e=Object.defineProperty,s=Object.defineProperties,r=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,i=(s,r,a)=>r in s?e(s,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[r]=a,n=(e,s)=>{for(var r in s||(s={}))l.call(s,r)&&i(e,r,s[r]);if(a)for(var r of a(s))t.call(s,r)&&i(e,r,s[r]);return e},o=(e,a)=>s(e,r(a)),d=(e,s,r)=>new Promise((a,l)=>{var t=e=>{try{n(r.next(e))}catch(s){l(s)}},i=e=>{try{n(r.throw(e))}catch(s){l(s)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(t,i);n((r=r.apply(e,s)).next())});import{u as c,s as m,j as x}from"./index-DV_CMWWu.js";import{u as h,r as u}from"./react-vendor-D69WjZO_.js";import{l as p,m as y,n as g,C as f,f as b,M as j,X as v,o as N,p as w,H as k,q as _,r as z,B as C,s as P,T as S,d as F,t as L,u as D}from"./ui-vendor-CQDp9-dR.js";import"./supabase-C6BlnBHX.js";import"./utils-CHphCHSg.js";const O=()=>{var e;const s=h(),{user:r,isAuthenticated:a,loading:l,signOut:t}=c(),[i,O]=u.useState([]),[q,B]=u.useState(!1),[I,K]=u.useState([]),[X,$]=u.useState({}),[E,H]=u.useState(!1),[T,A]=u.useState(""),[R,Y]=u.useState(!1),[G,U]=u.useState("grid"),[M,V]=u.useState({fullName:"",email:"",phone:"",city:"",bio:"",profileImage:"",birthDate:""}),[W,J]=u.useState(!1),[Q,Z]=u.useState(!1),[ee,se]=u.useState(""),[re,ae]=u.useState(""),[le,te]=u.useState(!1),[ie,ne]=u.useState(""),[oe,de]=u.useState(!1),[ce,me]=u.useState(null);u.useEffect(()=>{var e,t,i;if(!l)if(a||l){if(a&&r&&r.id){if("test@test.com"===r.email)return void s("/admin");const a=null==(e=null==r?void 0:r.user_metadata)?void 0:e.user_role;if("editor"===a||"yazar"===a){const e=((null==(t=r.user_metadata)?void 0:t.full_name)||(null==(i=r.email)?void 0:i.split("@")[0])||"kullanici").toLowerCase().replace(/ğ/g,"g").replace(/ü/g,"u").replace(/ş/g,"s").replace(/ı/g,"i").replace(/ö/g,"o").replace(/ç/g,"c").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim("-");return void s(`/yazar/profil/${e}`)}if("supervisor"===a)return void s("/admin");if(a&&"user"!==a)return void s("/")}}else s("/")},[l,a,r,s]),u.useEffect(()=>{a&&r&&(xe(),he())},[a,r]);const xe=()=>d(null,null,function*(){H(!0);try{yield Promise.all([ue(),pe()])}catch(e){console.error("❌ Kullanıcı verileri yüklenemedi:",e)}finally{H(!1)}}),he=()=>d(null,null,function*(){var e;if(r)try{const s=r.user_metadata||{};V({fullName:s.full_name||(null==(e=r.email)?void 0:e.split("@")[0])||"",email:r.email||"",phone:s.phone||"",city:s.city||"",bio:s.bio||"",profileImage:s.profile_image||"",birthDate:s.birth_date||""})}catch(s){console.error("❌ Profil verileri yüklenemedi:",s)}}),ue=()=>d(null,null,function*(){try{B(!0);const{data:e,error:s}=yield m.from("user_favorites").select("\n          *,\n          posts (\n            id,\n            title,\n            slug,\n            excerpt,\n            featured_image_url,\n            created_at,\n            categories (name, slug)\n          )\n        ").eq("user_id",r.id).order("created_at",{ascending:!1});if(s)throw s;O(e||[])}catch(e){console.error("❌ Favoriler yüklenemedi:",e)}finally{B(!1)}}),pe=()=>d(null,null,function*(){try{const{data:e,error:s}=yield m.from("user_playlists").select("*").eq("user_id",r.id).order("created_at",{ascending:!1});if(s)throw s;K(e||[]);for(const r of e||[])yield ye(r.id)}catch(e){console.error("❌ Playlistler yüklenemedi:",e)}}),ye=e=>d(null,null,function*(){try{const{data:s,error:r}=yield m.from("playlist_posts").select("\n          *,\n          posts (\n            id,\n            title,\n            slug,\n            excerpt,\n            featured_image_url,\n            created_at,\n            categories (name, slug)\n          )\n        ").eq("playlist_id",e).order("created_at",{ascending:!1});if(r)throw r;$(r=>o(n({},r),{[e]:s||[]}))}catch(s){console.error("❌ Playlist postları yüklenemedi:",s)}}),ge=()=>d(null,null,function*(){if(T.trim())try{const{data:e,error:s}=yield m.from("user_playlists").insert({user_id:r.id,name:T.trim(),description:""}).select().single();if(s)throw s;K(s=>[e,...s]),A(""),Y(!1)}catch(e){console.error("❌ Playlist oluşturulamadı:",e)}}),fe=e=>d(null,null,function*(){try{const{error:s}=yield m.from("user_favorites").delete().eq("user_id",r.id).eq("post_id",e);if(s)throw s;O(s=>s.filter(s=>s.post_id!==e))}catch(s){console.error("❌ Favoriden çıkarılamadı:",s)}}),be=({post:e,onRemove:r,removeLabel:a="Favoriden Çıkar",showPlaylistButton:l=!1})=>{return x.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[e.featured_image_url&&x.jsx("div",{className:"aspect-video bg-gray-200",children:x.jsx("img",{src:e.featured_image_url,alt:e.title,className:"w-full h-full object-cover"})}),x.jsxs("div",{className:"p-4",children:[x.jsxs("div",{className:"flex items-start justify-between mb-2",children:[x.jsx("h3",{className:"font-semibold text-gray-900 line-clamp-2 flex-1",children:e.title}),x.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[l&&x.jsx("button",{onClick:()=>(e=>{me(e),de(!0)})(e),className:"p-1 text-gray-400 hover:text-blue-500 transition-colors",title:"Listeye Ekle",children:x.jsx(P,{className:"h-4 w-4"})}),x.jsx("button",{onClick:()=>r(e.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",title:a,children:x.jsx(S,{className:"h-4 w-4"})})]})]}),e.excerpt&&x.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 mb-3",children:e.excerpt}),x.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsxs("span",{className:"flex items-center",children:[x.jsx(F,{className:"h-3 w-3 mr-1"}),(t=e.created_at,new Date(t).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"}))]}),e.categories&&x.jsxs("span",{className:"flex items-center",children:[x.jsx(L,{className:"h-3 w-3 mr-1"}),e.categories.name]})]}),x.jsxs("button",{onClick:()=>s(`/destinasyon/${e.slug}`),className:"flex items-center text-primary-600 hover:text-primary-700",children:[x.jsx(D,{className:"h-3 w-3 mr-1"}),"Oku"]})]})]})]});var t};return l?x.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),x.jsx("p",{className:"mt-4 text-gray-600",children:"Yükleniyor..."})]})}):x.jsxs("div",{className:"min-h-screen bg-gray-50",children:[x.jsx("div",{className:"bg-white shadow-sm border-b",children:x.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:x.jsxs("div",{className:"flex items-center justify-between h-16",children:[x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsx("button",{onClick:()=>s("/"),className:"text-primary-600 hover:text-primary-700",children:"← Ana Sayfa"}),x.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Kullanıcı Paneli"})]}),x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[x.jsx(p,{className:"h-4 w-4"}),x.jsx("span",{children:null==(e=null==r?void 0:r.email)?void 0:e.split("@")[0]})]}),x.jsxs("button",{onClick:t,className:"flex items-center space-x-1 text-gray-600 hover:text-gray-900",children:[x.jsx(y,{className:"h-4 w-4"}),x.jsx("span",{children:"Çıkış"})]})]})]})})}),x.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[E?x.jsxs("div",{className:"text-center py-12",children:[x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),x.jsx("p",{className:"mt-4 text-gray-600",children:"Veriler yükleniyor..."})]}):x.jsxs("div",{className:"space-y-8",children:[x.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[x.jsxs("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 p-4 sm:p-6 text-white",children:[x.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[x.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[x.jsxs("div",{className:"relative",children:[ie||M.profileImage?x.jsx("img",{src:ie||M.profileImage,alt:"Profil Fotoğrafı",className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-4 border-white shadow-lg"}):x.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-white bg-opacity-20 flex items-center justify-center border-4 border-white shadow-lg",children:x.jsx(g,{className:"h-12 w-12 sm:h-16 sm:w-16 text-white"})}),W&&x.jsxs(x.Fragment,{children:[x.jsx("input",{type:"file",id:"profile-image-upload",accept:"image/*",onChange:e=>d(null,null,function*(){const s=e.target.files[0];if(s)if(s.size>5242880)ae("Dosya boyutu 5MB'dan küçük olmalıdır.");else if(s.type.startsWith("image/")){te(!0),ae("");try{if(M.profileImage&&M.profileImage.includes("supabase")){const e=M.profileImage.split("/").pop();yield m.storage.from("profile-images").remove([`${r.id}/${e}`])}const e=s.name.split(".").pop(),a=`${Date.now()}.${e}`,l=`${r.id}/${a}`,{error:t}=yield m.storage.from("profile-images").upload(l,s);if(t)throw t;const{data:{publicUrl:i}}=m.storage.from("profile-images").getPublicUrl(l);V(e=>o(n({},e),{profileImage:i})),ne(i),se("Profil fotoğrafı başarıyla yüklendi!"),setTimeout(()=>se(""),3e3)}catch(a){console.error("❌ Fotoğraf yüklenemedi:",a),ae("Fotoğraf yüklenirken hata oluştu: "+a.message)}finally{te(!1)}}else ae("Lütfen geçerli bir resim dosyası seçin.")}),className:"hidden"}),x.jsx("label",{htmlFor:"profile-image-upload",className:"absolute bottom-0 right-0 bg-white text-primary-600 p-2 rounded-full shadow-lg hover:bg-gray-100 transition-colors cursor-pointer",children:le?x.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"}):x.jsx(f,{className:"h-4 w-4"})})]})]}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold",children:M.fullName||"Kullanıcı"}),x.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-1 sm:space-y-0 sm:space-x-4 mt-2",children:[x.jsxs("div",{className:"flex items-center space-x-1",children:[x.jsx(b,{className:"h-4 w-4"}),x.jsx("span",{className:"text-sm opacity-90",children:M.email})]}),M.city&&x.jsxs("div",{className:"flex items-center space-x-1",children:[x.jsx(j,{className:"h-4 w-4"}),x.jsx("span",{className:"text-sm opacity-90",children:M.city})]})]})]})]}),x.jsx("button",{onClick:()=>J(!W),className:"flex items-center space-x-1 sm:space-x-2 px-3 sm:px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg hover:bg-opacity-30 transition-colors backdrop-blur-sm text-sm sm:text-base",children:W?x.jsxs(x.Fragment,{children:[x.jsx(v,{className:"h-4 w-4"}),x.jsx("span",{children:"İptal"})]}):x.jsxs(x.Fragment,{children:[x.jsx(N,{className:"h-4 w-4"}),x.jsx("span",{children:"Düzenle"})]})})]}),M.bio&&x.jsxs("div",{className:"mt-4",children:[x.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Hakkımda"}),x.jsx("p",{className:"text-white opacity-90 leading-relaxed",children:M.bio})]})]}),W&&x.jsxs("div",{className:"p-6 border-t border-gray-200",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Profil Bilgileri"}),re&&x.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:x.jsx("p",{className:"text-red-600 text-sm",children:re})}),ee&&x.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:x.jsx("p",{className:"text-green-700 text-sm",children:ee})}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ad Soyad"}),x.jsx("input",{type:"text",value:M.fullName,onChange:e=>V(s=>o(n({},s),{fullName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Adınızı ve soyadınızı girin"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta"}),x.jsx("input",{type:"email",value:M.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500"}),x.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"E-posta adresi değiştirilemez"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefon"}),x.jsx("input",{type:"tel",value:M.phone,onChange:e=>V(s=>o(n({},s),{phone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"+90 5XX XXX XX XX"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şehir"}),x.jsx("input",{type:"text",value:M.city,onChange:e=>V(s=>o(n({},s),{city:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Yaşadığınız şehir"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doğum Tarihi"}),x.jsx("input",{type:"date",value:M.birthDate,onChange:e=>V(s=>o(n({},s),{birthDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),x.jsxs("div",{className:"mt-6",children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hakkımda"}),x.jsx("textarea",{value:M.bio,onChange:e=>V(s=>o(n({},s),{bio:e.target.value})),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Kendiniz hakkında kısa bir açıklama yazın..."})]}),x.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[x.jsx("button",{onClick:()=>J(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"İptal"}),x.jsx("button",{onClick:()=>d(null,null,function*(){if(r){Z(!0),ae(""),se("");try{const{error:e}=yield m.auth.updateUser({data:{full_name:M.fullName,phone:M.phone,city:M.city,bio:M.bio,profile_image:M.profileImage,birth_date:M.birthDate}});if(e)throw e;se("Profil başarıyla güncellendi!"),J(!1),ne(""),setTimeout(()=>se(""),3e3)}catch(e){console.error("❌ Profil güncellenemedi:",e),ae("Profil güncellenirken hata oluştu: "+e.message)}finally{Z(!1)}}}),disabled:Q,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:Q?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),x.jsx("span",{children:"Kaydediliyor..."})]}):x.jsxs(x.Fragment,{children:[x.jsx(w,{className:"h-4 w-4"}),x.jsx("span",{children:"Kaydet"})]})})]})]})]}),x.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200",children:[x.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:x.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-3 sm:space-y-0",children:[x.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 flex items-center",children:[x.jsx(k,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-500 mr-2 sm:mr-3"}),"Favorilerim (",i.length,")"]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("button",{onClick:()=>U("grid"),className:"p-2 rounded "+("grid"===G?"bg-primary-100 text-primary-600":"text-gray-600 hover:text-gray-900"),title:"Grid Görünümü",children:x.jsx(_,{className:"h-4 w-4"})}),x.jsx("button",{onClick:()=>U("list"),className:"p-2 rounded "+("list"===G?"bg-primary-100 text-primary-600":"text-gray-600 hover:text-gray-900"),title:"Liste Görünümü",children:x.jsx(z,{className:"h-4 w-4"})})]})]})}),x.jsx("div",{className:"p-6",children:0===i.length?x.jsxs("div",{className:"text-center py-12",children:[x.jsx(k,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Henüz favori yazınız yok"}),x.jsx("p",{className:"text-gray-600 mb-4",children:"Beğendiğiniz yazıları favorilere ekleyerek burada görebilirsiniz."}),x.jsx("button",{onClick:()=>s("/"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:"Yazıları Keşfet"})]}):x.jsx("div",{className:"grid gap-6 "+("grid"===G?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"),children:i.map(e=>x.jsx(be,{post:e.posts,onRemove:fe,removeLabel:"Favoriden Çıkar",showPlaylistButton:!0},e.id))})})]}),x.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200",children:[x.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:x.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-3 sm:space-y-0",children:[x.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 flex items-center",children:[x.jsx(C,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-500 mr-2 sm:mr-3"}),"Blog Listem (",I.length,")"]}),x.jsxs("button",{onClick:()=>Y(!R),className:"inline-flex items-center px-3 sm:px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[x.jsx(P,{className:"h-4 w-4 mr-2"}),"Yeni Liste"]})]})}),x.jsxs("div",{className:"p-6",children:[R&&x.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsx("input",{type:"text",value:T,onChange:e=>A(e.target.value),placeholder:"Liste adı...",className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",onKeyPress:e=>"Enter"===e.key&&ge()}),x.jsx("button",{onClick:ge,disabled:!T.trim(),className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Oluştur"}),x.jsx("button",{onClick:()=>{Y(!1),A("")},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"İptal"})]})}),0===I.length?x.jsxs("div",{className:"text-center py-12",children:[x.jsx(C,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Henüz listeniz yok"}),x.jsx("p",{className:"text-gray-600",children:"Kendi listelerinizi oluşturarak yazıları organize edebilirsiniz."})]}):x.jsx("div",{className:"space-y-6",children:I.map(e=>{var s,r,a;return x.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),e.description&&x.jsx("p",{className:"text-gray-600 text-sm mt-1",children:e.description}),x.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:[(null==(s=X[e.id])?void 0:s.length)||0," yazı"]})]}),x.jsx("button",{onClick:()=>{return s=e.id,d(null,null,function*(){if(window.confirm("Bu playlisti silmek istediğinizden emin misiniz?"))try{yield m.from("playlist_posts").delete().eq("playlist_id",s);const{error:e}=yield m.from("user_playlists").delete().eq("id",s);if(e)throw e;K(e=>e.filter(e=>e.id!==s)),$(e=>{const r=n({},e);return delete r[s],r})}catch(e){console.error("❌ Playlist silinemedi:",e)}});var s},className:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:"Listeyi Sil",children:x.jsx(S,{className:"h-4 w-4"})})]}),x.jsx("div",{children:0===(null==(r=X[e.id])?void 0:r.length)?x.jsxs("div",{className:"text-center py-8 text-gray-500",children:[x.jsx(z,{className:"h-8 w-8 mx-auto mb-2"}),x.jsx("p",{children:"Bu listede henüz yazı yok"})]}):x.jsx("div",{className:"grid gap-4 "+("grid"===G?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"),children:null==(a=X[e.id])?void 0:a.map(s=>x.jsx(be,{post:s.posts,onRemove:s=>((e,s)=>d(null,null,function*(){try{const{error:r}=yield m.from("playlist_posts").delete().eq("playlist_id",e).eq("post_id",s);if(r)throw r;$(r=>{var a;return o(n({},r),{[e]:(null==(a=r[e])?void 0:a.filter(e=>e.post_id!==s))||[]})})}catch(r){console.error("❌ Playlistten çıkarılamadı:",r)}}))(e.id,s),removeLabel:"Listeden Çıkar"},s.id))})})]},e.id)})})]})]})]}),oe&&ce&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:x.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 w-full max-w-md mx-4",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Liste Seç"}),x.jsx("button",{onClick:()=>de(!1),className:"text-gray-400 hover:text-gray-600",children:x.jsx(v,{className:"h-5 w-5"})})]}),x.jsxs("div",{className:"mb-4",children:[x.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Bu yazıyı hangi listeye eklemek istiyorsun?"}),x.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:x.jsx("h4",{className:"font-medium text-gray-900 text-sm truncate",children:ce.title})})]}),x.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:0===I.length?x.jsxs("div",{className:"text-center py-8 text-gray-500",children:[x.jsx(C,{className:"h-8 w-8 mx-auto mb-2"}),x.jsx("p",{className:"text-sm",children:"Henüz listeniz yok"}),x.jsx("p",{className:"text-xs",children:"Önce bir liste oluşturun"})]}):I.map(e=>{var s;return x.jsx("button",{onClick:()=>{return s=e.id,r=ce.id,d(null,null,function*(){try{const{error:e}=yield m.from("playlist_posts").insert({playlist_id:s,post_id:r});if(e)throw e;yield ye(s),de(!1),me(null)}catch(e){console.error("❌ Playlist'e eklenemedi:",e)}});var s,r},className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:border-primary-300 hover:bg-primary-50 transition-colors",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),x.jsxs("p",{className:"text-xs text-gray-500",children:[(null==(s=X[e.id])?void 0:s.length)||0," yazı"]})]}),x.jsx(P,{className:"h-4 w-4 text-gray-400"})]})},e.id)})}),x.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:x.jsx("button",{onClick:()=>de(!1),className:"w-full px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"İptal"})})]})})]})]})};export{O as default};
