var e=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,r=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,l=(e,l)=>{for(var i in l||(l={}))a.call(l,i)&&r(e,i,l[i]);if(s)for(var i of s(l))t.call(l,i)&&r(e,i,l[i]);return e};import{j as i,S as n}from"./index-DV_CMWWu.js";import{d as c,u as d,r as o,L as m}from"./react-vendor-D69WjZO_.js";import{b as x,a as h}from"./blog-00crhbIu.js";import{b as g,p as u}from"./tags-CLG0hMD2.js";import{S as p}from"./SEO-DfxcqcZX.js";import{a as y}from"./seo-bgosINEl.js";import{t as j,v,q as b,r as N,l as f,d as w,j as k}from"./ui-vendor-CQDp9-dR.js";import"./supabase-C6BlnBHX.js";import"./utils-CHphCHSg.js";const S=()=>{const{categorySlug:e}=c(),s=d(),[a,t]=o.useState(null),[r,S]=o.useState(null),[_,$]=o.useState([]),[z,B]=o.useState(!0),[C,O]=o.useState(null),[P,E]=o.useState("grid"),[D,F]=o.useState(1),[M,T]=o.useState(0),[Y,A]=o.useState(!1),H=12,[J,K]=o.useState(null);o.useEffect(()=>{L()},[e,D]);const L=()=>{return s=null,a=null,r=function*(){B(!0),O(null);try{const{data:s,error:a}=yield g.getBySlug(e);if(!a&&s){A(!0),S(s);const{data:a,error:t}=yield u.getPostsByTag(e,{limit:H,offset:(D-1)*H});if(t)return void O("Yazılar yüklenirken hata oluştu");$(a||[]);const{data:r}=yield u.getPostsByTag(e,{limit:1e3});T((null==r?void 0:r.length)||0);const l=y(s,a||[]);K(l)}else{A(!1);const{data:s,error:a}=yield x.getBySlug(e);if(a||!s)return void O("Kategori bulunamadı");t(s);const{data:r,error:l}=yield h.getByCategory(e,{limit:H,offset:(D-1)*H});if(l)return void O("Yazılar yüklenirken hata oluştu");$(r||[]);const{data:i}=yield h.getByCategory(e,{limit:1e3});T((null==i?void 0:i.length)||0);const n=y(s,r||[]);K(n)}}catch(s){O("Bir hata oluştu: "+s.message)}finally{B(!1)}},new Promise((e,t)=>{var l=e=>{try{n(r.next(e))}catch(s){t(s)}},i=e=>{try{n(r.throw(e))}catch(s){t(s)}},n=s=>s.done?e(s.value):Promise.resolve(s.value).then(l,i);n((r=r.apply(s,a)).next())});var s,a,r},q=e=>new Date(e).toLocaleDateString("tr-TR",{year:"numeric",month:"short",day:"numeric"}),G=Math.ceil(M/H);return z?i.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-8 bg-gray-200 rounded mb-4 w-1/3"}),i.jsx("div",{className:"h-4 bg-gray-200 rounded mb-8 w-2/3"}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,s)=>i.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[i.jsx("div",{className:"h-48 bg-gray-200"}),i.jsxs("div",{className:"p-4 space-y-3",children:[i.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),i.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),i.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},s))})]})})}):C?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[i.jsx("div",{className:"text-6xl mb-4",children:"📂"}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Kategori Bulunamadı"}),i.jsx("p",{className:"text-gray-600 mb-6",children:C}),i.jsx("button",{onClick:()=>s("/news"),className:"bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition-colors",children:"Haberlere Dön"})]})}):i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[J&&i.jsx(p,l({},J)),i.jsx("div",{className:"bg-gray-50 border-b border-gray-200",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3",children:i.jsxs("nav",{className:"flex items-center space-x-1 text-sm","aria-label":"Breadcrumb",children:[i.jsx(m,{to:"/",className:"inline-flex items-center px-2 py-1 rounded-md text-gray-600 hover:text-primary-600 hover:bg-white transition-colors duration-200",children:"Ana Sayfa"}),i.jsx("span",{className:"text-gray-400 mx-1",children:"›"}),i.jsx(m,{to:"/haberler",className:"inline-flex items-center px-2 py-1 rounded-md text-gray-600 hover:text-primary-600 hover:bg-white transition-colors duration-200",children:"Haberler"}),i.jsx("span",{className:"text-gray-400 mx-1",children:"›"}),Y?i.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-primary-100 text-primary-700 rounded-md font-medium truncate max-w-xs",children:null==r?void 0:r.name}):i.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-primary-100 text-primary-700 rounded-md font-medium truncate max-w-xs",children:null==a?void 0:a.name})]})})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[i.jsxs("header",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("div",{className:"flex items-center space-x-3 mb-2",children:Y?i.jsxs(i.Fragment,{children:[i.jsxs("span",{className:"inline-flex items-center space-x-1 px-4 py-2 text-sm font-medium text-white rounded-lg",style:{backgroundColor:(null==r?void 0:r.color)||"#3B82F6"},children:[i.jsx(j,{className:"h-4 w-4"}),i.jsx("span",{children:null==r?void 0:r.name})]}),i.jsxs("span",{className:"text-gray-600",children:[M," yazı"]})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"inline-block px-4 py-2 text-sm font-medium text-white rounded-lg",style:{backgroundColor:(null==a?void 0:a.color)||"#3B82F6"},children:null==a?void 0:a.name}),i.jsxs("span",{className:"text-gray-600",children:[M," yazı"]})]})}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:Y?`${null==r?void 0:r.name} Yazıları`:`${null==a?void 0:a.name} Haberleri`}),(Y?null==r?void 0:r.description:null==a?void 0:a.description)&&i.jsx("p",{className:"text-gray-600 mt-2 max-w-2xl",children:Y?r.description:a.description})]}),i.jsxs("button",{onClick:()=>s(-1),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[i.jsx(v,{className:"h-4 w-4"}),i.jsx("span",{children:"Geri Dön"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:["Sayfa ",D," / ",G,G>1&&` • ${M} yazının ${(D-1)*H+1}-${Math.min(D*H,M)} arası`]}),i.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>E("grid"),className:"p-2 rounded-md transition-colors "+("grid"===P?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:i.jsx(b,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>E("list"),className:"p-2 rounded-md transition-colors "+("list"===P?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:i.jsx(N,{className:"h-4 w-4"})})]})]})]}),0===_.length?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-6xl mb-4",children:"📝"}),i.jsx("h2",{className:"text-xl font-medium text-gray-900 mb-2",children:"Bu kategoride henüz yazı yok"}),i.jsx("p",{className:"text-gray-600",children:"Yakında bu kategoriye yeni yazılar eklenecek."})]}):i.jsxs(i.Fragment,{children:["grid"===P&&i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:_.map(e=>i.jsxs(m,{to:`/${e.category_slug}/${e.slug}`,className:"group block bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:[e.featured_image_url&&i.jsx("img",{src:e.featured_image_url,alt:e.title,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),i.jsxs("div",{className:"p-4",children:[i.jsx("div",{className:"flex items-center space-x-2 mb-2",children:i.jsxs("span",{className:"text-xs text-gray-600",children:[e.read_time," dk"]})}),i.jsx("h3",{className:"font-semibold text-gray-900 group-hover:text-primary-600 transition-colors line-clamp-2 mb-2",children:e.title}),e.excerpt&&i.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:e.excerpt}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(f,{className:"h-3 w-3"}),i.jsx("span",{children:e.author_name})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(w,{className:"h-3 w-3"}),i.jsx("span",{children:q(e.published_at||e.created_at)})]})]})]})]},e.id))}),"list"===P&&i.jsx("div",{className:"space-y-6 mb-12",children:_.map(e=>i.jsx(m,{to:`/${e.category_slug}/${e.slug}`,className:"group block bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"md:flex",children:[e.featured_image_url&&i.jsx("div",{className:"md:w-64 md:flex-shrink-0",children:i.jsx("img",{src:e.featured_image_url,alt:e.title,className:"w-full h-48 md:h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),i.jsxs("div",{className:"p-6 flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsxs("span",{className:"text-sm text-gray-600",children:[e.read_time," dakika okuma"]}),i.jsx("span",{className:"text-gray-400",children:"•"}),i.jsxs("span",{className:"text-sm text-gray-600",children:[i.jsx(k,{className:"h-3 w-3 inline mr-1"}),e.views||0]})]}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 group-hover:text-primary-600 transition-colors mb-2",children:e.title}),e.excerpt&&i.jsx("p",{className:"text-gray-600 line-clamp-2 mb-4",children:e.excerpt}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[i.jsx(f,{className:"h-4 w-4"}),i.jsx("span",{children:e.author_name})]}),i.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[i.jsx(w,{className:"h-4 w-4"}),i.jsx("span",{children:q(e.published_at||e.created_at)})]})]})]})]})},e.id))}),G>1&&i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx("button",{onClick:()=>F(Math.max(1,D-1)),disabled:1===D,className:"px-3 py-2 text-sm text-gray-500 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Önceki"}),[...Array(G)].map((e,s)=>{const a=s+1,t=a===D;return 1===a||a===G||a>=D-2&&a<=D+2?i.jsx("button",{onClick:()=>F(a),className:"px-3 py-2 text-sm rounded-md transition-colors "+(t?"bg-primary-600 text-white":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"),children:a},a):a===D-3||a===D+3?i.jsx("span",{className:"px-2 text-gray-400",children:"..."},a):null}),i.jsx("button",{onClick:()=>F(Math.min(G,D+1)),disabled:D===G,className:"px-3 py-2 text-sm text-gray-500 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Sonraki"})]})]})]}),i.jsx(n,{title:Y?`${null==r?void 0:r.name} - JoinEscapes`:`${null==a?void 0:a.name} - JoinEscapes`,url:window.location.href,description:Y?`${null==r?void 0:r.name} etiketli yazılar`:`${null==a?void 0:a.name} kategorisindeki yazılar`,hashtags:["JoinEscapes","Seyahat","Turizm","Destinasyon"],variant:"floating"})]})};export{S as default};
