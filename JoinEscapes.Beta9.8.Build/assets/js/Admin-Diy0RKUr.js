const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/PostForm-BK24-i7A.js","assets/js/index-BX_2995U.js","assets/js/react-vendor-D69WjZO_.js","assets/js/supabase-C6BlnBHX.js","assets/js/utils-CHphCHSg.js","assets/js/ui-vendor-CQDp9-dR.js","assets/index-BUrYKIb3.css","assets/js/blog-CJDpH35N.js","assets/js/tags-CvBF-6Ga.js","assets/PostForm-DZrYvFpI.css"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,n=(e,s)=>{for(var a in s||(s={}))r.call(s,a)&&i(e,a,s[a]);if(t)for(var a of t(s))l.call(s,a)&&i(e,a,s[a]);return e},d=(e,t)=>s(e,a(t)),c=(e,s,a)=>new Promise((t,r)=>{var l=e=>{try{n(a.next(e))}catch(s){r(s)}},i=e=>{try{n(a.throw(e))}catch(s){r(s)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(l,i);n((a=a.apply(e,s)).next())});import{_ as o,c as m}from"./supabase-C6BlnBHX.js";import{s as x,j as u,u as h,a as g}from"./index-BX_2995U.js";import{r as p,u as y}from"./react-vendor-D69WjZO_.js";import{b as j,a as b}from"./blog-CJDpH35N.js";import{b as f,a as v}from"./tags-CvBF-6Ga.js";import{migrateLocalStorageToSupabase as N,extractVideoId as w,fetchVideoInfo as k,youtubeVideoService as _}from"./youtubeSupabase-5xO9UVbW.js";import{N as z,ai as S,aj as C,U as E,ak as B,d as A,G as K,e as P,s as Y,o as T,al as O,t as $,am as R,l as D,an as U,ao as F,J as I,ap as L,j as V,T as q,aq as G,X as H,h as M,V as J,x as X,p as Z,ar as W,as as Q}from"./ui-vendor-CQDp9-dR.js";import{r as ee,i as se}from"./inputValidator-i9iGeD-F.js";import"./utils-CHphCHSg.js";const ae=()=>c(null,null,function*(){try{const{data:e,error:s}=yield x.storage.listBuckets();if(s)return console.error("Bucket listesi alınamadı:",s),!1;if(!e.find(e=>"blog-images"===e.name)){const e=yield c(null,null,function*(){try{const{data:e,error:s}=yield x.storage.createBucket("blog-images",{public:!0,allowedMimeTypes:["image/png","image/jpeg","image/gif","image/webp"],fileSizeLimit:5242880});return s&&"Bucket already exists"!==s.message?(console.error("Bucket oluşturma hatası:",s),{success:!1,error:s}):{success:!0,data:e}}catch(s){return console.error("Bucket setup hatası:",s),{success:!1,error:s}}});return e.success}return!0}catch(e){return console.error("Bucket kontrol hatası:",e),!1}});m("https://zhyrmasdozeptezoomnq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpoeXJtYXNkb3plcHRlem9vbW5xIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg4ODQ4NjUsImV4cCI6MjA2NDQ2MDg2NX0.u1Mq0iRPOExGHZ-crZXgR9gAlSjk097yashJmPRysy4");const te="https://www.joinescapes.com",re=[{url:"",priority:1,changefreq:"daily",section:"Ana Sayfalar"},{url:"/haberler",priority:.9,changefreq:"daily",section:"Ana Sayfalar"},{url:"/destinasyonlar",priority:.9,changefreq:"weekly",section:"Ana Sayfalar"},{url:"/sanat-ve-cemiyet",priority:.8,changefreq:"daily",section:"Kategori Sayfaları"},{url:"/spa-molalari",priority:.8,changefreq:"weekly",section:"Kategori Sayfaları"},{url:"/butik-oteller",priority:.8,changefreq:"weekly",section:"Kategori Sayfaları"},{url:"/paket-tatiller",priority:.8,changefreq:"weekly",section:"Kategori Sayfaları"},{url:"/oteller",priority:.8,changefreq:"weekly",section:"Kategori Sayfaları"},{url:"/luks-seckiler",priority:.8,changefreq:"weekly",section:"Kategori Sayfaları"},{url:"/sehir-molalari",priority:.8,changefreq:"weekly",section:"Kategori Sayfaları"},{url:"/yaz-2025",priority:.8,changefreq:"weekly",section:"Kategori Sayfaları"},{url:"/hakkimizda",priority:.6,changefreq:"monthly",section:"Statik Sayfalar"},{url:"/iletisim",priority:.6,changefreq:"monthly",section:"Statik Sayfalar"},{url:"/gizlilik-politikasi",priority:.3,changefreq:"yearly",section:"Statik Sayfalar"},{url:"/cerez-politikasi",priority:.3,changefreq:"yearly",section:"Statik Sayfalar"},{url:"/kullanim-sartlari",priority:.3,changefreq:"yearly",section:"Statik Sayfalar"}],le=()=>c(null,null,function*(){try{const{data:e,error:s}=yield j.getAll();return s?(console.error("Kategoriler çekilemedi:",s),[]):e||[]}catch(e){return console.error("Kategoriler çekilemedi:",e),[]}}),ie=()=>c(null,null,function*(){try{const{data:e,error:s}=yield f.getFeatured();return s?(console.error("Etiketler çekilemedi:",s),[]):e||[]}catch(e){return console.error("Etiketler çekilemedi:",e),[]}}),ne=()=>c(null,null,function*(){try{const{data:e,error:s}=yield v.getLatestPosts(1e3);return s?(console.error("Blog yazıları çekilemedi:",s),[]):e||[]}catch(e){return console.error("Blog yazıları çekilemedi:",e),[]}}),de=()=>{const[e,s]=p.useState(null),[a,t]=p.useState(!0),[r,l]=p.useState({start:(new Date).toISOString().split("T")[0],end:(new Date).toISOString().split("T")[0]});p.useEffect(()=>{i()},[r]);const i=()=>c(null,null,function*(){try{t(!0);const{data:e,error:a}=yield x.from("cookie_consents").select("*").limit(5);if(a)return void console.error("❌ Basic table access failed:",a);const{count:l,error:i}=yield x.from("cookie_consents").select("*",{count:"exact",head:!0}),{data:n,error:d}=yield x.from("cookie_consents").select("*").order("consented_at",{ascending:!1}).limit(10);let c,o;const m=yield x.from("cookie_consents").select("*").gte("consented_at",r.start).lte("consented_at",r.end+"T23:59:59").order("consented_at",{ascending:!1});if(!m.error&&m.data)c=m.data,o=m.error;else{const e=yield x.from("cookie_consents").select("*").gte("created_at",r.start).lte("created_at",r.end+"T23:59:59").order("created_at",{ascending:!1});c=e.data,o=e.error}if(o)return void console.error("❌ Raw data fetch error:",o);let u=c;if((!c||0===c.length)&&n&&n.length>0&&(u=n),!u||0===u.length)return void s({total_consents:l||0,accepted_all:0,accepted_analytics:0,accepted_marketing:0,accepted_personalization:0,only_necessary:0,avg_categories_per_user:0});const h=u.length,g=u.filter(e=>!0===e.analytics).length,p=u.filter(e=>!0===e.marketing).length,y=u.filter(e=>!0===e.personalization).length,j=u.filter(e=>!0===e.analytics&&!0===e.marketing&&!0===e.personalization).length,b={total_consents:h,accepted_all:j,accepted_analytics:g,accepted_marketing:p,accepted_personalization:y,only_necessary:u.filter(e=>!1===e.analytics&&!1===e.marketing&&!1===e.personalization).length,avg_categories_per_user:h>0?((g+p+y)/h).toFixed(1):0};s(b)}catch(e){console.error("💥 Analytics fetch exception:",e)}finally{t(!1)}});if(a)return u.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-6 bg-gray-200 rounded mb-4"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3].map(e=>u.jsx("div",{className:"h-20 bg-gray-200 rounded"},e))})]})});if(!e)return u.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:u.jsx("p",{className:"text-gray-500 text-center",children:"Analitik verileri yüklenemedi."})});const o=e.total_consents>0?Math.round(e.accepted_analytics/e.total_consents*100):0,m=e.total_consents>0?Math.round(e.accepted_marketing/e.total_consents*100):0;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center",children:[u.jsx(z,{className:"h-6 w-6 text-blue-600 mr-2"}),"Çerez Onayı Analitiği"]}),u.jsx("div",{className:"flex items-center space-x-3",children:u.jsxs("button",{onClick:()=>c(null,null,function*(){try{const{data:e,error:s}=yield x.from("cookie_consents").select("*").gte("consented_at",r.start).lte("consented_at",r.end).order("consented_at",{ascending:!1});if(s)return void console.error("Export error:",s);const a=[["Tarih","Kullanıcı ID","Session ID","IP","Gerekli","Analitik","Pazarlama","Kişiselleştirme","Yöntem"].join(","),...e.map(e=>[new Date(e.consented_at).toLocaleString("tr-TR"),e.user_id||"Anonim",e.session_id||"-",e.ip_address||"-",e.necessary?"Evet":"Hayır",e.analytics?"Evet":"Hayır",e.marketing?"Evet":"Hayır",e.personalization?"Evet":"Hayır",e.consent_method||"banner"].join(","))].join("\n"),t=new Blob([a],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a");l.href=URL.createObjectURL(t),l.download=`cerez-onaylari-${r.start}-${r.end}.csv`,l.click()}catch(e){console.error("Export error:",e)}}),className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[u.jsx(S,{className:"h-4 w-4"}),u.jsx("span",{children:"Dışa Aktar"})]})})]}),u.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[u.jsx(C,{className:"h-5 w-5 text-gray-400"}),u.jsx("input",{type:"date",value:r.start,onChange:e=>l(s=>d(n({},s),{start:e.target.value})),className:"border border-gray-300 rounded-lg px-3 py-2"}),u.jsx("span",{className:"text-gray-500",children:"-"}),u.jsx("input",{type:"date",value:r.end,onChange:e=>l(s=>d(n({},s),{end:e.target.value})),className:"border border-gray-300 rounded-lg px-3 py-2"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:u.jsx(E,{className:"h-6 w-6 text-blue-600"})}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Toplam Onay"}),u.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.total_consents})]})]})}),u.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:u.jsx(B,{className:"h-6 w-6 text-green-600"})}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Analitik Kabul"}),u.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[o,"%"]}),u.jsxs("p",{className:"text-xs text-gray-500",children:[e.accepted_analytics," / ",e.total_consents]})]})]})}),u.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:u.jsx(z,{className:"h-6 w-6 text-purple-600"})}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Pazarlama Kabul"}),u.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[m,"%"]}),u.jsxs("p",{className:"text-xs text-gray-500",children:[e.accepted_marketing," / ",e.total_consents]})]})]})}),u.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:u.jsx(A,{className:"h-6 w-6 text-orange-600"})}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Sadece Gerekli"}),u.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.only_necessary}),u.jsxs("p",{className:"text-xs text-gray-500",children:[e.total_consents>0?Math.round(e.only_necessary/e.total_consents*100):0,"%"]})]})]})})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Kategori Dağılımı"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"Gerekli Çerezler"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"100%"}})}),u.jsx("span",{className:"text-sm font-medium",children:e.total_consents})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"Analitik Çerezler"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${o}%`}})}),u.jsx("span",{className:"text-sm font-medium",children:e.accepted_analytics})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"Pazarlama Çerezleri"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${m}%`}})}),u.jsx("span",{className:"text-sm font-medium",children:e.accepted_marketing})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"Kişiselleştirme"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:`${e.total_consents>0?Math.round(e.accepted_personalization/e.total_consents*100):0}%`}})}),u.jsx("span",{className:"text-sm font-medium",children:e.accepted_personalization})]})]})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Özet İstatistikler"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[u.jsx("span",{className:"text-sm text-blue-900",children:"Tümünü Kabul Eden"}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-lg font-bold text-blue-900",children:e.accepted_all}),u.jsxs("div",{className:"text-xs text-blue-600",children:[e.total_consents>0?Math.round(e.accepted_all/e.total_consents*100):0,"%"]})]})]}),u.jsxs("div",{className:"flex justify-between items-center p-3 bg-orange-50 rounded-lg",children:[u.jsx("span",{className:"text-sm text-orange-900",children:"Sadece Gerekli"}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-lg font-bold text-orange-900",children:e.only_necessary}),u.jsxs("div",{className:"text-xs text-orange-600",children:[e.total_consents>0?Math.round(e.only_necessary/e.total_consents*100):0,"%"]})]})]}),u.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"text-sm text-gray-900",children:"Ortalama Kategori"}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-lg font-bold text-gray-900",children:e.avg_categories_per_user}),u.jsx("div",{className:"text-xs text-gray-600",children:"kategori/kullanıcı"})]})]})]})]})]}),u.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[u.jsx("h4",{className:"text-sm font-semibold text-yellow-800 mb-2",children:"📋 Yasal Uyumluluk Notu"}),u.jsx("p",{className:"text-sm text-yellow-700",children:"Bu veriler KVKK ve GDPR uyumluluğu için saklanmaktadır. Kişisel veriler anonimleştirilerek raporlanır ve 3 yıl süreyle tutulur."})]})]})},ce=()=>{const[e,s]=p.useState(null),[a,t]=p.useState(!0);p.useEffect(()=>{r()},[]);const r=()=>c(null,null,function*(){try{t(!0);const e=(new Date).toISOString().split("T")[0];let{data:a,error:r}=yield x.from("cookie_consents").select("*").gte("consented_at",e).lte("consented_at",e+"T23:59:59").order("consented_at",{ascending:!1});if(r)return void console.error("❌ BI raw data error:",r);if(!a||0===a.length){const{data:e,error:t}=yield x.from("cookie_consents").select("*").order("consented_at",{ascending:!1}).limit(100);if(t)return console.error("❌ All data error:",t),void s({marketing:{canUseGA:!1,canUseFBPixel:!1,canPersonalize:!1,organicFocusNeeded:!0},geographical:{},timing:{},conversion:{quickAcceptRate:"0",customizationRate:"0",rejectRate:"0"},recommendations:[]});a=e}const i=a.length,n=a.filter(e=>!0===e.analytics).length,d=a.filter(e=>!0===e.marketing).length,c={total_consents:i,accepted_analytics:n,accepted_marketing:d,accepted_personalization:a.filter(e=>!0===e.personalization).length},o=a.filter(e=>e.ip_address),m=a.filter(e=>e.session_id),u=l(c,o,m);s(u)}catch(e){console.error("💥 Business intelligence error:",e)}finally{t(!1)}}),l=(e,s,a)=>{const t={canUseGA:e.accepted_analytics>0,canUseFBPixel:e.accepted_marketing>0,canPersonalize:e.accepted_personalization>0,organicFocusNeeded:e.accepted_marketing<e.accepted_analytics};return{marketing:t,geographical:s.reduce((e,s)=>{var a;const t=(null==(a=s.ip_address)?void 0:a.split(".")[0])||"unknown";return e[t]||(e[t]={total:0,analytics:0,marketing:0}),e[t].total++,s.analytics&&e[t].analytics++,s.marketing&&e[t].marketing++,e},{}),timing:a.reduce((e,s)=>{const a=new Date(s.consented_at).getHours();return e[a]||(e[a]={total:0,quick_accept:0}),e[a].total++,"accept-all"===s.consent_method&&e[a].quick_accept++,e},{}),conversion:{quickAcceptRate:(a.filter(e=>"accept-all"===e.consent_method).length/a.length*100).toFixed(1),customizationRate:(a.filter(e=>"custom-settings"===e.consent_method).length/a.length*100).toFixed(1),rejectRate:(a.filter(e=>"reject-all"===e.consent_method).length/a.length*100).toFixed(1)},recommendations:i(t,e)}},i=(e,s)=>{const a=[];return s.accepted_analytics<.5*s.total_consents&&a.push({type:"warning",title:"Analytics Kabul Oranı Düşük",description:"Kullanıcıların %50'sinden azı analytics kabul ediyor. Server-side tracking düşünün.",action:"Server-side Google Analytics 4 implementasyonu"}),s.accepted_marketing<.3*s.total_consents&&a.push({type:"info",title:"Marketing Kabul Oranı Düşük",description:"Paid ads yerine organic content marketing'e odaklanın.",action:"SEO ve content marketing stratejisi geliştirin"}),s.accepted_personalization>.7*s.total_consents&&a.push({type:"success",title:"Kişiselleştirme Fırsatı",description:"Kullanıcılar kişiselleştirmeyi seviyor. Recommendation engine ekleyin.",action:"AI-powered içerik öneri sistemi geliştirin"}),a};return a?u.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:u.jsxs("div",{className:"animate-pulse",children:[u.jsx("div",{className:"h-6 bg-gray-200 rounded mb-4"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[1,2,3,4].map(e=>u.jsx("div",{className:"h-32 bg-gray-200 rounded"},e))})]})}):e?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg shadow p-6 text-white",children:[u.jsxs("h2",{className:"text-2xl font-bold mb-2 flex items-center",children:[u.jsx(z,{className:"h-7 w-7 mr-3"}),"Cookie Business Intelligence"]}),u.jsx("p",{className:"text-blue-100",children:"Cookie verilerinizi iş stratejinize dönüştürün"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 "+(e.marketing.canUseGA?"border-green-500":"border-red-500"),children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(B,{className:"h-8 w-8 "+(e.marketing.canUseGA?"text-green-600":"text-red-600")}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Google Analytics"}),u.jsx("p",{className:"text-lg font-bold "+(e.marketing.canUseGA?"text-green-900":"text-red-900"),children:e.marketing.canUseGA?"Aktif Kullan":"Server-side Geç"})]})]})}),u.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 "+(e.marketing.canUseFBPixel?"border-blue-500":"border-orange-500"),children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(E,{className:"h-8 w-8 "+(e.marketing.canUseFBPixel?"text-blue-600":"text-orange-600")}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Facebook Ads"}),u.jsx("p",{className:"text-lg font-bold "+(e.marketing.canUseFBPixel?"text-blue-900":"text-orange-900"),children:e.marketing.canUseFBPixel?"Pixel Kullan":"Organic Odaklan"})]})]})}),u.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 "+(e.marketing.canPersonalize?"border-purple-500":"border-gray-500"),children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(K,{className:"h-8 w-8 "+(e.marketing.canPersonalize?"text-purple-600":"text-gray-600")}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Kişiselleştirme"}),u.jsx("p",{className:"text-lg font-bold "+(e.marketing.canPersonalize?"text-purple-900":"text-gray-900"),children:e.marketing.canPersonalize?"AI Öneri Sys.":"Generic Content"})]})]})}),u.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-indigo-500",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(P,{className:"h-8 w-8 text-indigo-600"}),u.jsxs("div",{className:"ml-4",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Hızlı Kabul"}),u.jsxs("p",{className:"text-lg font-bold text-indigo-900",children:["%",e.conversion.quickAcceptRate]})]})]})})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[u.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[u.jsx(B,{className:"h-6 w-6 text-blue-600 mr-2"}),"Stratejik Öneriler"]}),u.jsx("div",{className:"space-y-4",children:e.recommendations.map((e,s)=>u.jsxs("div",{className:"p-4 rounded-lg border-l-4 "+("success"===e.type?"bg-green-50 border-green-400":"warning"===e.type?"bg-yellow-50 border-yellow-400":"bg-blue-50 border-blue-400"),children:[u.jsx("h4",{className:"font-semibold "+("success"===e.type?"text-green-900":"warning"===e.type?"text-yellow-900":"text-blue-900"),children:e.title}),u.jsx("p",{className:"text-sm mt-1 "+("success"===e.type?"text-green-700":"warning"===e.type?"text-yellow-700":"text-blue-700"),children:e.description}),u.jsxs("p",{className:"text-xs mt-2 font-medium "+("success"===e.type?"text-green-800":"warning"===e.type?"text-yellow-800":"text-blue-800"),children:["🎯 Aksiyon: ",e.action]})]},s))})]}),u.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-6",children:[u.jsx("h4",{className:"text-lg font-semibold text-amber-900 mb-3",children:"📋 Veri Kullanım Rehberi"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-amber-800",children:[u.jsxs("div",{children:[u.jsx("h5",{className:"font-medium mb-2",children:"✅ Yapabileceklerin:"}),u.jsxs("ul",{className:"space-y-1 text-xs",children:[u.jsx("li",{children:"• Anonim istatistik analizi"}),u.jsx("li",{children:"• A/B test optimizasyonu"}),u.jsx("li",{children:"• Coğrafi trend analizi"}),u.jsx("li",{children:"• Marketing ROI hesaplama"}),u.jsx("li",{children:"• UX iyileştirme kararları"})]})]}),u.jsxs("div",{children:[u.jsx("h5",{className:"font-medium mb-2",children:"❌ Yapamazsın:"}),u.jsxs("ul",{className:"space-y-1 text-xs",children:[u.jsx("li",{children:"• Kişisel hedefleme (email yok)"}),u.jsx("li",{children:"• IP ile kullanıcı takibi"}),u.jsx("li",{children:"• 3. parti veri satışı"}),u.jsx("li",{children:"• Bireysel profilleme"}),u.jsx("li",{children:"• Cross-device tracking"})]})]})]})]})]}):u.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:u.jsx("p",{className:"text-gray-500 text-center",children:"Business intelligence verileri yüklenemedi."})})},oe=(e,s,...a)=>c(null,[e,s,...a],function*(e,s,a={}){try{console.log("🔔 Push notification gönderiliyor...");const{data:e,error:s}=yield x.from("notification_permissions").select("*").eq("permission","granted");if(s)return console.error("❌ Kullanıcı izinleri getirilemedi:",s),{success:!1,error:s};if(!e||0===e.length)return console.log("⚠️ İzin veren kullanıcı bulunamadı"),{success:!1,message:"No users with permission"};console.log(`✅ ${e.length} kullanıcıya bildirim gönderilecek`);const a=yield Promise.allSettled(e.map(e=>c(null,null,function*(){try{return console.log(`📱 Bildirim gönderildi: ${e.user_id||"anonymous"}`),{userId:e.user_id,success:!0,message:"Notification sent"}}catch(s){return console.error(`❌ Bildirim gönderilemedi: ${e.user_id}`,s),{userId:e.user_id,success:!1,error:s.message}}}))),t=a.filter(e=>"fulfilled"===e.status&&e.value.success).length,r=a.length-t;return console.log(`✅ ${t} başarılı, ❌ ${r} başarısız`),{success:!0,total:e.length,successful:t,failed:r,results:a.map(e=>"fulfilled"===e.status?e.value:{success:!1,error:e.reason})}}catch(t){return console.error("❌ Push notification hatası:",t),{success:!1,error:t.message}}}),me=p.lazy(()=>o(()=>import("./PostForm-BK24-i7A.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),xe=()=>{const e=y(),{user:s,isAuthenticated:a,loading:t}=h(),[r,l]=p.useState("dashboard"),[i,m]=p.useState([]),[v,C]=p.useState([]),[B,K]=p.useState([]),[xe,ue]=p.useState([]),[he,ge]=p.useState(!1),[pe,ye]=p.useState(!1),[je,be]=p.useState(!1),[fe,ve]=p.useState(null),[Ne,we]=p.useState(!1),[ke,_e]=p.useState(!1),[ze,Se]=p.useState(null),[Ce,Ee]=p.useState(null),[Be,Ae]=p.useState(!1),[Ke,Pe]=p.useState(!1),[Ye,Te]=p.useState({totalPosts:0,publishedPosts:0,draftPosts:0,totalViews:0}),[Oe,$e]=p.useState([]),[Re,De]=p.useState(""),[Ue,Fe]=p.useState(""),[Ie,Le]=p.useState(!1),[Ve,qe]=p.useState(null),[Ge,He]=p.useState(!1),[Me,Je]=p.useState(!1),[Xe,Ze]=p.useState(!1),[We,Qe]=p.useState({total:0,granted:0,denied:0,default:0}),[es,ss]=p.useState(!1),[as,ts]=p.useState({title:"",message:"",url:""}),[rs,ls]=p.useState([]),[is,ns]=p.useState([]),[ds,cs]=p.useState(!1),[os,ms]=p.useState([]),[xs,us]=p.useState(!1),[hs,gs]=p.useState({fullName:"",email:"",newPassword:"",confirmPassword:"",authorName:"JoinEscapes",bio:""}),[ps,ys]=p.useState(!1),[js,bs]=p.useState(""),[fs,vs]=p.useState(""),[Ns,ws]=p.useState(""),[ks,_s]=p.useState({name:"",description:"",color:"#3B82F6",is_featured:!1}),[zs,Ss]=p.useState({name:"",description:"",color:"#3B82F6"}),Cs=()=>c(null,null,function*(){try{const e=yield c(null,null,function*(){try{const{data:e,error:s}=yield x.from("notification_permissions").select("permission");return s?(console.error("❌ İstatistikler getirilemedi:",s),null):{total:e.length,granted:e.filter(e=>"granted"===e.permission).length,denied:e.filter(e=>"denied"===e.permission).length,default:e.filter(e=>"default"===e.permission).length}}catch(e){return console.error("❌ İstatistik hatası:",e),null}});e&&Qe(e)}catch(e){console.error("Bildirim istatistikleri yüklenemedi:",e)}});if(p.useEffect(()=>{if(console.log("🔍 Admin Auth Check:",{loading:t,isAuthenticated:a,user:null==s?void 0:s.email}),!t&&!a)return console.log("❌ Admin: Çıkış yapıldı, ana sayfaya yönlendiriliyor..."),void e("/",{replace:!0});if(a&&s&&s.id){if("test@test.com"!==s.email)return console.log("🚫 Admin: Yetkisiz erişim denemesi:",s.email),alert("Bu panele sadece admin erişebilir!"),void e("/",{replace:!0});Cs()}},[t,a,e,s]),t)return u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Yükleniyor..."})]})});if(!a)return null;const Es=()=>c(null,null,function*(){ge(!0);const{data:e,error:s}=yield b.getAll({orderBy:"created_at",orderDirection:"desc"});!s&&e&&(m(e),console.log("✅ Admin paneline yüklenen yazı sayısı:",e.length)),ge(!1)}),Bs=()=>c(null,null,function*(){ye(!0);try{const{data:e,error:s}=yield x.from("posts").select("\n          *,\n          categories (\n            id,\n            name,\n            slug\n          )\n        ").eq("status","pending").order("created_at",{ascending:!1});!s&&e?(C(e),console.log("⏳ Onay bekleyen yazı sayısı:",e.length)):console.error("❌ Pending posts fetch hatası:",s)}catch(e){console.error("❌ Pending posts fetch hatası:",e)}ye(!1)}),As=()=>c(null,null,function*(){us(!0);try{const{data:e,error:s}=yield x.from("writer_profiles").select("*").order("created_at",{ascending:!1});!s&&e?(ms(e),ls(e.filter(e=>e.is_featured)),console.log("✅ Yazarlar yüklendi:",e.length,"öne çıkan:",e.filter(e=>e.is_featured).length)):console.error("❌ Writers fetch hatası:",s)}catch(e){console.error("❌ Writers fetch hatası:",e)}us(!1)}),Ks=()=>c(null,null,function*(){var e;console.log("📊 Gerçek istatistikler hesaplanıyor...");try{const[s,a,t,r]=yield Promise.all([x.from("posts").select("id",{count:"exact",head:!0}),x.from("posts").select("id",{count:"exact",head:!0}).eq("status","published"),x.from("posts").select("id",{count:"exact",head:!0}).eq("status","draft"),x.from("posts").select("views")]),l=s.count||0,i=a.count||0,n=t.count||0,d=(null==(e=r.data)?void 0:e.reduce((e,s)=>e+(s.views||0),0))||0;console.log("✅ Gerçek istatistikler:",{totalPosts:l,publishedPosts:i,draftPosts:n,totalViews:d}),Te({totalPosts:l,publishedPosts:i,draftPosts:n,totalViews:d})}catch(s){console.error("❌ İstatistik hatası:",s),Te({totalPosts:0,publishedPosts:0,draftPosts:0,totalViews:0})}}),Ps=()=>c(null,null,function*(){Ae(!0);const{data:e,error:s}=yield j.getAll();!s&&e&&K(e),Ae(!1)}),Ys=()=>c(null,null,function*(){be(!0);const{data:e,error:s}=yield f.getAll();!s&&e&&ue(e),be(!1)}),Ts=()=>{Se(null),_s({name:"",description:"",color:"#3B82F6",is_featured:!1}),l("tagForm")},Os=(e,s)=>{_s(a=>d(n({},a),{[e]:s}))},$s=()=>{Ee(null),Ss({name:"",description:"",color:"#3B82F6"}),l("categoryForm")},Rs=(e,s)=>{Ss(a=>d(n({},a),{[e]:s}))};p.useEffect(()=>{c(null,null,function*(){console.log("🚀 Admin paneli yükleniyor - HIZLI MOD!");try{const[e,s,a,t,r,l,i,n]=yield Promise.allSettled([Es(),Bs(),Ps(),Ys(),c(null,null,function*(){try{const{data:e,error:s}=yield _.getAll();!s&&e?$e(e):(console.error("YouTube videoları getirilemedi:",s),$e([]))}catch(e){console.error("YouTube videoları getirilemedi:",e),$e([])}}),Ks(),As(),qs()]);console.log("✅ Paralel veri yükleme tamamlandı:",{posts:e.status,categories:a.status,tags:t.status,videos:r.status,stats:l.status,writers:i.status,editors:n.status}),c(null,null,function*(){try{const e=yield ae();Pe(e),e||console.error("❌ Storage kurulum hatası")}catch(e){console.error("Storage setup hatası:",e)}}).catch(e=>console.warn("Storage kurulum uyarısı:",e)),setTimeout(()=>c(null,null,function*(){try{const e=yield N();e.success&&e.migrated>0&&console.log("✅ YouTube migration tamamlandı")}catch(e){console.warn("Migration hatası:",e)}}),1e3)}catch(e){console.error("❌ Admin init hatası:",e)}})},[]);p.useEffect(()=>{var e,a,t,r;s&&gs({fullName:(null==(e=s.user_metadata)?void 0:e.full_name)||(null==(a=s.email)?void 0:a.split("@")[0])||"JoinEscapes",email:s.email||"",newPassword:"",confirmPassword:"",authorName:(null==(t=s.user_metadata)?void 0:t.author_name)||"JoinEscapes",bio:(null==(r=s.user_metadata)?void 0:r.bio)||""})},[s]);const Ds=e=>c(null,null,function*(){if(window.confirm("Bu yazıyı silmek istediğinizden emin misiniz?")){const{error:s}=yield b.delete(e);s?alert("Silme işlemi başarısız: "+s.message):Es()}}),Us=e=>{ve(e),we(!0)},Fs=()=>{ve(null),we(!0)},Is=()=>{we(!1),ve(null),Es()},Ls=e=>new Date(e).toLocaleDateString("tr-TR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),Vs=e=>{const s={published:{color:"bg-green-100 text-green-800",text:"Yayında"},draft:{color:"bg-yellow-100 text-yellow-800",text:"Taslak"},pending:{color:"bg-orange-100 text-orange-800",text:"Onay Bekliyor"},rejected:{color:"bg-red-100 text-red-800",text:"Reddedildi"},archived:{color:"bg-gray-100 text-gray-800",text:"Arşiv"}},a=s[e]||s.draft;return u.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a.color}`,children:a.text})},qs=()=>c(null,null,function*(){cs(!0);try{if(!g)return console.error("❌ Service role key eksik!"),void alert("Admin işlemleri için service role key eksik!");const{data:e,error:s}=yield g.auth.admin.listUsers();if(s)return void console.error("❌ Editörler getirilemedi:",s);const a=e.users.filter(e=>{var s,a;const t=null==(s=e.user_metadata)?void 0:s.user_role,r="editor"===t||"yazar"===t||"supervisor"===t,l="test@test.com"!==e.email,i=!(null==(a=e.user_metadata)?void 0:a.editor_approved);return r&&l&&i});console.log("📋 Onay bekleyen editörler:",a.length),ns(a)}catch(e){console.error("❌ Editör fetch hatası:",e)}finally{cs(!1)}});return Ne?u.jsx(p.Suspense,{fallback:u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}),children:u.jsx(me,{post:fe,categories:B,onSave:Is,onCancel:()=>we(!1)})}):u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx("header",{className:"bg-white shadow-sm border-b",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex justify-between items-center h-16",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Panel"}),u.jsxs("p",{className:"text-gray-600",children:["Hoş geldin, ",null==s?void 0:s.email]})]}),u.jsxs("button",{onClick:Fs,className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[u.jsx(Y,{className:"h-4 w-4"}),u.jsx("span",{children:"Yeni Yazı"})]})]})})}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsx("div",{className:"mb-8",children:u.jsx("div",{className:"bg-gray-50 p-2 rounded-xl border border-gray-200 shadow-inner",children:u.jsx("div",{className:"flex overflow-x-auto scrollbar-hide space-x-2 sm:space-x-3 pb-2",children:[{id:"dashboard",name:"Dashboard",icon:z,short:"Panel"},{id:"posts",name:"Yazılar",icon:T,short:"Yazı"},{id:"pending",name:"Onay Bekleyen",icon:P,short:"Onay"},{id:"editorApproval",name:"Editör Onayı",icon:O,short:"Edit"},{id:"featuredWriters",name:"Öne Çıkan Yazarlar",icon:E,short:"Yazar"},{id:"categories",name:"Kategoriler",icon:$,short:"Kat"},{id:"tags",name:"Etiketler",icon:$,short:"Tag"},{id:"notifications",name:"Bildirimler",icon:R,short:"Bell"},{id:"profile",name:"Profil Ayarları",icon:D,short:"Prof"},{id:"videos",name:"YouTube Videos",icon:U,short:"Vid"},{id:"sitemap",name:"Site Haritası",icon:F,short:"Map"},{id:"cookieAnalytics",name:"Cookie Analytics",icon:I,short:"Ana"},{id:"cookieBusinessIntelligence",name:"Cookie Business Intelligence",icon:L,short:"BI"}].map(e=>{const s=e.icon;return u.jsxs("button",{onClick:()=>l(e.id),className:"flex flex-col items-center justify-center px-2 sm:px-3 py-2 rounded-lg font-medium transition-all duration-200 whitespace-nowrap text-xs shadow-sm border min-w-[50px] sm:min-w-[60px] "+(r===e.id||"tagForm"===r&&"tags"===e.id||"categoryForm"===r&&"categories"===e.id?"bg-gradient-to-r from-primary-500 to-primary-600 text-white border-primary-600 shadow-lg shadow-primary-500/30 transform scale-105":"bg-white text-gray-700 border-gray-200 hover:text-primary-600 hover:bg-primary-50 hover:border-primary-300 hover:shadow-md"),children:[u.jsx(s,{className:"h-4 w-4 mb-1"}),u.jsx("span",{className:"hidden lg:block text-[11px]",children:e.name}),u.jsx("span",{className:"lg:hidden text-[11px]",children:e.short})]},e.id)})})})}),"dashboard"===r&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Toplam Yazı"}),u.jsx("p",{className:"text-3xl font-bold text-gray-900",children:Ye.totalPosts})]}),u.jsx(T,{className:"h-8 w-8 text-blue-600"})]})}),u.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Yayında"}),u.jsx("p",{className:"text-3xl font-bold text-green-600",children:Ye.publishedPosts})]}),u.jsx(V,{className:"h-8 w-8 text-green-600"})]})}),u.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Taslak"}),u.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:Ye.draftPosts})]}),u.jsx(T,{className:"h-8 w-8 text-yellow-600"})]})}),u.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Toplam Görüntülenme"}),u.jsx("p",{className:"text-3xl font-bold text-purple-600",children:Ye.totalViews})]}),u.jsx(z,{className:"h-8 w-8 text-purple-600"})]})})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[u.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Son Yazılar"}),u.jsx("span",{className:"text-sm text-gray-500",children:"Son 5 yazı"})]}),he?u.jsxs("div",{className:"px-6 py-8 text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto mb-3"}),u.jsx("p",{className:"text-gray-500 text-sm",children:"Son yazılar yükleniyor..."})]}):0===i.length?u.jsxs("div",{className:"px-6 py-8 text-center",children:[u.jsx(T,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),u.jsx("p",{className:"text-gray-500 text-sm",children:"Henüz yazı eklenmemiş"}),u.jsx("button",{onClick:Fs,className:"mt-3 text-primary-600 hover:text-primary-700 text-sm font-medium",children:"İlk yazıyı ekle"})]}):u.jsx("div",{className:"divide-y divide-gray-200",children:i.sort((e,s)=>new Date(s.created_at)-new Date(e.created_at)).slice(0,5).map(e=>u.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),u.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[u.jsx("p",{className:"text-xs text-gray-500",children:Ls(e.created_at)}),u.jsx("span",{className:"text-gray-300",children:"•"}),u.jsx("p",{className:"text-xs text-gray-500",children:e.category_name||"Kategori yok"}),u.jsx("span",{className:"text-gray-300",children:"•"}),u.jsx("p",{className:"text-xs text-gray-500",children:e.author_name||"Yazar bilinmiyor"})]})]}),u.jsxs("div",{className:"flex items-center space-x-3 ml-4",children:[Vs(e.status),u.jsx("div",{className:"text-right",children:u.jsxs("p",{className:"text-xs text-gray-500",children:[e.views||0," görüntülenme"]})}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx("button",{onClick:()=>Us(e),className:"text-gray-400 hover:text-primary-600 transition-colors",title:"Düzenle",children:u.jsx(T,{className:"h-4 w-4"})}),u.jsx("button",{onClick:()=>Ds(e.id),className:"text-gray-400 hover:text-red-600 transition-colors",title:"Sil",children:u.jsx(q,{className:"h-4 w-4"})})]})]})]})},e.id))}),i.length>5&&u.jsx("div",{className:"px-6 py-3 bg-gray-50 border-t",children:u.jsxs("button",{onClick:()=>l("posts"),className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:["Tüm yazıları görüntüle (",i.length," yazı)"]})})]})]}),"posts"===r&&u.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[u.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Blog Yazıları"}),u.jsxs("button",{onClick:Fs,className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[u.jsx(Y,{className:"h-4 w-4"}),u.jsx("span",{children:"Yeni Yazı"})]})]}),he?u.jsxs("div",{className:"px-6 py-8 text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Yazılar yükleniyor..."})]}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Başlık"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kategori"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durum"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Görüntülenme"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tarih"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"İşlemler"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(e=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-gray-900 truncate max-w-xs",children:e.title}),u.jsxs("div",{className:"text-sm text-gray-500",children:[e.author_name," • ",e.read_time," dk okuma"]})]})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:"text-sm text-gray-900",children:e.category_name})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Vs(e.status)}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.views," • ",e.likes," beğeni"]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Ls(e.created_at)}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:u.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[u.jsx("button",{onClick:()=>Us(e),className:"text-primary-600 hover:text-primary-900",children:u.jsx(T,{className:"h-4 w-4"})}),u.jsx("button",{onClick:()=>Ds(e.id),className:"text-red-600 hover:text-red-900",children:u.jsx(q,{className:"h-4 w-4"})})]})})]},e.id))})]})})]}),"pending"===r&&u.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Onay Bekleyen Yazılar"}),u.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Editörler tarafından yayın için gönderilen yazılar"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("span",{className:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-medium",children:[v.length," yazı bekliyor"]}),u.jsx("button",{onClick:Bs,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Yenile",children:u.jsx(G,{className:"h-4 w-4"})})]})]}),pe?u.jsxs("div",{className:"px-6 py-8 text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Onay bekleyen yazılar yükleniyor..."})]}):0===v.length?u.jsxs("div",{className:"px-6 py-12 text-center",children:[u.jsx(P,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),u.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Onay bekleyen yazı yok"}),u.jsx("p",{className:"text-gray-500",children:"Editörler yazı gönderdiğinde burada görünecek"})]}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Yazı"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Yazar"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kategori"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gönderilme Tarihi"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"İşlemler"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(e=>{var s;return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex items-start space-x-3",children:[e.featured_image_url&&u.jsx("img",{src:e.featured_image_url,alt:e.title,className:"w-16 h-12 object-cover rounded-lg flex-shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h4",{className:"text-sm font-medium text-gray-900 line-clamp-2",children:e.title}),e.excerpt&&u.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:e.excerpt})]})]})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("div",{className:"text-sm text-gray-900",children:e.author_name||"Bilinmeyen"})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:(null==(s=e.categories)?void 0:s.name)||"Kategori yok"})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Ls(e.created_at)}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("button",{onClick:()=>{return s=e.id,c(null,null,function*(){try{const{error:e}=yield x.from("posts").update({status:"published"}).eq("id",s);e?alert("Onay işlemi başarısız: "+e.message):(console.log("✅ Yazı onaylandı:",s),Bs(),Es(),Ks())}catch(e){alert("Onay işlemi başarısız: "+e.message)}});var s},className:"bg-green-600 text-white px-3 py-1.5 rounded-md hover:bg-green-700 transition-colors text-sm font-medium flex items-center space-x-1",title:"Yazıyı Onayla ve Yayınla",children:[u.jsx(V,{className:"h-3 w-3"}),u.jsx("span",{children:"Onayla"})]}),u.jsxs("button",{onClick:()=>{return s=e.id,c(null,null,function*(){if(window.confirm("Bu yazıyı reddetmek istediğinizden emin misiniz?"))try{const{error:e}=yield x.from("posts").update({status:"rejected"}).eq("id",s);e?alert("Red işlemi başarısız: "+e.message):(console.log("❌ Yazı reddedildi:",s),Bs(),Ks())}catch(e){alert("Red işlemi başarısız: "+e.message)}});var s},className:"bg-red-600 text-white px-3 py-1.5 rounded-md hover:bg-red-700 transition-colors text-sm font-medium flex items-center space-x-1",title:"Yazıyı Reddet",children:[u.jsx(H,{className:"h-3 w-3"}),u.jsx("span",{children:"Reddet"})]}),u.jsx("button",{onClick:()=>Us(e),className:"text-gray-600 hover:text-blue-600 transition-colors p-1",title:"Önizle/Düzenle",children:u.jsx(T,{className:"h-4 w-4"})})]})})]},e.id)})})]})})]}),"editorApproval"===r&&u.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Editör Onayı"}),u.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Editör/Süpervizör olarak kayıt olan kullanıcıları onaylayın"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("span",{className:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-medium",children:[is.length," onay bekleyen"]}),u.jsx("button",{onClick:qs,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Yenile",children:u.jsx(G,{className:"h-4 w-4"})}),u.jsx("button",{onClick:()=>c(null,null,function*(){try{if(!g)return void alert("Service role key eksik!");const{data:e}=yield g.auth.admin.listUsers(),s=e.users.find(e=>"birsurvivorgeyigi@gmail.com"===e.email);if(s){const{error:e}=yield g.auth.admin.updateUserById(s.id,{user_metadata:{user_role:"yazar",editor_approved:!1,full_name:"birsurvivorgeyigi",author_name:"JoinEscapes"}});e?alert("Hata: "+e.message):(console.log("✅ Test kullanıcı metadata güncellendi"),alert("birsurvivorgeyigi@gmail.com kullanıcısının metadata'sı güncellendi!"),qs())}else alert("Kullanıcı bulunamadı!")}catch(e){alert("Hata: "+e.message)}}),className:"bg-blue-600 text-white px-3 py-1 rounded-md hover:bg-blue-700 transition-colors text-sm",title:"Test kullanıcısını onay bekleyen yap",children:"Test Hazırla"})]})]}),ds?u.jsxs("div",{className:"px-6 py-8 text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Onay bekleyen editörler yükleniyor..."})]}):0===is.length?u.jsxs("div",{className:"px-6 py-12 text-center",children:[u.jsx(O,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),u.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Onay bekleyen editör yok"}),u.jsx("p",{className:"text-gray-500",children:"Yeni editör/süpervizör kayıt olduğunda burada görünecek"})]}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kullanıcı"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kayıt Tarihi"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email Durumu"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"İşlemler"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:is.map(e=>{var a,t,r,l,i,n,d;return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:u.jsx(D,{className:"h-5 w-5 text-gray-500"})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-gray-900",children:(null==(a=e.user_metadata)?void 0:a.full_name)||(null==(t=e.email)?void 0:t.split("@")[0])}),u.jsx("div",{className:"text-sm text-gray-500",children:e.email})]})]})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+("supervisor"===(null==(r=e.user_metadata)?void 0:r.user_role)?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:"supervisor"===(null==(l=e.user_metadata)?void 0:l.user_role)?"Süpervizör":"editor"===(null==(i=e.user_metadata)?void 0:i.user_role)||"yazar"===(null==(n=e.user_metadata)?void 0:n.user_role)?"Editör":(null==(d=e.user_metadata)?void 0:d.user_role)||"Bilinmeyen"})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Ls(e.created_at)}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+(e.email_confirmed_at?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.email_confirmed_at?"Doğrulanmış":"Bekliyor"})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("button",{onClick:()=>{return a=e.id,t=e.email,c(null,null,function*(){if(window.confirm(`${t} adresli kullanıcıyı editör olarak onaylamak istediğinizden emin misiniz?`))try{console.log("🔄 Editör onaylanıyor:",{userId:a,email:t});const{data:e,error:r}=yield x.rpc("approve_editor_admin",{p_user_id:a,p_approved_by:(null==s?void 0:s.email)||"admin@joinescapes.com"});if(r)return console.error("❌ RPC fonksiyon hatası:",r),void alert("Editör onaylama hatası: "+r.message);e&&e.success?(console.log("✅ Editör onaylandı:",t),qs(),As(),alert(`${t} adresli kullanıcı başarıyla editör olarak onaylandı ve profil oluşturuldu!`)):alert("Onay işlemi başarısız: "+((null==e?void 0:e.message)||"Bilinmeyen hata"))}catch(e){console.error("❌ Editör onaylama hatası:",e),alert("Onay işlemi başarısız: "+e.message)}});var a,t},className:"bg-green-600 text-white px-3 py-1.5 rounded-md hover:bg-green-700 transition-colors text-sm font-medium flex items-center space-x-1",title:"Editörü Onayla",children:[u.jsx(M,{className:"h-3 w-3"}),u.jsx("span",{children:"Onayla"})]}),u.jsxs("button",{onClick:()=>{return s=e.id,a=e.email,c(null,null,function*(){if(window.confirm(`${a} adresli kullanıcıyı reddetmek istediğinizden emin misiniz?`))try{const{error:e}=yield g.auth.admin.deleteUser(s);e?alert("Red işlemi başarısız: "+e.message):(console.log("❌ Editör reddedildi:",a),qs(),alert(`${a} adresli kullanıcı reddedildi ve hesabı silindi.`))}catch(e){alert("Red işlemi başarısız: "+e.message)}});var s,a},className:"bg-red-600 text-white px-3 py-1.5 rounded-md hover:bg-red-700 transition-colors text-sm font-medium flex items-center space-x-1",title:"Editörü Reddet",children:[u.jsx(J,{className:"h-3 w-3"}),u.jsx("span",{children:"Reddet"})]})]})})]},e.id)})})]})})]}),"featuredWriters"===r&&u.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Öne Çıkan Yazarlar"}),u.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Ana sayfada görünecek yazarları yönetin"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:[rs.length," öne çıkan yazar"]}),u.jsx("button",{onClick:As,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Yenile",children:u.jsx(G,{className:"h-4 w-4"})})]})]}),xs?u.jsxs("div",{className:"px-6 py-8 text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Yazarlar yükleniyor..."})]}):0===os.length?u.jsxs("div",{className:"px-6 py-12 text-center",children:[u.jsx(E,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),u.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Henüz yazar yok"}),u.jsx("p",{className:"text-gray-500",children:"Yazarlar kayıt olduğunda burada görünecek"})]}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Yazar"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Başlık"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kayıt Tarihi"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durum"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"İşlemler"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:os.map(e=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[e.profile_image?u.jsx("img",{src:e.profile_image,alt:e.name,className:"w-12 h-12 object-cover rounded-full flex-shrink-0"}):u.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:u.jsx("span",{className:"text-white font-semibold text-lg",children:e.name?e.name.charAt(0).toUpperCase():"?"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h4",{className:"text-sm font-medium text-gray-900",children:e.name}),e.location&&u.jsx("p",{className:"text-sm text-gray-500",children:e.location})]})]})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("div",{className:"text-sm text-gray-900",children:e.title||"Başlık belirtilmemiş"})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString("tr-TR")}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.is_featured?u.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[u.jsx(X,{className:"w-3 h-3 mr-1"}),"Öne Çıkan"]}):u.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Normal"})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:u.jsx("button",{onClick:()=>{return s=e.id,a=e.is_featured,c(null,null,function*(){try{const{error:e}=yield x.from("writer_profiles").update({is_featured:!a}).eq("id",s);e?alert("İşlem başarısız: "+e.message):(console.log("✅ Yazar öne çıkarma durumu güncellendi:",s),As())}catch(e){alert("İşlem başarısız: "+e.message)}});var s,a},className:"inline-flex items-center px-3 py-1 rounded-md text-sm font-medium transition-colors "+(e.is_featured?"bg-red-100 text-red-700 hover:bg-red-200":"bg-blue-100 text-blue-700 hover:bg-blue-200"),children:e.is_featured?u.jsxs(u.Fragment,{children:[u.jsx(H,{className:"w-3 h-3 mr-1"}),"Kaldır"]}):u.jsxs(u.Fragment,{children:[u.jsx(X,{className:"w-3 h-3 mr-1"}),"Öne Çıkar"]})})})]},e.id))})]})})]}),"categories"===r&&u.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[u.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Kategoriler"}),u.jsxs("button",{onClick:$s,className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[u.jsx(Y,{className:"h-4 w-4"}),u.jsx("span",{children:"Yeni Kategori"})]})]}),Be?u.jsxs("div",{className:"px-6 py-8 text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Kategoriler yükleniyor..."})]}):u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-6",children:[B.map(e=>u.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),u.jsx("h4",{className:"font-medium text-gray-900",children:e.name})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx("button",{onClick:()=>(e=>{Ee(e),Ss({name:e.name,description:e.description||"",color:e.color||"#3B82F6"}),l("categoryForm")})(e),className:"text-primary-600 hover:text-primary-900 p-1",children:u.jsx(T,{className:"h-4 w-4"})}),u.jsx("button",{onClick:()=>{return s=e.id,c(null,null,function*(){if(window.confirm("Bu kategoriyi silmek istediğinizden emin misiniz? Bu kategoriye ait yazılar da etkilenebilir.")){const{error:e}=yield j.delete(s);e?alert("Silme işlemi başarısız: "+e.message):(Ps(),Es())}});var s},className:"text-red-600 hover:text-red-900 p-1",children:u.jsx(q,{className:"h-4 w-4"})})]})]}),u.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description||"Açıklama bulunmuyor"}),u.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[u.jsxs("span",{children:["Slug: ",e.slug]}),u.jsxs("span",{children:["ID: ",e.id]})]})]},e.id)),0===B.length&&u.jsxs("div",{className:"col-span-full text-center py-8",children:[u.jsx($,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-500",children:"Henüz kategori eklenmemiş"}),u.jsx("button",{onClick:$s,className:"mt-4 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors",children:"İlk Kategoriyi Ekle"})]})]})]}),"tags"===r&&u.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[u.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Etiketler"}),u.jsxs("button",{onClick:Ts,className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[u.jsx(Y,{className:"h-4 w-4"}),u.jsx("span",{children:"Yeni Etiket"})]})]}),je?u.jsxs("div",{className:"px-6 py-8 text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Etiketler yükleniyor..."})]}):u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-6",children:[xe.map(e=>u.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),u.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),e.is_featured&&u.jsx("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:"⭐ Öne Çıkan"})]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx("button",{onClick:()=>(e=>{Se(e),_s({name:e.name,description:e.description||"",color:e.color||"#3B82F6",is_featured:e.is_featured||!1}),l("tagForm")})(e),className:"text-primary-600 hover:text-primary-900 p-1",children:u.jsx(T,{className:"h-4 w-4"})}),u.jsx("button",{onClick:()=>{return s=e.id,c(null,null,function*(){if(window.confirm("Bu etiketi silmek istediğinizden emin misiniz?")){const{error:e}=yield f.delete(s);e?alert("Silme işlemi başarısız: "+e.message):Ys()}});var s},className:"text-red-600 hover:text-red-900 p-1",children:u.jsx(q,{className:"h-4 w-4"})})]})]}),u.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description||"Açıklama bulunmuyor"}),u.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[u.jsxs("span",{children:["Slug: ",e.slug]}),u.jsxs("span",{children:["Kullanım: ",e.usage_count||0]})]})]},e.id)),0===xe.length&&u.jsxs("div",{className:"col-span-full text-center py-8",children:[u.jsx($,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-500",children:"Henüz etiket eklenmemiş"}),u.jsx("button",{onClick:Ts,className:"mt-4 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors",children:"İlk Etiketi Ekle"})]})]})]}),"tagForm"===r&&u.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[u.jsx("h3",{className:"text-lg font-medium text-gray-900",children:ze?"Etiket Düzenle":"Yeni Etiket Ekle"}),u.jsx("button",{onClick:()=>l("tags"),className:"text-gray-600 hover:text-gray-900",children:u.jsx(H,{className:"h-5 w-5"})})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Etiket Adı *"}),u.jsx("input",{type:"text",value:ks.name,onChange:e=>Os("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Örn: Öneri",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Açıklama"}),u.jsx("textarea",{value:ks.description,onChange:e=>Os("description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Etiket hakkında kısa açıklama"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Renk"}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("input",{type:"color",value:ks.color,onChange:e=>Os("color",e.target.value),className:"w-12 h-10 border border-gray-300 rounded cursor-pointer"}),u.jsx("input",{type:"text",value:ks.color,onChange:e=>Os("color",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"#3B82F6"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"inline-block w-8 h-8 rounded-full border",style:{backgroundColor:ks.color}}),u.jsx("span",{className:"text-sm text-gray-500",children:"Önizleme"})]})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center space-x-3",children:[u.jsx("input",{type:"checkbox",checked:ks.is_featured,onChange:e=>Os("is_featured",e.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),u.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Öne Çıkan Etiket"})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-7",children:"Öne çıkan etiketler admin panelinde öncelikli gösterilir"})]}),ks.name&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Önizleme"}),u.jsx("div",{className:"flex items-center space-x-2",children:u.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm text-white",style:{backgroundColor:ks.color},children:[ks.name,ks.is_featured&&u.jsx("span",{className:"ml-1",children:"⭐"})]})})]}),u.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[u.jsx("button",{onClick:()=>l("tags"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"İptal"}),u.jsxs("button",{onClick:()=>c(null,null,function*(){if(ks.name.trim())try{let e;if(ze?(console.log("🔄 Etiket güncelleniyor:",ze.id),e=yield f.update(ze.id,ks)):(console.log("🆕 Yeni etiket oluşturuluyor..."),e=yield f.create(ks)),e.error)throw console.error("❌ Etiket işlemi hatası:",e.error),new Error(e.error.message);console.log("✅ Etiket işlemi başarılı!"),alert(ze?"Etiket güncellendi!":"Etiket oluşturuldu!"),l("tags"),Ys()}catch(e){console.error("❌ Etiket işlemi hatası:",e),alert("İşlem başarısız: "+e.message)}else alert("Etiket adı gereklidir")}),className:"px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[u.jsx(Z,{className:"h-4 w-4"}),u.jsx("span",{children:ze?"Güncelle":"Kaydet"})]})]})]})]}),"categoryForm"===r&&u.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[u.jsx("h3",{className:"text-lg font-medium text-gray-900",children:Ce?"Kategori Düzenle":"Yeni Kategori Ekle"}),u.jsx("button",{onClick:()=>l("categories"),className:"text-gray-600 hover:text-gray-900",children:u.jsx(H,{className:"h-5 w-5"})})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kategori Adı *"}),u.jsx("input",{type:"text",value:zs.name,onChange:e=>Rs("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Örn: Turizm Gündemi",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Açıklama"}),u.jsx("textarea",{value:zs.description,onChange:e=>Rs("description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Kategori hakkında kısa açıklama"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Renk"}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("input",{type:"color",value:zs.color,onChange:e=>Rs("color",e.target.value),className:"w-12 h-10 border border-gray-300 rounded cursor-pointer"}),u.jsx("input",{type:"text",value:zs.color,onChange:e=>Rs("color",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"#3B82F6"}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"inline-block w-8 h-8 rounded-full border",style:{backgroundColor:zs.color}}),u.jsx("span",{className:"text-sm text-gray-500",children:"Önizleme"})]})]})]}),zs.name&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Önizleme"}),u.jsx("div",{className:"flex items-center space-x-2",children:u.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm text-white",style:{backgroundColor:zs.color},children:zs.name})})]}),u.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[u.jsx("button",{onClick:()=>l("categories"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"İptal"}),u.jsxs("button",{onClick:()=>c(null,null,function*(){if(zs.name.trim())try{let e;if(Ce?(console.log("🔄 Kategori güncelleniyor:",Ce.id),e=yield j.update(Ce.id,zs)):(console.log("🆕 Yeni kategori oluşturuluyor..."),e=yield j.create(zs)),e.error)throw console.error("❌ Kategori işlemi hatası:",e.error),new Error(e.error.message);console.log("✅ Kategori işlemi başarılı!"),alert(Ce?"Kategori güncellendi!":"Kategori oluşturuldu!"),l("categories"),Ps()}catch(e){console.error("❌ Kategori işlemi hatası:",e),alert("İşlem başarısız: "+e.message)}else alert("Kategori adı gereklidir")}),className:"px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[u.jsx(Z,{className:"h-4 w-4"}),u.jsx("span",{children:Ce?"Güncelle":"Kaydet"})]})]})]})]}),"cookieAnalytics"===r&&u.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[u.jsx("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:u.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Cookie Analytics"})}),u.jsx("div",{className:"p-6 space-y-6",children:u.jsx(de,{})})]}),"cookieBusinessIntelligence"===r&&u.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[u.jsx("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:u.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Cookie Business Intelligence"})}),u.jsx("div",{className:"p-6 space-y-6",children:u.jsx(ce,{})})]}),"sitemap"===r&&u.jsx("div",{className:"space-y-6",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[u.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Site Haritası Yönetimi"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Dinamik XML sitemap oluşturun ve yönetin"})]}),u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Sitemap Oluştur"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Tüm sayfalarınızı, blog yazılarınızı ve kategorilerinizi içeren dinamik XML sitemap oluşturun."}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:()=>c(null,null,function*(){Je(!0),Ze(!1);try{const s=yield c(null,null,function*(){try{const[e,s,a]=yield Promise.all([le(),ie(),ne()]),t=(new Date).toISOString().split("T")[0];let r=[];return re.forEach(e=>{r.push({url:`${te}${e.url}`,lastmod:t,changefreq:e.changefreq,priority:e.priority,section:e.section})}),e.forEach(e=>{r.push({url:`${te}/kategori/${e.slug}`,lastmod:t,changefreq:"weekly",priority:.7,section:"Kategori Arşivleri"})}),s.forEach(e=>{r.push({url:`${te}/etiket/${e.slug}`,lastmod:t,changefreq:"weekly",priority:.6,section:"Etiket Sayfaları"})}),a.forEach(e=>{const s=e.published_at?new Date(e.published_at).toISOString().split("T")[0]:t;r.push({url:`${te}/${e.category_slug}/${e.slug}`,lastmod:s,changefreq:"monthly",priority:.6,section:"Blog Yazıları"})}),{xml:`<?xml version="1.0" encoding="UTF-8"?>\n<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">\n${r.map(e=>`  <url>\n    <loc>${e.url}</loc>\n    <lastmod>${e.lastmod}</lastmod>\n    <changefreq>${e.changefreq}</changefreq>\n    <priority>${e.priority}</priority>\n  </url>`).join("\n")}\n</urlset>`,urls:r,stats:{total:r.length,sections:{"Ana Sayfalar":r.filter(e=>"Ana Sayfalar"===e.section).length,"Kategori Sayfaları":r.filter(e=>"Kategori Sayfaları"===e.section).length,"Kategori Arşivleri":r.filter(e=>"Kategori Arşivleri"===e.section).length,"Etiket Sayfaları":r.filter(e=>"Etiket Sayfaları"===e.section).length,"Blog Yazıları":r.filter(e=>"Blog Yazıları"===e.section).length,"Statik Sayfalar":r.filter(e=>"Statik Sayfalar"===e.section).length}}}}catch(e){throw console.error("Sitemap oluşturma hatası:",e),e}});ws(s.xml),Ze(!0);try{const e=new Blob([s.xml],{type:"application/xml"}),a=URL.createObjectURL(e),t=document.createElement("a");t.href=a,t.download="sitemap.xml",t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(a);const r=yield c(null,null,function*(){try{const[e,s,a]=yield Promise.all([le(),ie(),ne()]),t=(new Date).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"}),r=re.filter(e=>"Ana Sayfalar"===e.section),l=re.filter(e=>"Kategori Sayfaları"===e.section),i=re.filter(e=>"Statik Sayfalar"===e.section);return`<!DOCTYPE html>\n<html lang="tr">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Site Haritası - JoinEscapes</title>\n    <style>\n        * { margin: 0; padding: 0; box-sizing: border-box; }\n        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; color: #333; background: #f8f9fa; }\n        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }\n        .header { text-align: center; margin-bottom: 40px; padding: 40px 0; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n        .header h1 { color: #2c3e50; font-size: 2.5em; margin-bottom: 10px; }\n        .header p { color: #7f8c8d; font-size: 1.1em; }\n        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 40px; }\n        .stat-card { background: white; padding: 20px; border-radius: 10px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n        .stat-number { font-size: 2em; font-weight: bold; color: #3498db; }\n        .stat-label { color: #7f8c8d; margin-top: 5px; }\n        .sitemap-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 30px; }\n        .section { background: white; border-radius: 10px; padding: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n        .section h2 { color: #2c3e50; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid #3498db; }\n        .section ul { list-style: none; }\n        .section li { margin-bottom: 8px; }\n        .section a { color: #3498db; text-decoration: none; padding: 5px 0; display: block; transition: color 0.3s; }\n        .section a:hover { color: #2980b9; text-decoration: underline; }\n        .footer { text-align: center; margin-top: 40px; padding: 20px; color: #7f8c8d; background: white; border-radius: 10px; }\n    </style>\n</head>\n<body>\n    <div class="container">\n        <div class="header">\n            <h1>🗺️ Site Haritası</h1>\n            <p>JoinEscapes sitesinin tüm sayfalarına buradan ulaşabilirsiniz</p>\n        </div>\n        \n        <div class="stats">\n            <div class="stat-card">\n                <div class="stat-number">${r.length}</div>\n                <div class="stat-label">Ana Sayfalar</div>\n            </div>\n            <div class="stat-card">\n                <div class="stat-number">${l.length}</div>\n                <div class="stat-label">Kategori Sayfaları</div>\n            </div>\n            <div class="stat-card">\n                <div class="stat-number">${e.length}</div>\n                <div class="stat-label">Kategori Arşivleri</div>\n            </div>\n            <div class="stat-card">\n                <div class="stat-number">${s.length}</div>\n                <div class="stat-label">Etiket Sayfaları</div>\n            </div>\n            <div class="stat-card">\n                <div class="stat-number">${a.length}</div>\n                <div class="stat-label">Blog Yazıları</div>\n            </div>\n            <div class="stat-card">\n                <div class="stat-number">${i.length}</div>\n                <div class="stat-label">Statik Sayfalar</div>\n            </div>\n        </div>\n        \n        <div class="sitemap-grid">\n            <div class="section">\n                <h2>📍 Ana Sayfalar</h2>\n                <ul>\n                    ${r.map(e=>`<li><a href="${e.url||"/"}">${""===e.url?"Ana Sayfa":e.url.replace("/","").replace("-"," ").toUpperCase()}</a></li>`).join("")}\n                </ul>\n            </div>\n            \n            <div class="section">\n                <h2>📂 Kategori Sayfaları</h2>\n                <ul>\n                    ${l.map(e=>`<li><a href="${e.url}">${e.url.replace("/","").replace("-"," ").toUpperCase()}</a></li>`).join("")}\n                </ul>\n            </div>\n            \n            <div class="section">\n                <h2>🗂️ Kategori Arşivleri</h2>\n                <ul>\n                    ${e.map(e=>`<li><a href="/kategori/${e.slug}">${e.name}</a></li>`).join("")}\n                </ul>\n            </div>\n            \n            <div class="section">\n                <h2>🏷️ Etiket Sayfaları</h2>\n                <ul>\n                    ${s.map(e=>`<li><a href="/etiket/${e.slug}">${e.name}</a></li>`).join("")}\n                </ul>\n            </div>\n            \n            <div class="section">\n                <h2>📝 Blog Yazıları</h2>\n                <ul>\n                    ${a.slice(0,50).map(e=>`<li><a href="/${e.category_slug}/${e.slug}">${e.title}</a></li>`).join("")}\n                    ${a.length>50?`<li><em>... ve ${a.length-50} yazı daha</em></li>`:""}\n                </ul>\n            </div>\n            \n            <div class="section">\n                <h2>📄 Statik Sayfalar</h2>\n                <ul>\n                    ${i.map(e=>`<li><a href="${e.url}">${e.url.replace("/","").replace("-"," ").toUpperCase()}</a></li>`).join("")}\n                </ul>\n            </div>\n        </div>\n        \n        <div class="footer">\n            <p>Son güncelleme: ${t}</p>\n            <p>Toplam ${r.length+l.length+e.length+s.length+a.length+i.length} sayfa</p>\n        </div>\n    </div>\n</body>\n</html>`}catch(e){throw console.error("HTML sitemap oluşturma hatası:",e),e}}),l=new Blob([r],{type:"text/html"}),i=URL.createObjectURL(l),n=document.createElement("a");n.href=i,n.download="sitemap.html",n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(i),alert("✅ Sitemap başarıyla oluşturuldu ve kaydedildi!\n\n📁 Dosyalar:\n- sitemap.xml\n- sitemap.html\n\n💡 Bu dosyaları public klasörüne kopyalayın.")}catch(e){console.warn("Sitemap kaydetme uyarısı:",e),alert("⚠️ Sitemap oluşturuldu ama kaydedilemedi. Manuel olarak indirin.")}}catch(s){console.error("Sitemap oluşturma hatası:",s),alert("Sitemap oluşturulurken hata oluştu: "+s.message)}finally{Je(!1)}}),disabled:Me,className:"w-full bg-primary-600 text-white px-4 py-3 rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:Me?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),u.jsx("span",{children:"Oluşturuluyor..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(G,{className:"h-4 w-4"}),u.jsx("span",{children:"Sitemap Oluştur"})]})}),Xe&&u.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[u.jsxs("button",{onClick:()=>{if(!Ns)return;const e=new Blob([Ns],{type:"application/xml"}),s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download="sitemap.xml",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},className:"bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-1",children:[u.jsx(S,{className:"h-4 w-4"}),u.jsx("span",{children:"İndir"})]}),u.jsxs("button",{onClick:()=>c(null,null,function*(){var e,s;if(Ns)try{yield(e=Ns,c(null,null,function*(){try{if("undefined"==typeof window){const s=yield o(()=>import("./__vite-browser-external-FmFgRqLi.js"),[]),a=yield o(()=>import("./__vite-browser-external-FmFgRqLi.js"),[]);s.writeFileSync(a.join(process.cwd(),"sitemap.xml"),e),s.writeFileSync(a.join(process.cwd(),"public","sitemap.xml"),e)}else{const a=yield fetch("/api/save-sitemap",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({xml:e,html:s})});if(!a.ok)throw new Error("Sitemap kaydedilemedi");const t=yield a.json();console.log("Sitemap kaydedildi:",t)}return{success:!0}}catch(a){throw console.error("Sitemap kaydetme hatası:",a),a}})),alert("Sitemap başarıyla kaydedildi!")}catch(a){console.error("Sitemap kaydetme hatası:",a),alert("Sitemap kaydedilirken hata oluştu: "+a.message)}else alert("Önce sitemap oluşturun")}),className:"bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-1",children:[u.jsx(Z,{className:"h-4 w-4"}),u.jsx("span",{children:"Kaydet"})]}),u.jsxs("a",{href:"/sitemap.html",target:"_blank",rel:"noopener noreferrer",className:"bg-orange-600 text-white px-3 py-2 rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center space-x-1",children:[u.jsx(W,{className:"h-4 w-4"}),u.jsx("span",{children:"HTML"})]})]})]})]}),Xe&&u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Sitemap Bilgileri"}),u.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"XML Boyutu:"}),u.jsxs("span",{children:[(Ns.length/1024).toFixed(2)," KB"]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Toplam URL:"}),u.jsx("span",{children:(Ns.match(/<url>/g)||[]).length})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Oluşturulma:"}),u.jsx("span",{children:(new Date).toLocaleString("tr-TR")})]})]}),u.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:u.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"font-medium text-blue-600",children:"📍 Ana"}),u.jsx("div",{children:"3"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"font-medium text-green-600",children:"🏷️ Kategori"}),u.jsx("div",{children:"12"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"font-medium text-purple-600",children:"📝 Post"}),u.jsx("div",{children:Ns?(Ns.match(/\/[^/]+\/[^/]+<\/loc>/g)||[]).length:"20"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"font-medium text-orange-600",children:"🏷️ Etiket"}),u.jsx("div",{children:"3"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"font-medium text-gray-600",children:"📄 Statik"}),u.jsx("div",{children:"5"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"font-medium text-red-600",children:"🌐 HTML"}),u.jsx("div",{children:"✓"})]})]})})]})]}),u.jsx("div",{className:"space-y-4",children:u.jsxs("div",{children:[u.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Sitemap Önizleme"}),Xe?u.jsx("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg text-xs font-mono max-h-96 overflow-y-auto",children:u.jsx("pre",{children:Ns})}):u.jsxs("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[u.jsx(F,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-500",children:"Sitemap oluşturun ve önizlemeyi görün"})]})]})})]}),u.jsxs("div",{className:"mt-8 bg-blue-50 rounded-lg p-4",children:[u.jsx("h5",{className:"font-medium text-blue-900 mb-2",children:"📋 Sitemap Yönergeleri"}),u.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[u.jsxs("li",{children:["• ",u.jsx("strong",{children:"XML Sitemap:"})," Arama motorları için optimizasyonu (Google, Bing)"]}),u.jsxs("li",{children:["• ",u.jsx("strong",{children:"HTML Sitemap:"})," Ziyaretçiler için düzenli site haritası"]}),u.jsx("li",{children:"• Otomatik olarak tüm sayfalar, kategoriler, etiketler ve blog yazıları dahil edilir"}),u.jsx("li",{children:"• Sitemap'i oluşturduktan sonra sunucuya kaydetmeyi unutmayın"}),u.jsxs("li",{children:["• Google Search Console'a ",u.jsx("code",{children:"sitemap.xml"})," URL'sini ekleyin"]}),u.jsx("li",{children:"• Yeni içerik ekledikçe sitemap'i düzenli olarak güncelleyin"})]})]})]})]})}),"videos"===r&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:u.jsx(U,{className:"h-6 w-6 text-red-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"YouTube Video Yönetimi"}),u.jsx("p",{className:"text-gray-600",children:"Ana sayfada gösterilecek YouTube videolarını yönetin"})]})]}),u.jsxs("div",{className:"text-sm text-gray-500",children:["Toplam ",Oe.length," video"]})]}),u.jsx("div",{className:"border-t pt-4",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"YouTube Video URL'si"}),u.jsx("input",{type:"url",value:Re,onChange:e=>De(e.target.value),placeholder:"https://www.youtube.com/watch?v=... veya https://youtu.be/...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",disabled:Ie}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"YouTube video URL'sini yapıştırın. Video başlığı otomatik çekilecek."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Video Açıklaması (İsteğe Bağlı)"}),u.jsx("textarea",{value:Ue,onChange:e=>Fe(e.target.value),placeholder:"Video hakkında kısa açıklama yazın...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",disabled:Ie}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Boş bırakılırsa video başlığı açıklama olarak kullanılacak."})]}),u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{onClick:()=>c(null,null,function*(){const e=ee.checkCriticalEndpoint("add-video");if(!e.allowed)return void alert(e.message);const s=se.validateYouTubeUrl(Re);if(!s.isValid)return void alert("Hata: "+s.errors.join(", "));const a=se.validateText(Ue,{maxLength:500,allowHtml:!1,allowSpecialChars:!0});if(a.isValid){Le(!0);try{const e=w(s.sanitized);if(!e)throw new Error("Geçerli bir YouTube URL'si giriniz");const t=yield k(e),r=a.sanitized||t.title||"Video açıklaması mevcut değil",l=d(n({},t),{description:r}),{data:i,error:c}=yield _.add(l);if(c)throw new Error(c.message||"Video eklenirken hata oluştu");$e([i,...Oe]),De(""),Fe(""),window.dispatchEvent(new CustomEvent("youtube-videos-updated")),alert("✅ Video başarıyla eklendi!")}catch(t){alert("❌ Video eklenirken hata: "+t.message)}finally{Le(!1)}}else alert("Açıklama hatası: "+a.errors.join(", "))}),disabled:Ie||!Re.trim(),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:Ie?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),u.jsx("span",{children:"Ekleniyor..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(Y,{className:"h-4 w-4"}),u.jsx("span",{children:"Video Ekle"})]})})})]})})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[u.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Video Listesi"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Ana sayfada görüntülenecek videolar (sıraya göre)"})]}),0===Oe.length?u.jsxs("div",{className:"px-6 py-12 text-center",children:[u.jsx(U,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-500",children:"Henüz video eklenmemiş"}),u.jsx("p",{className:"text-sm text-gray-400",children:"YouTube video URL'si ekleyerek başlayın"})]}):u.jsx("div",{className:"divide-y divide-gray-200",children:Oe.map((e,s)=>u.jsx("div",{className:"px-6 py-4 hover:bg-gray-50",children:u.jsxs("div",{className:"flex items-start space-x-4",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsxs("div",{className:"w-32 h-20 bg-gray-200 rounded-lg overflow-hidden relative",children:[u.jsx("img",{src:`https://img.youtube.com/vi/${e.video_id}/mqdefault.webp`,alt:e.title,className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center",children:u.jsx(Q,{className:"h-6 w-6 text-white"})})]})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h5",{className:"text-lg font-medium text-gray-900 truncate",children:e.title}),u.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:e.description}),u.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[u.jsxs("span",{children:["#",e.display_order+1]}),u.jsx("span",{children:e.channel_name}),u.jsx("span",{children:e.views_count}),u.jsx("span",{children:e.upload_date})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("a",{href:`https://www.youtube.com/watch?v=${e.video_id}`,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-gray-600",title:"YouTube'da aç",children:u.jsx(W,{className:"h-4 w-4"})}),u.jsx("button",{onClick:()=>(e=>{qe(e),He(!0)})(e),className:"text-gray-400 hover:text-blue-600",title:"Düzenle",children:u.jsx(T,{className:"h-4 w-4"})}),u.jsx("button",{onClick:()=>{return s=e.id,c(null,null,function*(){if(window.confirm("Bu videoyu silmek istediğinizden emin misiniz?"))try{const{error:e}=yield _.delete(s);if(e)throw new Error(e.message||"Video silinirken hata oluştu");$e(Oe.filter(e=>e.id!==s)),window.dispatchEvent(new CustomEvent("youtube-videos-updated")),alert("Video başarıyla silindi!")}catch(e){alert("Video silinirken hata: "+e.message)}});var s},className:"text-gray-400 hover:text-red-600",title:"Sil",children:u.jsx(q,{className:"h-4 w-4"})})]})]})},e.id))})]}),Ge&&Ve&&u.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:u.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[u.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75"}),u.jsxs("div",{className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Video Düzenle"}),u.jsx("button",{onClick:()=>He(!1),className:"text-gray-400 hover:text-gray-600",children:u.jsx(H,{className:"h-5 w-5"})})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Video Başlığı"}),u.jsx("input",{type:"text",defaultValue:Ve.title,onChange:e=>qe(d(n({},Ve),{title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Açıklama"}),u.jsx("textarea",{rows:3,defaultValue:Ve.description,onChange:e=>qe(d(n({},Ve),{description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Görüntülenme"}),u.jsx("input",{type:"text",defaultValue:Ve.views_count,onChange:e=>qe(d(n({},Ve),{views_count:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tarih"}),u.jsx("input",{type:"text",defaultValue:Ve.upload_date,onChange:e=>qe(d(n({},Ve),{upload_date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"})]})]})]}),u.jsxs("div",{className:"flex space-x-3 mt-6",children:[u.jsx("button",{onClick:()=>{return e=Ve.id,s=Ve,c(null,null,function*(){try{const{data:a,error:t}=yield _.update(e,s);if(t)throw new Error(t.message||"Video güncellenirken hata oluştu");$e(Oe.map(s=>s.id===e?a:s)),He(!1),qe(null),window.dispatchEvent(new CustomEvent("youtube-videos-updated")),alert("Video güncellendi!")}catch(a){alert("Video güncellenirken hata: "+a.message)}});var e,s},className:"flex-1 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Kaydet"}),u.jsx("button",{onClick:()=>He(!1),className:"flex-1 bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors",children:"İptal"})]})]})]})})]}),"notifications"===r&&u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:u.jsx("div",{className:"flex items-center justify-between mb-4",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:u.jsx(R,{className:"h-6 w-6 text-blue-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Push Bildirimleri"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Kullanıcılara bildirim gönderin ve istatistikleri görün"})]})]})})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[u.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Toplam Kullanıcı"}),u.jsx("p",{className:"text-3xl font-bold text-gray-900",children:We.total})]}),u.jsx(D,{className:"h-8 w-8 text-blue-600"})]})}),u.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:"İzin Veren"}),u.jsx("p",{className:"text-3xl font-bold text-green-600",children:We.granted})]}),u.jsx(R,{className:"h-8 w-8 text-green-600"})]})}),u.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:"İzin Vermeyen"}),u.jsx("p",{className:"text-3xl font-bold text-red-600",children:We.denied})]}),u.jsx(H,{className:"h-8 w-8 text-red-600"})]})}),u.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Henüz Karar Vermemiş"}),u.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:We.default})]}),u.jsx(A,{className:"h-8 w-8 text-yellow-600"})]})})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[u.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Test Bildirimi"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Tüm izin veren kullanıcılara test bildirimi gönderin."}),u.jsx("button",{onClick:()=>c(null,null,function*(){ss(!0);try{const e=yield c(null,null,function*(){return yield oe("🧪 Test Bildirimi","Bu bir test bildirimidir. Sistem çalışıyor!",{})});e.success?alert(`✅ Test bildirimi gönderildi!\nBaşarılı: ${e.successful}\nBaşarısız: ${e.failed}`):alert(`❌ Test bildirimi gönderilemedi: ${e.error}`)}catch(e){alert(`❌ Hata: ${e.message}`)}finally{ss(!1)}}),disabled:es,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:es?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),u.jsx("span",{children:"Gönderiliyor..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(R,{className:"h-4 w-4"}),u.jsx("span",{children:"Test Bildirimi Gönder"})]})})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[u.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Kampanya Bildirimi"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Özel kampanya veya duyuru bildirimi gönderin."}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bildirim Başlığı"}),u.jsx("input",{type:"text",value:as.title,onChange:e=>ts(s=>d(n({},s),{title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Örn: Özel İndirim!"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bildirim Mesajı"}),u.jsx("textarea",{value:as.message,onChange:e=>ts(s=>d(n({},s),{message:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"Örn: %50'ye varan indirimler sadece bugün!"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yönlendirme URL (Opsiyonel)"}),u.jsx("input",{type:"url",value:as.url,onChange:e=>ts(s=>d(n({},s),{url:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://joinescapes.com/kampanya"})]}),u.jsx("button",{onClick:()=>c(null,null,function*(){if(as.title&&as.message){ss(!0);try{const a=yield(e=as.title,s=as.message,as.url,c(null,null,function*(){return yield oe(e,s,{})}));a.success?(alert(`✅ Kampanya bildirimi gönderildi!\nBaşarılı: ${a.successful}\nBaşarısız: ${a.failed}`),ts({title:"",message:"",url:""})):alert(`❌ Kampanya bildirimi gönderilemedi: ${a.error}`)}catch(a){alert(`❌ Hata: ${a.message}`)}finally{ss(!1)}var e,s}else alert("❌ Başlık ve mesaj alanları zorunludur!")}),disabled:es||!as.title||!as.message,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:es?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),u.jsx("span",{children:"Gönderiliyor..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(R,{className:"h-4 w-4"}),u.jsx("span",{children:"Kampanya Bildirimi Gönder"})]})})]})]})]}),"profile"===r&&u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:u.jsx("div",{className:"flex items-center justify-between mb-4",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:u.jsx(D,{className:"h-6 w-6 text-blue-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Profil Ayarları"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Hesap bilgilerinizi ve güvenlik ayarlarınızı yönetin"})]})]})})}),u.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[js&&u.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:u.jsx("p",{className:"text-green-700 text-sm",children:js})}),fs&&u.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:u.jsx("p",{className:"text-red-600 text-sm",children:fs})}),u.jsxs("form",{onSubmit:e=>c(null,null,function*(){e.preventDefault(),ys(!0),vs(""),bs("");try{if(hs.email&&hs.email!==(null==s?void 0:s.email)){const{error:e}=yield x.auth.updateUser({email:hs.email});if(e)throw e}if(hs.newPassword){if(hs.newPassword!==hs.confirmPassword)throw new Error("Şifreler eşleşmiyor");if(hs.newPassword.length<6)throw new Error("Şifre en az 6 karakter olmalıdır");const{error:e}=yield x.auth.updateUser({password:hs.newPassword});if(e)throw e}const{error:e}=yield x.auth.updateUser({data:{full_name:hs.fullName||"JoinEscapes",author_name:hs.authorName||"JoinEscapes",bio:hs.bio||""}});if(e)throw e;bs("Profil başarıyla güncellendi!"),gs(e=>d(n({},e),{newPassword:"",confirmPassword:""}))}catch(a){vs(a.message)}finally{ys(!1)}}),className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Temel Bilgiler"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ad Soyad"}),u.jsx("input",{type:"text",value:hs.fullName,onChange:e=>gs(s=>d(n({},s),{fullName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Adınızı girin"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta"}),u.jsx("input",{type:"email",value:hs.email,onChange:e=>gs(s=>d(n({},s),{email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"E-posta adresiniz"})]})]})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Şifre Değiştir"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yeni Şifre"}),u.jsx("input",{type:"password",value:hs.newPassword,onChange:e=>gs(s=>d(n({},s),{newPassword:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Yeni şifrenizi girin"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şifre Onayı"}),u.jsx("input",{type:"password",value:hs.confirmPassword,onChange:e=>gs(s=>d(n({},s),{confirmPassword:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Şifrenizi tekrar girin"})]})]})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Yazar Ayarları"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yazar Adı (Yazılarda Görünecek)"}),u.jsx("input",{type:"text",value:hs.authorName,onChange:e=>gs(s=>d(n({},s),{authorName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Yazılarda görünecek yazar adı"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Bu ad blog yazılarında yazar olarak görüntülenecek"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Biyografi (İsteğe Bağlı)"}),u.jsx("textarea",{rows:"3",value:hs.bio,onChange:e=>gs(s=>d(n({},s),{bio:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Kısa biyografinizi yazın..."})]})]})]}),u.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[u.jsx("button",{type:"button",className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"İptal"}),u.jsxs("button",{type:"submit",disabled:ps,className:`px-6 py-2 rounded-lg transition-colors flex items-center space-x-2 ${ps?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"} text-white`,children:[ps?u.jsx(G,{className:"h-4 w-4 animate-spin"}):u.jsx(Z,{className:"h-4 w-4"}),u.jsx("span",{children:ps?"Kaydediliyor...":"Kaydet"})]})]})]})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[u.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Hesap Bilgileri"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-600",children:"Hesap ID:"}),u.jsx("p",{className:"font-mono text-xs text-gray-800 mt-1",children:(null==s?void 0:s.id)||"N/A"})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-600",children:"Oluşturulma Tarihi:"}),u.jsx("p",{className:"text-gray-800 mt-1",children:(null==s?void 0:s.created_at)?new Date(s.created_at).toLocaleDateString("tr-TR"):"N/A"})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-600",children:"Son Giriş:"}),u.jsx("p",{className:"text-gray-800 mt-1",children:(null==s?void 0:s.last_sign_in_at)?new Date(s.last_sign_in_at).toLocaleDateString("tr-TR"):"N/A"})]})]})]})]})]})]})};export{xe as default};
