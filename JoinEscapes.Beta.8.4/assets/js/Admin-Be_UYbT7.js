var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,n=(e,s)=>{for(var a in s||(s={}))r.call(s,a)&&i(e,a,s[a]);if(t)for(var a of t(s))l.call(s,a)&&i(e,a,s[a]);return e},d=(e,t)=>s(e,a(t)),c=(e,s,a)=>new Promise((t,r)=>{var l=e=>{try{n(a.next(e))}catch(s){r(s)}},i=e=>{try{n(a.throw(e))}catch(s){r(s)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(l,i);n((a=a.apply(e,s)).next())});import{s as o,j as m,u as x,a as u}from"./index-BbGdIXXl.js";import{r as h,u as g}from"./react-vendor-9pH4USaU.js";import{b as p,a as y}from"./blog-BwW9nHZw.js";import{b,a as j}from"./tags-DdxFKML_.js";import{migrateLocalStorageToSupabase as f,extractVideoId as v,fetchVideoInfo as N,youtubeVideoService as w}from"./youtubeSupabase-BEjx7AvE.js";import{_ as k,c as _}from"./supabase-Cd1B4uHG.js";import{P as z}from"./PostForm-neehWhiK.js";import{N as S,ai as C,aj as E,U as B,ak as A,a as K,G as P,e as Y,s as T,o as O,al as $,t as R,am as D,l as U,an as F,ao as I,J as L,ap as q,j as V,T as G,aq as H,X as M,h as J,V as X,x as W,p as Z,ar as Q,as as ee}from"./ui-vendor-BW9IHOa4.js";import{r as se,i as ae}from"./inputValidator-i9iGeD-F.js";import"./utils-Dxy8Veww.js";const te=()=>c(null,null,function*(){try{const{data:e,error:s}=yield o.storage.listBuckets();if(s)return console.error("Bucket listesi alınamadı:",s),!1;if(!e.find(e=>"blog-images"===e.name)){const e=yield c(null,null,function*(){try{const{data:e,error:s}=yield o.storage.createBucket("blog-images",{public:!0,allowedMimeTypes:["image/png","image/jpeg","image/gif","image/webp"],fileSizeLimit:5242880});return s&&"Bucket already exists"!==s.message?(console.error("Bucket oluşturma hatası:",s),{success:!1,error:s}):{success:!0,data:e}}catch(s){return console.error("Bucket setup hatası:",s),{success:!1,error:s}}});return e.success}return!0}catch(e){return console.error("Bucket kontrol hatası:",e),!1}});_("https://zhyrmasdozeptezoomnq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpoeXJtYXNkb3plcHRlem9vbW5xIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg4ODQ4NjUsImV4cCI6MjA2NDQ2MDg2NX0.u1Mq0iRPOExGHZ-crZXgR9gAlSjk097yashJmPRysy4");const re="https://www.joinescapes.com",le=[{url:"",priority:1,changefreq:"daily",section:"Ana Sayfalar"},{url:"/haberler",priority:.9,changefreq:"daily",section:"Ana Sayfalar"},{url:"/destinasyonlar",priority:.9,changefreq:"weekly",section:"Ana Sayfalar"},{url:"/sanat-ve-cemiyet",priority:.8,changefreq:"daily",section:"Kategori Sayfaları"},{url:"/spa-molalari",priority:.8,changefreq:"weekly",section:"Kategori Sayfaları"},{url:"/butik-oteller",priority:.8,changefreq:"weekly",section:"Kategori Sayfaları"},{url:"/paket-tatiller",priority:.8,changefreq:"weekly",section:"Kategori Sayfaları"},{url:"/oteller",priority:.8,changefreq:"weekly",section:"Kategori Sayfaları"},{url:"/luks-seckiler",priority:.8,changefreq:"weekly",section:"Kategori Sayfaları"},{url:"/sehir-molalari",priority:.8,changefreq:"weekly",section:"Kategori Sayfaları"},{url:"/yaz-2025",priority:.8,changefreq:"weekly",section:"Kategori Sayfaları"},{url:"/hakkimizda",priority:.6,changefreq:"monthly",section:"Statik Sayfalar"},{url:"/iletisim",priority:.6,changefreq:"monthly",section:"Statik Sayfalar"},{url:"/gizlilik-politikasi",priority:.3,changefreq:"yearly",section:"Statik Sayfalar"},{url:"/cerez-politikasi",priority:.3,changefreq:"yearly",section:"Statik Sayfalar"},{url:"/kullanim-sartlari",priority:.3,changefreq:"yearly",section:"Statik Sayfalar"}],ie=()=>c(null,null,function*(){try{const{data:e,error:s}=yield p.getAll();return s?(console.error("Kategoriler çekilemedi:",s),[]):e||[]}catch(e){return console.error("Kategoriler çekilemedi:",e),[]}}),ne=()=>c(null,null,function*(){try{const{data:e,error:s}=yield b.getFeatured();return s?(console.error("Etiketler çekilemedi:",s),[]):e||[]}catch(e){return console.error("Etiketler çekilemedi:",e),[]}}),de=()=>c(null,null,function*(){try{const{data:e,error:s}=yield j.getLatestPosts(1e3);return s?(console.error("Blog yazıları çekilemedi:",s),[]):e||[]}catch(e){return console.error("Blog yazıları çekilemedi:",e),[]}}),ce=()=>{const[e,s]=h.useState(null),[a,t]=h.useState(!0),[r,l]=h.useState({start:(new Date).toISOString().split("T")[0],end:(new Date).toISOString().split("T")[0]});h.useEffect(()=>{i()},[r]);const i=()=>c(null,null,function*(){try{t(!0);const{data:e,error:a}=yield o.from("cookie_consents").select("*").limit(5);if(a)return void console.error("❌ Basic table access failed:",a);const{count:l,error:i}=yield o.from("cookie_consents").select("*",{count:"exact",head:!0}),{data:n,error:d}=yield o.from("cookie_consents").select("*").order("consented_at",{ascending:!1}).limit(10);let c,m;const x=yield o.from("cookie_consents").select("*").gte("consented_at",r.start).lte("consented_at",r.end+"T23:59:59").order("consented_at",{ascending:!1});if(!x.error&&x.data)c=x.data,m=x.error;else{const e=yield o.from("cookie_consents").select("*").gte("created_at",r.start).lte("created_at",r.end+"T23:59:59").order("created_at",{ascending:!1});c=e.data,m=e.error}if(m)return void console.error("❌ Raw data fetch error:",m);let u=c;if((!c||0===c.length)&&n&&n.length>0&&(u=n),!u||0===u.length)return void s({total_consents:l||0,accepted_all:0,accepted_analytics:0,accepted_marketing:0,accepted_personalization:0,only_necessary:0,avg_categories_per_user:0});const h=u.length,g=u.filter(e=>!0===e.analytics).length,p=u.filter(e=>!0===e.marketing).length,y=u.filter(e=>!0===e.personalization).length,b=u.filter(e=>!0===e.analytics&&!0===e.marketing&&!0===e.personalization).length,j={total_consents:h,accepted_all:b,accepted_analytics:g,accepted_marketing:p,accepted_personalization:y,only_necessary:u.filter(e=>!1===e.analytics&&!1===e.marketing&&!1===e.personalization).length,avg_categories_per_user:h>0?((g+p+y)/h).toFixed(1):0};s(j)}catch(e){console.error("💥 Analytics fetch exception:",e)}finally{t(!1)}});if(a)return m.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:m.jsxs("div",{className:"animate-pulse",children:[m.jsx("div",{className:"h-6 bg-gray-200 rounded mb-4"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3].map(e=>m.jsx("div",{className:"h-20 bg-gray-200 rounded"},e))})]})});if(!e)return m.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:m.jsx("p",{className:"text-gray-500 text-center",children:"Analitik verileri yüklenemedi."})});const x=e.total_consents>0?Math.round(e.accepted_analytics/e.total_consents*100):0,u=e.total_consents>0?Math.round(e.accepted_marketing/e.total_consents*100):0;return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center",children:[m.jsx(S,{className:"h-6 w-6 text-blue-600 mr-2"}),"Çerez Onayı Analitiği"]}),m.jsx("div",{className:"flex items-center space-x-3",children:m.jsxs("button",{onClick:()=>c(null,null,function*(){try{const{data:e,error:s}=yield o.from("cookie_consents").select("*").gte("consented_at",r.start).lte("consented_at",r.end).order("consented_at",{ascending:!1});if(s)return void console.error("Export error:",s);const a=[["Tarih","Kullanıcı ID","Session ID","IP","Gerekli","Analitik","Pazarlama","Kişiselleştirme","Yöntem"].join(","),...e.map(e=>[new Date(e.consented_at).toLocaleString("tr-TR"),e.user_id||"Anonim",e.session_id||"-",e.ip_address||"-",e.necessary?"Evet":"Hayır",e.analytics?"Evet":"Hayır",e.marketing?"Evet":"Hayır",e.personalization?"Evet":"Hayır",e.consent_method||"banner"].join(","))].join("\n"),t=new Blob([a],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a");l.href=URL.createObjectURL(t),l.download=`cerez-onaylari-${r.start}-${r.end}.csv`,l.click()}catch(e){console.error("Export error:",e)}}),className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[m.jsx(C,{className:"h-4 w-4"}),m.jsx("span",{children:"Dışa Aktar"})]})})]}),m.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[m.jsx(E,{className:"h-5 w-5 text-gray-400"}),m.jsx("input",{type:"date",value:r.start,onChange:e=>l(s=>d(n({},s),{start:e.target.value})),className:"border border-gray-300 rounded-lg px-3 py-2"}),m.jsx("span",{className:"text-gray-500",children:"-"}),m.jsx("input",{type:"date",value:r.end,onChange:e=>l(s=>d(n({},s),{end:e.target.value})),className:"border border-gray-300 rounded-lg px-3 py-2"})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[m.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:m.jsx(B,{className:"h-6 w-6 text-blue-600"})}),m.jsxs("div",{className:"ml-4",children:[m.jsx("p",{className:"text-sm text-gray-600",children:"Toplam Onay"}),m.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.total_consents})]})]})}),m.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:m.jsx(A,{className:"h-6 w-6 text-green-600"})}),m.jsxs("div",{className:"ml-4",children:[m.jsx("p",{className:"text-sm text-gray-600",children:"Analitik Kabul"}),m.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[x,"%"]}),m.jsxs("p",{className:"text-xs text-gray-500",children:[e.accepted_analytics," / ",e.total_consents]})]})]})}),m.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:m.jsx(S,{className:"h-6 w-6 text-purple-600"})}),m.jsxs("div",{className:"ml-4",children:[m.jsx("p",{className:"text-sm text-gray-600",children:"Pazarlama Kabul"}),m.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[u,"%"]}),m.jsxs("p",{className:"text-xs text-gray-500",children:[e.accepted_marketing," / ",e.total_consents]})]})]})}),m.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:m.jsx(K,{className:"h-6 w-6 text-orange-600"})}),m.jsxs("div",{className:"ml-4",children:[m.jsx("p",{className:"text-sm text-gray-600",children:"Sadece Gerekli"}),m.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.only_necessary}),m.jsxs("p",{className:"text-xs text-gray-500",children:[e.total_consents>0?Math.round(e.only_necessary/e.total_consents*100):0,"%"]})]})]})})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Kategori Dağılımı"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm text-gray-600",children:"Gerekli Çerezler"}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:m.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"100%"}})}),m.jsx("span",{className:"text-sm font-medium",children:e.total_consents})]})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm text-gray-600",children:"Analitik Çerezler"}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:m.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${x}%`}})}),m.jsx("span",{className:"text-sm font-medium",children:e.accepted_analytics})]})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm text-gray-600",children:"Pazarlama Çerezleri"}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:m.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${u}%`}})}),m.jsx("span",{className:"text-sm font-medium",children:e.accepted_marketing})]})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm text-gray-600",children:"Kişiselleştirme"}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:m.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:`${e.total_consents>0?Math.round(e.accepted_personalization/e.total_consents*100):0}%`}})}),m.jsx("span",{className:"text-sm font-medium",children:e.accepted_personalization})]})]})]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Özet İstatistikler"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[m.jsx("span",{className:"text-sm text-blue-900",children:"Tümünü Kabul Eden"}),m.jsxs("div",{className:"text-right",children:[m.jsx("div",{className:"text-lg font-bold text-blue-900",children:e.accepted_all}),m.jsxs("div",{className:"text-xs text-blue-600",children:[e.total_consents>0?Math.round(e.accepted_all/e.total_consents*100):0,"%"]})]})]}),m.jsxs("div",{className:"flex justify-between items-center p-3 bg-orange-50 rounded-lg",children:[m.jsx("span",{className:"text-sm text-orange-900",children:"Sadece Gerekli"}),m.jsxs("div",{className:"text-right",children:[m.jsx("div",{className:"text-lg font-bold text-orange-900",children:e.only_necessary}),m.jsxs("div",{className:"text-xs text-orange-600",children:[e.total_consents>0?Math.round(e.only_necessary/e.total_consents*100):0,"%"]})]})]}),m.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[m.jsx("span",{className:"text-sm text-gray-900",children:"Ortalama Kategori"}),m.jsxs("div",{className:"text-right",children:[m.jsx("div",{className:"text-lg font-bold text-gray-900",children:e.avg_categories_per_user}),m.jsx("div",{className:"text-xs text-gray-600",children:"kategori/kullanıcı"})]})]})]})]})]}),m.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[m.jsx("h4",{className:"text-sm font-semibold text-yellow-800 mb-2",children:"📋 Yasal Uyumluluk Notu"}),m.jsx("p",{className:"text-sm text-yellow-700",children:"Bu veriler KVKK ve GDPR uyumluluğu için saklanmaktadır. Kişisel veriler anonimleştirilerek raporlanır ve 3 yıl süreyle tutulur."})]})]})},oe=()=>{const[e,s]=h.useState(null),[a,t]=h.useState(!0);h.useEffect(()=>{r()},[]);const r=()=>c(null,null,function*(){try{t(!0);const e=(new Date).toISOString().split("T")[0];let{data:a,error:r}=yield o.from("cookie_consents").select("*").gte("consented_at",e).lte("consented_at",e+"T23:59:59").order("consented_at",{ascending:!1});if(r)return void console.error("❌ BI raw data error:",r);if(!a||0===a.length){const{data:e,error:t}=yield o.from("cookie_consents").select("*").order("consented_at",{ascending:!1}).limit(100);if(t)return console.error("❌ All data error:",t),void s({marketing:{canUseGA:!1,canUseFBPixel:!1,canPersonalize:!1,organicFocusNeeded:!0},geographical:{},timing:{},conversion:{quickAcceptRate:"0",customizationRate:"0",rejectRate:"0"},recommendations:[]});a=e}const i=a.length,n=a.filter(e=>!0===e.analytics).length,d=a.filter(e=>!0===e.marketing).length,c={total_consents:i,accepted_analytics:n,accepted_marketing:d,accepted_personalization:a.filter(e=>!0===e.personalization).length},m=a.filter(e=>e.ip_address),x=a.filter(e=>e.session_id),u=l(c,m,x);s(u)}catch(e){console.error("💥 Business intelligence error:",e)}finally{t(!1)}}),l=(e,s,a)=>{const t={canUseGA:e.accepted_analytics>0,canUseFBPixel:e.accepted_marketing>0,canPersonalize:e.accepted_personalization>0,organicFocusNeeded:e.accepted_marketing<e.accepted_analytics};return{marketing:t,geographical:s.reduce((e,s)=>{var a;const t=(null==(a=s.ip_address)?void 0:a.split(".")[0])||"unknown";return e[t]||(e[t]={total:0,analytics:0,marketing:0}),e[t].total++,s.analytics&&e[t].analytics++,s.marketing&&e[t].marketing++,e},{}),timing:a.reduce((e,s)=>{const a=new Date(s.consented_at).getHours();return e[a]||(e[a]={total:0,quick_accept:0}),e[a].total++,"accept-all"===s.consent_method&&e[a].quick_accept++,e},{}),conversion:{quickAcceptRate:(a.filter(e=>"accept-all"===e.consent_method).length/a.length*100).toFixed(1),customizationRate:(a.filter(e=>"custom-settings"===e.consent_method).length/a.length*100).toFixed(1),rejectRate:(a.filter(e=>"reject-all"===e.consent_method).length/a.length*100).toFixed(1)},recommendations:i(t,e)}},i=(e,s)=>{const a=[];return s.accepted_analytics<.5*s.total_consents&&a.push({type:"warning",title:"Analytics Kabul Oranı Düşük",description:"Kullanıcıların %50'sinden azı analytics kabul ediyor. Server-side tracking düşünün.",action:"Server-side Google Analytics 4 implementasyonu"}),s.accepted_marketing<.3*s.total_consents&&a.push({type:"info",title:"Marketing Kabul Oranı Düşük",description:"Paid ads yerine organic content marketing'e odaklanın.",action:"SEO ve content marketing stratejisi geliştirin"}),s.accepted_personalization>.7*s.total_consents&&a.push({type:"success",title:"Kişiselleştirme Fırsatı",description:"Kullanıcılar kişiselleştirmeyi seviyor. Recommendation engine ekleyin.",action:"AI-powered içerik öneri sistemi geliştirin"}),a};return a?m.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:m.jsxs("div",{className:"animate-pulse",children:[m.jsx("div",{className:"h-6 bg-gray-200 rounded mb-4"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[1,2,3,4].map(e=>m.jsx("div",{className:"h-32 bg-gray-200 rounded"},e))})]})}):e?m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg shadow p-6 text-white",children:[m.jsxs("h2",{className:"text-2xl font-bold mb-2 flex items-center",children:[m.jsx(S,{className:"h-7 w-7 mr-3"}),"Cookie Business Intelligence"]}),m.jsx("p",{className:"text-blue-100",children:"Cookie verilerinizi iş stratejinize dönüştürün"})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[m.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 "+(e.marketing.canUseGA?"border-green-500":"border-red-500"),children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(A,{className:"h-8 w-8 "+(e.marketing.canUseGA?"text-green-600":"text-red-600")}),m.jsxs("div",{className:"ml-4",children:[m.jsx("p",{className:"text-sm text-gray-600",children:"Google Analytics"}),m.jsx("p",{className:"text-lg font-bold "+(e.marketing.canUseGA?"text-green-900":"text-red-900"),children:e.marketing.canUseGA?"Aktif Kullan":"Server-side Geç"})]})]})}),m.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 "+(e.marketing.canUseFBPixel?"border-blue-500":"border-orange-500"),children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(B,{className:"h-8 w-8 "+(e.marketing.canUseFBPixel?"text-blue-600":"text-orange-600")}),m.jsxs("div",{className:"ml-4",children:[m.jsx("p",{className:"text-sm text-gray-600",children:"Facebook Ads"}),m.jsx("p",{className:"text-lg font-bold "+(e.marketing.canUseFBPixel?"text-blue-900":"text-orange-900"),children:e.marketing.canUseFBPixel?"Pixel Kullan":"Organic Odaklan"})]})]})}),m.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 "+(e.marketing.canPersonalize?"border-purple-500":"border-gray-500"),children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(P,{className:"h-8 w-8 "+(e.marketing.canPersonalize?"text-purple-600":"text-gray-600")}),m.jsxs("div",{className:"ml-4",children:[m.jsx("p",{className:"text-sm text-gray-600",children:"Kişiselleştirme"}),m.jsx("p",{className:"text-lg font-bold "+(e.marketing.canPersonalize?"text-purple-900":"text-gray-900"),children:e.marketing.canPersonalize?"AI Öneri Sys.":"Generic Content"})]})]})}),m.jsx("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-indigo-500",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(Y,{className:"h-8 w-8 text-indigo-600"}),m.jsxs("div",{className:"ml-4",children:[m.jsx("p",{className:"text-sm text-gray-600",children:"Hızlı Kabul"}),m.jsxs("p",{className:"text-lg font-bold text-indigo-900",children:["%",e.conversion.quickAcceptRate]})]})]})})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[m.jsx(A,{className:"h-6 w-6 text-blue-600 mr-2"}),"Stratejik Öneriler"]}),m.jsx("div",{className:"space-y-4",children:e.recommendations.map((e,s)=>m.jsxs("div",{className:"p-4 rounded-lg border-l-4 "+("success"===e.type?"bg-green-50 border-green-400":"warning"===e.type?"bg-yellow-50 border-yellow-400":"bg-blue-50 border-blue-400"),children:[m.jsx("h4",{className:"font-semibold "+("success"===e.type?"text-green-900":"warning"===e.type?"text-yellow-900":"text-blue-900"),children:e.title}),m.jsx("p",{className:"text-sm mt-1 "+("success"===e.type?"text-green-700":"warning"===e.type?"text-yellow-700":"text-blue-700"),children:e.description}),m.jsxs("p",{className:"text-xs mt-2 font-medium "+("success"===e.type?"text-green-800":"warning"===e.type?"text-yellow-800":"text-blue-800"),children:["🎯 Aksiyon: ",e.action]})]},s))})]}),m.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-6",children:[m.jsx("h4",{className:"text-lg font-semibold text-amber-900 mb-3",children:"📋 Veri Kullanım Rehberi"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-amber-800",children:[m.jsxs("div",{children:[m.jsx("h5",{className:"font-medium mb-2",children:"✅ Yapabileceklerin:"}),m.jsxs("ul",{className:"space-y-1 text-xs",children:[m.jsx("li",{children:"• Anonim istatistik analizi"}),m.jsx("li",{children:"• A/B test optimizasyonu"}),m.jsx("li",{children:"• Coğrafi trend analizi"}),m.jsx("li",{children:"• Marketing ROI hesaplama"}),m.jsx("li",{children:"• UX iyileştirme kararları"})]})]}),m.jsxs("div",{children:[m.jsx("h5",{className:"font-medium mb-2",children:"❌ Yapamazsın:"}),m.jsxs("ul",{className:"space-y-1 text-xs",children:[m.jsx("li",{children:"• Kişisel hedefleme (email yok)"}),m.jsx("li",{children:"• IP ile kullanıcı takibi"}),m.jsx("li",{children:"• 3. parti veri satışı"}),m.jsx("li",{children:"• Bireysel profilleme"}),m.jsx("li",{children:"• Cross-device tracking"})]})]})]})]})]}):m.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:m.jsx("p",{className:"text-gray-500 text-center",children:"Business intelligence verileri yüklenemedi."})})},me=(e,s,...a)=>c(null,[e,s,...a],function*(e,s,a={}){try{console.log("🔔 Push notification gönderiliyor...");const{data:e,error:s}=yield o.from("notification_permissions").select("*").eq("permission","granted");if(s)return console.error("❌ Kullanıcı izinleri getirilemedi:",s),{success:!1,error:s};if(!e||0===e.length)return console.log("⚠️ İzin veren kullanıcı bulunamadı"),{success:!1,message:"No users with permission"};console.log(`✅ ${e.length} kullanıcıya bildirim gönderilecek`);const a=yield Promise.allSettled(e.map(e=>c(null,null,function*(){try{return console.log(`📱 Bildirim gönderildi: ${e.user_id||"anonymous"}`),{userId:e.user_id,success:!0,message:"Notification sent"}}catch(s){return console.error(`❌ Bildirim gönderilemedi: ${e.user_id}`,s),{userId:e.user_id,success:!1,error:s.message}}}))),t=a.filter(e=>"fulfilled"===e.status&&e.value.success).length,r=a.length-t;return console.log(`✅ ${t} başarılı, ❌ ${r} başarısız`),{success:!0,total:e.length,successful:t,failed:r,results:a.map(e=>"fulfilled"===e.status?e.value:{success:!1,error:e.reason})}}catch(t){return console.error("❌ Push notification hatası:",t),{success:!1,error:t.message}}}),xe=()=>{const e=g(),{user:s,isAuthenticated:a,loading:t}=x(),[r,l]=h.useState("dashboard"),[i,j]=h.useState([]),[_,E]=h.useState([]),[A,P]=h.useState([]),[xe,ue]=h.useState([]),[he,ge]=h.useState(!1),[pe,ye]=h.useState(!1),[be,je]=h.useState(!1),[fe,ve]=h.useState(null),[Ne,we]=h.useState(!1),[ke,_e]=h.useState(!1),[ze,Se]=h.useState(null),[Ce,Ee]=h.useState(null),[Be,Ae]=h.useState(!1),[Ke,Pe]=h.useState(!1),[Ye,Te]=h.useState({totalPosts:0,publishedPosts:0,draftPosts:0,totalViews:0}),[Oe,$e]=h.useState([]),[Re,De]=h.useState(""),[Ue,Fe]=h.useState(""),[Ie,Le]=h.useState(!1),[qe,Ve]=h.useState(null),[Ge,He]=h.useState(!1),[Me,Je]=h.useState(!1),[Xe,We]=h.useState(!1),[Ze,Qe]=h.useState({total:0,granted:0,denied:0,default:0}),[es,ss]=h.useState(!1),[as,ts]=h.useState({title:"",message:"",url:""}),[rs,ls]=h.useState([]),[is,ns]=h.useState([]),[ds,cs]=h.useState(!1),[os,ms]=h.useState([]),[xs,us]=h.useState(!1),[hs,gs]=h.useState({fullName:"",email:"",newPassword:"",confirmPassword:"",authorName:"JoinEscapes",bio:""}),[ps,ys]=h.useState(!1),[bs,js]=h.useState(""),[fs,vs]=h.useState(""),[Ns,ws]=h.useState(""),[ks,_s]=h.useState({name:"",description:"",color:"#3B82F6",is_featured:!1}),[zs,Ss]=h.useState({name:"",description:"",color:"#3B82F6"}),Cs=()=>c(null,null,function*(){try{const e=yield c(null,null,function*(){try{const{data:e,error:s}=yield o.from("notification_permissions").select("permission");return s?(console.error("❌ İstatistikler getirilemedi:",s),null):{total:e.length,granted:e.filter(e=>"granted"===e.permission).length,denied:e.filter(e=>"denied"===e.permission).length,default:e.filter(e=>"default"===e.permission).length}}catch(e){return console.error("❌ İstatistik hatası:",e),null}});e&&Qe(e)}catch(e){console.error("Bildirim istatistikleri yüklenemedi:",e)}});if(h.useEffect(()=>{if(console.log("🔍 Admin Auth Check:",{loading:t,isAuthenticated:a,user:null==s?void 0:s.email}),!t&&!a)return console.log("❌ Admin: Çıkış yapıldı, ana sayfaya yönlendiriliyor..."),void e("/",{replace:!0});if(a&&s&&s.id){if("test@test.com"!==s.email)return console.log("🚫 Admin: Yetkisiz erişim denemesi:",s.email),alert("Bu panele sadece admin erişebilir!"),void e("/",{replace:!0});Cs()}},[t,a,e,s]),t)return m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),m.jsx("p",{className:"text-gray-600",children:"Yükleniyor..."})]})});if(!a)return null;const Es=()=>c(null,null,function*(){ge(!0);const{data:e,error:s}=yield y.getAll({orderBy:"created_at",orderDirection:"desc"});!s&&e&&(j(e),console.log("✅ Admin paneline yüklenen yazı sayısı:",e.length)),ge(!1)}),Bs=()=>c(null,null,function*(){ye(!0);try{const{data:e,error:s}=yield o.from("posts").select("\n          *,\n          categories (\n            id,\n            name,\n            slug\n          )\n        ").eq("status","pending").order("created_at",{ascending:!1});!s&&e?(E(e),console.log("⏳ Onay bekleyen yazı sayısı:",e.length)):console.error("❌ Pending posts fetch hatası:",s)}catch(e){console.error("❌ Pending posts fetch hatası:",e)}ye(!1)}),As=()=>c(null,null,function*(){us(!0);try{const{data:e,error:s}=yield o.from("writer_profiles").select("*").order("created_at",{ascending:!1});!s&&e?(ms(e),ls(e.filter(e=>e.is_featured)),console.log("✅ Yazarlar yüklendi:",e.length,"öne çıkan:",e.filter(e=>e.is_featured).length)):console.error("❌ Writers fetch hatası:",s)}catch(e){console.error("❌ Writers fetch hatası:",e)}us(!1)}),Ks=()=>c(null,null,function*(){var e;console.log("📊 Gerçek istatistikler hesaplanıyor...");try{const[s,a,t,r]=yield Promise.all([o.from("posts").select("id",{count:"exact",head:!0}),o.from("posts").select("id",{count:"exact",head:!0}).eq("status","published"),o.from("posts").select("id",{count:"exact",head:!0}).eq("status","draft"),o.from("posts").select("views")]),l=s.count||0,i=a.count||0,n=t.count||0,d=(null==(e=r.data)?void 0:e.reduce((e,s)=>e+(s.views||0),0))||0;console.log("✅ Gerçek istatistikler:",{totalPosts:l,publishedPosts:i,draftPosts:n,totalViews:d}),Te({totalPosts:l,publishedPosts:i,draftPosts:n,totalViews:d})}catch(s){console.error("❌ İstatistik hatası:",s),Te({totalPosts:0,publishedPosts:0,draftPosts:0,totalViews:0})}}),Ps=()=>c(null,null,function*(){Ae(!0);const{data:e,error:s}=yield p.getAll();!s&&e&&P(e),Ae(!1)}),Ys=()=>c(null,null,function*(){je(!0);const{data:e,error:s}=yield b.getAll();!s&&e&&ue(e),je(!1)}),Ts=()=>{Se(null),_s({name:"",description:"",color:"#3B82F6",is_featured:!1}),l("tagForm")},Os=(e,s)=>{_s(a=>d(n({},a),{[e]:s}))},$s=()=>{Ee(null),Ss({name:"",description:"",color:"#3B82F6"}),l("categoryForm")},Rs=(e,s)=>{Ss(a=>d(n({},a),{[e]:s}))};h.useEffect(()=>{c(null,null,function*(){console.log("🚀 Admin paneli yükleniyor - HIZLI MOD!");try{const[e,s,a,t,r,l,i,n]=yield Promise.allSettled([Es(),Bs(),Ps(),Ys(),c(null,null,function*(){try{const{data:e,error:s}=yield w.getAll();!s&&e?$e(e):(console.error("YouTube videoları getirilemedi:",s),$e([]))}catch(e){console.error("YouTube videoları getirilemedi:",e),$e([])}}),Ks(),As(),Vs()]);console.log("✅ Paralel veri yükleme tamamlandı:",{posts:e.status,categories:a.status,tags:t.status,videos:r.status,stats:l.status,writers:i.status,editors:n.status}),c(null,null,function*(){try{const e=yield te();Pe(e),e||console.error("❌ Storage kurulum hatası")}catch(e){console.error("Storage setup hatası:",e)}}).catch(e=>console.warn("Storage kurulum uyarısı:",e)),setTimeout(()=>c(null,null,function*(){try{const e=yield f();e.success&&e.migrated>0&&console.log("✅ YouTube migration tamamlandı")}catch(e){console.warn("Migration hatası:",e)}}),1e3)}catch(e){console.error("❌ Admin init hatası:",e)}})},[]);h.useEffect(()=>{var e,a,t,r;s&&gs({fullName:(null==(e=s.user_metadata)?void 0:e.full_name)||(null==(a=s.email)?void 0:a.split("@")[0])||"JoinEscapes",email:s.email||"",newPassword:"",confirmPassword:"",authorName:(null==(t=s.user_metadata)?void 0:t.author_name)||"JoinEscapes",bio:(null==(r=s.user_metadata)?void 0:r.bio)||""})},[s]);const Ds=e=>c(null,null,function*(){if(window.confirm("Bu yazıyı silmek istediğinizden emin misiniz?")){const{error:s}=yield y.delete(e);s?alert("Silme işlemi başarısız: "+s.message):Es()}}),Us=e=>{ve(e),we(!0)},Fs=()=>{ve(null),we(!0)},Is=()=>{we(!1),ve(null),Es()},Ls=e=>new Date(e).toLocaleDateString("tr-TR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),qs=e=>{const s={published:{color:"bg-green-100 text-green-800",text:"Yayında"},draft:{color:"bg-yellow-100 text-yellow-800",text:"Taslak"},pending:{color:"bg-orange-100 text-orange-800",text:"Onay Bekliyor"},rejected:{color:"bg-red-100 text-red-800",text:"Reddedildi"},archived:{color:"bg-gray-100 text-gray-800",text:"Arşiv"}},a=s[e]||s.draft;return m.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a.color}`,children:a.text})},Vs=()=>c(null,null,function*(){cs(!0);try{if(!u)return console.error("❌ Service role key eksik!"),void alert("Admin işlemleri için service role key eksik!");const{data:e,error:s}=yield u.auth.admin.listUsers();if(s)return void console.error("❌ Editörler getirilemedi:",s);const a=e.users.filter(e=>{var s,a;const t=null==(s=e.user_metadata)?void 0:s.user_role,r="editor"===t||"yazar"===t||"supervisor"===t,l="test@test.com"!==e.email,i=!(null==(a=e.user_metadata)?void 0:a.editor_approved);return r&&l&&i});console.log("📋 Onay bekleyen editörler:",a.length),ns(a)}catch(e){console.error("❌ Editör fetch hatası:",e)}finally{cs(!1)}});return Ne?m.jsx(z,{post:fe,categories:A,onSave:Is,onCancel:()=>we(!1)}):m.jsxs("div",{className:"min-h-screen bg-gray-50",children:[m.jsx("header",{className:"bg-white shadow-sm border-b",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"flex justify-between items-center h-16",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Panel"}),m.jsxs("p",{className:"text-gray-600",children:["Hoş geldin, ",null==s?void 0:s.email]})]}),m.jsxs("button",{onClick:Fs,className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[m.jsx(T,{className:"h-4 w-4"}),m.jsx("span",{children:"Yeni Yazı"})]})]})})}),m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[m.jsx("div",{className:"mb-8",children:m.jsx("div",{className:"bg-gray-50 p-2 rounded-xl border border-gray-200 shadow-inner",children:m.jsx("div",{className:"flex overflow-x-auto scrollbar-hide space-x-3 pb-2",children:[{id:"dashboard",name:"Dashboard",icon:S,short:"Panel"},{id:"posts",name:"Yazılar",icon:O,short:"Yazı"},{id:"pending",name:"Onay Bekleyen",icon:Y,short:"Onay"},{id:"editorApproval",name:"Editör Onayı",icon:$,short:"Edit"},{id:"featuredWriters",name:"Öne Çıkan Yazarlar",icon:B,short:"Yazar"},{id:"categories",name:"Kategoriler",icon:R,short:"Kat"},{id:"tags",name:"Etiketler",icon:R,short:"Tag"},{id:"notifications",name:"Bildirimler",icon:D,short:"Bell"},{id:"profile",name:"Profil Ayarları",icon:U,short:"Prof"},{id:"videos",name:"YouTube Videos",icon:F,short:"Vid"},{id:"sitemap",name:"Site Haritası",icon:I,short:"Map"},{id:"cookieAnalytics",name:"Cookie Analytics",icon:L,short:"Ana"},{id:"cookieBusinessIntelligence",name:"Cookie Business Intelligence",icon:q,short:"BI"}].map(e=>{const s=e.icon;return m.jsxs("button",{onClick:()=>l(e.id),className:"flex flex-col items-center justify-center px-3 py-2 rounded-lg font-medium transition-all duration-200 whitespace-nowrap text-xs shadow-sm border min-w-[60px] "+(r===e.id||"tagForm"===r&&"tags"===e.id||"categoryForm"===r&&"categories"===e.id?"bg-gradient-to-r from-primary-500 to-primary-600 text-white border-primary-600 shadow-lg shadow-primary-500/30 transform scale-105":"bg-white text-gray-700 border-gray-200 hover:text-primary-600 hover:bg-primary-50 hover:border-primary-300 hover:shadow-md"),children:[m.jsx(s,{className:"h-4 w-4 mb-1"}),m.jsx("span",{className:"hidden lg:block text-[11px]",children:e.name}),m.jsx("span",{className:"lg:hidden text-[11px]",children:e.short})]},e.id)})})})}),"dashboard"===r&&m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[m.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Toplam Yazı"}),m.jsx("p",{className:"text-3xl font-bold text-gray-900",children:Ye.totalPosts})]}),m.jsx(O,{className:"h-8 w-8 text-blue-600"})]})}),m.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Yayında"}),m.jsx("p",{className:"text-3xl font-bold text-green-600",children:Ye.publishedPosts})]}),m.jsx(V,{className:"h-8 w-8 text-green-600"})]})}),m.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Taslak"}),m.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:Ye.draftPosts})]}),m.jsx(O,{className:"h-8 w-8 text-yellow-600"})]})}),m.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Toplam Görüntülenme"}),m.jsx("p",{className:"text-3xl font-bold text-purple-600",children:Ye.totalViews})]}),m.jsx(S,{className:"h-8 w-8 text-purple-600"})]})})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[m.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Son Yazılar"}),m.jsx("span",{className:"text-sm text-gray-500",children:"Son 5 yazı"})]}),he?m.jsxs("div",{className:"px-6 py-8 text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto mb-3"}),m.jsx("p",{className:"text-gray-500 text-sm",children:"Son yazılar yükleniyor..."})]}):0===i.length?m.jsxs("div",{className:"px-6 py-8 text-center",children:[m.jsx(O,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),m.jsx("p",{className:"text-gray-500 text-sm",children:"Henüz yazı eklenmemiş"}),m.jsx("button",{onClick:Fs,className:"mt-3 text-primary-600 hover:text-primary-700 text-sm font-medium",children:"İlk yazıyı ekle"})]}):m.jsx("div",{className:"divide-y divide-gray-200",children:i.sort((e,s)=>new Date(s.created_at)-new Date(e.created_at)).slice(0,5).map(e=>m.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),m.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[m.jsx("p",{className:"text-xs text-gray-500",children:Ls(e.created_at)}),m.jsx("span",{className:"text-gray-300",children:"•"}),m.jsx("p",{className:"text-xs text-gray-500",children:e.category_name||"Kategori yok"}),m.jsx("span",{className:"text-gray-300",children:"•"}),m.jsx("p",{className:"text-xs text-gray-500",children:e.author_name||"Yazar bilinmiyor"})]})]}),m.jsxs("div",{className:"flex items-center space-x-3 ml-4",children:[qs(e.status),m.jsx("div",{className:"text-right",children:m.jsxs("p",{className:"text-xs text-gray-500",children:[e.views||0," görüntülenme"]})}),m.jsxs("div",{className:"flex items-center space-x-1",children:[m.jsx("button",{onClick:()=>Us(e),className:"text-gray-400 hover:text-primary-600 transition-colors",title:"Düzenle",children:m.jsx(O,{className:"h-4 w-4"})}),m.jsx("button",{onClick:()=>Ds(e.id),className:"text-gray-400 hover:text-red-600 transition-colors",title:"Sil",children:m.jsx(G,{className:"h-4 w-4"})})]})]})]})},e.id))}),i.length>5&&m.jsx("div",{className:"px-6 py-3 bg-gray-50 border-t",children:m.jsxs("button",{onClick:()=>l("posts"),className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:["Tüm yazıları görüntüle (",i.length," yazı)"]})})]})]}),"posts"===r&&m.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[m.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Blog Yazıları"}),m.jsxs("button",{onClick:Fs,className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[m.jsx(T,{className:"h-4 w-4"}),m.jsx("span",{children:"Yeni Yazı"})]})]}),he?m.jsxs("div",{className:"px-6 py-8 text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),m.jsx("p",{className:"text-gray-600",children:"Yazılar yükleniyor..."})]}):m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Başlık"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kategori"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durum"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Görüntülenme"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tarih"}),m.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"İşlemler"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(e=>m.jsxs("tr",{className:"hover:bg-gray-50",children:[m.jsx("td",{className:"px-6 py-4",children:m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-medium text-gray-900 truncate max-w-xs",children:e.title}),m.jsxs("div",{className:"text-sm text-gray-500",children:[e.author_name," • ",e.read_time," dk okuma"]})]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("span",{className:"text-sm text-gray-900",children:e.category_name})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:qs(e.status)}),m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.views," • ",e.likes," beğeni"]}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Ls(e.created_at)}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:m.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[m.jsx("button",{onClick:()=>Us(e),className:"text-primary-600 hover:text-primary-900",children:m.jsx(O,{className:"h-4 w-4"})}),m.jsx("button",{onClick:()=>Ds(e.id),className:"text-red-600 hover:text-red-900",children:m.jsx(G,{className:"h-4 w-4"})})]})})]},e.id))})]})})]}),"pending"===r&&m.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[m.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Onay Bekleyen Yazılar"}),m.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Editörler tarafından yayın için gönderilen yazılar"})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsxs("span",{className:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-medium",children:[_.length," yazı bekliyor"]}),m.jsx("button",{onClick:Bs,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Yenile",children:m.jsx(H,{className:"h-4 w-4"})})]})]}),pe?m.jsxs("div",{className:"px-6 py-8 text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto mb-4"}),m.jsx("p",{className:"text-gray-600",children:"Onay bekleyen yazılar yükleniyor..."})]}):0===_.length?m.jsxs("div",{className:"px-6 py-12 text-center",children:[m.jsx(Y,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),m.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Onay bekleyen yazı yok"}),m.jsx("p",{className:"text-gray-500",children:"Editörler yazı gönderdiğinde burada görünecek"})]}):m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Yazı"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Yazar"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kategori"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gönderilme Tarihi"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"İşlemler"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(e=>{var s;return m.jsxs("tr",{className:"hover:bg-gray-50",children:[m.jsx("td",{className:"px-6 py-4",children:m.jsxs("div",{className:"flex items-start space-x-3",children:[e.featured_image_url&&m.jsx("img",{src:e.featured_image_url,alt:e.title,className:"w-16 h-12 object-cover rounded-lg flex-shrink-0"}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h4",{className:"text-sm font-medium text-gray-900 line-clamp-2",children:e.title}),e.excerpt&&m.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:e.excerpt})]})]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("div",{className:"text-sm text-gray-900",children:e.author_name||"Bilinmeyen"})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:(null==(s=e.categories)?void 0:s.name)||"Kategori yok"})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Ls(e.created_at)}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsxs("button",{onClick:()=>{return s=e.id,c(null,null,function*(){try{const{error:e}=yield o.from("posts").update({status:"published"}).eq("id",s);e?alert("Onay işlemi başarısız: "+e.message):(console.log("✅ Yazı onaylandı:",s),Bs(),Es(),Ks())}catch(e){alert("Onay işlemi başarısız: "+e.message)}});var s},className:"bg-green-600 text-white px-3 py-1.5 rounded-md hover:bg-green-700 transition-colors text-sm font-medium flex items-center space-x-1",title:"Yazıyı Onayla ve Yayınla",children:[m.jsx(V,{className:"h-3 w-3"}),m.jsx("span",{children:"Onayla"})]}),m.jsxs("button",{onClick:()=>{return s=e.id,c(null,null,function*(){if(window.confirm("Bu yazıyı reddetmek istediğinizden emin misiniz?"))try{const{error:e}=yield o.from("posts").update({status:"rejected"}).eq("id",s);e?alert("Red işlemi başarısız: "+e.message):(console.log("❌ Yazı reddedildi:",s),Bs(),Ks())}catch(e){alert("Red işlemi başarısız: "+e.message)}});var s},className:"bg-red-600 text-white px-3 py-1.5 rounded-md hover:bg-red-700 transition-colors text-sm font-medium flex items-center space-x-1",title:"Yazıyı Reddet",children:[m.jsx(M,{className:"h-3 w-3"}),m.jsx("span",{children:"Reddet"})]}),m.jsx("button",{onClick:()=>Us(e),className:"text-gray-600 hover:text-blue-600 transition-colors p-1",title:"Önizle/Düzenle",children:m.jsx(O,{className:"h-4 w-4"})})]})})]},e.id)})})]})})]}),"editorApproval"===r&&m.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[m.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Editör Onayı"}),m.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Editör/Süpervizör olarak kayıt olan kullanıcıları onaylayın"})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsxs("span",{className:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-medium",children:[is.length," onay bekleyen"]}),m.jsx("button",{onClick:Vs,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Yenile",children:m.jsx(H,{className:"h-4 w-4"})}),m.jsx("button",{onClick:()=>c(null,null,function*(){try{if(!u)return void alert("Service role key eksik!");const{data:e}=yield u.auth.admin.listUsers(),s=e.users.find(e=>"birsurvivorgeyigi@gmail.com"===e.email);if(s){const{error:e}=yield u.auth.admin.updateUserById(s.id,{user_metadata:{user_role:"yazar",editor_approved:!1,full_name:"birsurvivorgeyigi",author_name:"JoinEscapes"}});e?alert("Hata: "+e.message):(console.log("✅ Test kullanıcı metadata güncellendi"),alert("birsurvivorgeyigi@gmail.com kullanıcısının metadata'sı güncellendi!"),Vs())}else alert("Kullanıcı bulunamadı!")}catch(e){alert("Hata: "+e.message)}}),className:"bg-blue-600 text-white px-3 py-1 rounded-md hover:bg-blue-700 transition-colors text-sm",title:"Test kullanıcısını onay bekleyen yap",children:"Test Hazırla"})]})]}),ds?m.jsxs("div",{className:"px-6 py-8 text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto mb-4"}),m.jsx("p",{className:"text-gray-600",children:"Onay bekleyen editörler yükleniyor..."})]}):0===is.length?m.jsxs("div",{className:"px-6 py-12 text-center",children:[m.jsx($,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),m.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Onay bekleyen editör yok"}),m.jsx("p",{className:"text-gray-500",children:"Yeni editör/süpervizör kayıt olduğunda burada görünecek"})]}):m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kullanıcı"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kayıt Tarihi"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email Durumu"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"İşlemler"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:is.map(e=>{var a,t,r,l,i,n,d;return m.jsxs("tr",{className:"hover:bg-gray-50",children:[m.jsx("td",{className:"px-6 py-4",children:m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:m.jsx(U,{className:"h-5 w-5 text-gray-500"})}),m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-medium text-gray-900",children:(null==(a=e.user_metadata)?void 0:a.full_name)||(null==(t=e.email)?void 0:t.split("@")[0])}),m.jsx("div",{className:"text-sm text-gray-500",children:e.email})]})]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+("supervisor"===(null==(r=e.user_metadata)?void 0:r.user_role)?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:"supervisor"===(null==(l=e.user_metadata)?void 0:l.user_role)?"Süpervizör":"editor"===(null==(i=e.user_metadata)?void 0:i.user_role)||"yazar"===(null==(n=e.user_metadata)?void 0:n.user_role)?"Editör":(null==(d=e.user_metadata)?void 0:d.user_role)||"Bilinmeyen"})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Ls(e.created_at)}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+(e.email_confirmed_at?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.email_confirmed_at?"Doğrulanmış":"Bekliyor"})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsxs("button",{onClick:()=>{return a=e.id,t=e.email,c(null,null,function*(){if(window.confirm(`${t} adresli kullanıcıyı editör olarak onaylamak istediğinizden emin misiniz?`))try{console.log("🔄 Editör onaylanıyor:",{userId:a,email:t});const{error:e}=yield u.auth.admin.updateUserById(a,{user_metadata:{editor_approved:!0,approved_by:(null==s?void 0:s.email)||"test@test.com",approved_at:(new Date).toISOString(),full_name:t.split("@")[0],first_name:t.split("@")[0],last_name:"",author_title:"Editör & Seyahat Yazarı",bio:"Ben Sez geliyorums",location:"İstanbul",specialties:["Seyahat","Editörlük"],social_media:{instagram:"@sezaidemirer",twitter:"@sezaidemirer",blog:"Kişisel Blog"},profile_image:"https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80"}});if(e)return console.error("❌ Metadata güncelleme hatası:",e),void alert("Metadata güncelleme başarısız: "+e.message);const r=t.split("@")[0],{error:l}=yield o.from("writer_profiles").insert({user_id:a,name:r,title:"Editör & Seyahat Yazarı",bio:"Ben Sez geliyorums",location:"İstanbul",profile_image:"https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",specialties:["Seyahat","Editörlük"],social_media:{instagram:"@sezaidemirer",twitter:"@sezaidemirer",blog:"Kişisel Blog"},is_featured:!1});if(l)return console.error("❌ Writer profile ekleme hatası:",l),void alert("Writer profile ekleme başarısız: "+l.message);console.log("✅ Editör onaylandı ve profil oluşturuldu:",t),Vs(),As(),alert(`${t} adresli kullanıcı başarıyla editör olarak onaylandı ve profil oluşturuldu!`)}catch(e){console.error("❌ Editör onaylama hatası:",e),alert("Onay işlemi başarısız: "+e.message)}});var a,t},className:"bg-green-600 text-white px-3 py-1.5 rounded-md hover:bg-green-700 transition-colors text-sm font-medium flex items-center space-x-1",title:"Editörü Onayla",children:[m.jsx(J,{className:"h-3 w-3"}),m.jsx("span",{children:"Onayla"})]}),m.jsxs("button",{onClick:()=>{return s=e.id,a=e.email,c(null,null,function*(){if(window.confirm(`${a} adresli kullanıcıyı reddetmek istediğinizden emin misiniz?`))try{const{error:e}=yield u.auth.admin.deleteUser(s);e?alert("Red işlemi başarısız: "+e.message):(console.log("❌ Editör reddedildi:",a),Vs(),alert(`${a} adresli kullanıcı reddedildi ve hesabı silindi.`))}catch(e){alert("Red işlemi başarısız: "+e.message)}});var s,a},className:"bg-red-600 text-white px-3 py-1.5 rounded-md hover:bg-red-700 transition-colors text-sm font-medium flex items-center space-x-1",title:"Editörü Reddet",children:[m.jsx(X,{className:"h-3 w-3"}),m.jsx("span",{children:"Reddet"})]})]})})]},e.id)})})]})})]}),"featuredWriters"===r&&m.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[m.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Öne Çıkan Yazarlar"}),m.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Ana sayfada görünecek yazarları yönetin"})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsxs("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:[rs.length," öne çıkan yazar"]}),m.jsx("button",{onClick:As,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Yenile",children:m.jsx(H,{className:"h-4 w-4"})})]})]}),xs?m.jsxs("div",{className:"px-6 py-8 text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),m.jsx("p",{className:"text-gray-600",children:"Yazarlar yükleniyor..."})]}):0===os.length?m.jsxs("div",{className:"px-6 py-12 text-center",children:[m.jsx(B,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),m.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Henüz yazar yok"}),m.jsx("p",{className:"text-gray-500",children:"Yazarlar kayıt olduğunda burada görünecek"})]}):m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Yazar"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Başlık"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kayıt Tarihi"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durum"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"İşlemler"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:os.map(e=>m.jsxs("tr",{className:"hover:bg-gray-50",children:[m.jsx("td",{className:"px-6 py-4",children:m.jsxs("div",{className:"flex items-center space-x-3",children:[e.profile_image&&m.jsx("img",{src:e.profile_image,alt:e.name,className:"w-12 h-12 object-cover rounded-full flex-shrink-0"}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h4",{className:"text-sm font-medium text-gray-900",children:e.name}),e.location&&m.jsx("p",{className:"text-sm text-gray-500",children:e.location})]})]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("div",{className:"text-sm text-gray-900",children:e.title||"Başlık belirtilmemiş"})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString("tr-TR")}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.is_featured?m.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[m.jsx(W,{className:"w-3 h-3 mr-1"}),"Öne Çıkan"]}):m.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Normal"})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:m.jsx("button",{onClick:()=>{return s=e.id,a=e.is_featured,c(null,null,function*(){try{const{error:e}=yield o.from("writer_profiles").update({is_featured:!a}).eq("id",s);e?alert("İşlem başarısız: "+e.message):(console.log("✅ Yazar öne çıkarma durumu güncellendi:",s),As())}catch(e){alert("İşlem başarısız: "+e.message)}});var s,a},className:"inline-flex items-center px-3 py-1 rounded-md text-sm font-medium transition-colors "+(e.is_featured?"bg-red-100 text-red-700 hover:bg-red-200":"bg-blue-100 text-blue-700 hover:bg-blue-200"),children:e.is_featured?m.jsxs(m.Fragment,{children:[m.jsx(M,{className:"w-3 h-3 mr-1"}),"Kaldır"]}):m.jsxs(m.Fragment,{children:[m.jsx(W,{className:"w-3 h-3 mr-1"}),"Öne Çıkar"]})})})]},e.id))})]})})]}),"categories"===r&&m.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[m.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Kategoriler"}),m.jsxs("button",{onClick:$s,className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[m.jsx(T,{className:"h-4 w-4"}),m.jsx("span",{children:"Yeni Kategori"})]})]}),Be?m.jsxs("div",{className:"px-6 py-8 text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),m.jsx("p",{className:"text-gray-600",children:"Kategoriler yükleniyor..."})]}):m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-6",children:[A.map(e=>m.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),m.jsx("h4",{className:"font-medium text-gray-900",children:e.name})]}),m.jsxs("div",{className:"flex items-center space-x-1",children:[m.jsx("button",{onClick:()=>(e=>{Ee(e),Ss({name:e.name,description:e.description||"",color:e.color||"#3B82F6"}),l("categoryForm")})(e),className:"text-primary-600 hover:text-primary-900 p-1",children:m.jsx(O,{className:"h-4 w-4"})}),m.jsx("button",{onClick:()=>{return s=e.id,c(null,null,function*(){if(window.confirm("Bu kategoriyi silmek istediğinizden emin misiniz? Bu kategoriye ait yazılar da etkilenebilir.")){const{error:e}=yield p.delete(s);e?alert("Silme işlemi başarısız: "+e.message):(Ps(),Es())}});var s},className:"text-red-600 hover:text-red-900 p-1",children:m.jsx(G,{className:"h-4 w-4"})})]})]}),m.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description||"Açıklama bulunmuyor"}),m.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[m.jsxs("span",{children:["Slug: ",e.slug]}),m.jsxs("span",{children:["ID: ",e.id]})]})]},e.id)),0===A.length&&m.jsxs("div",{className:"col-span-full text-center py-8",children:[m.jsx(R,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),m.jsx("p",{className:"text-gray-500",children:"Henüz kategori eklenmemiş"}),m.jsx("button",{onClick:$s,className:"mt-4 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors",children:"İlk Kategoriyi Ekle"})]})]})]}),"tags"===r&&m.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[m.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Etiketler"}),m.jsxs("button",{onClick:Ts,className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[m.jsx(T,{className:"h-4 w-4"}),m.jsx("span",{children:"Yeni Etiket"})]})]}),be?m.jsxs("div",{className:"px-6 py-8 text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),m.jsx("p",{className:"text-gray-600",children:"Etiketler yükleniyor..."})]}):m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-6",children:[xe.map(e=>m.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),m.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),e.is_featured&&m.jsx("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:"⭐ Öne Çıkan"})]}),m.jsxs("div",{className:"flex items-center space-x-1",children:[m.jsx("button",{onClick:()=>(e=>{Se(e),_s({name:e.name,description:e.description||"",color:e.color||"#3B82F6",is_featured:e.is_featured||!1}),l("tagForm")})(e),className:"text-primary-600 hover:text-primary-900 p-1",children:m.jsx(O,{className:"h-4 w-4"})}),m.jsx("button",{onClick:()=>{return s=e.id,c(null,null,function*(){if(window.confirm("Bu etiketi silmek istediğinizden emin misiniz?")){const{error:e}=yield b.delete(s);e?alert("Silme işlemi başarısız: "+e.message):Ys()}});var s},className:"text-red-600 hover:text-red-900 p-1",children:m.jsx(G,{className:"h-4 w-4"})})]})]}),m.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description||"Açıklama bulunmuyor"}),m.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[m.jsxs("span",{children:["Slug: ",e.slug]}),m.jsxs("span",{children:["Kullanım: ",e.usage_count||0]})]})]},e.id)),0===xe.length&&m.jsxs("div",{className:"col-span-full text-center py-8",children:[m.jsx(R,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),m.jsx("p",{className:"text-gray-500",children:"Henüz etiket eklenmemiş"}),m.jsx("button",{onClick:Ts,className:"mt-4 bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors",children:"İlk Etiketi Ekle"})]})]})]}),"tagForm"===r&&m.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[m.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:ze?"Etiket Düzenle":"Yeni Etiket Ekle"}),m.jsx("button",{onClick:()=>l("tags"),className:"text-gray-600 hover:text-gray-900",children:m.jsx(M,{className:"h-5 w-5"})})]}),m.jsxs("div",{className:"p-6 space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Etiket Adı *"}),m.jsx("input",{type:"text",value:ks.name,onChange:e=>Os("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Örn: Öneri",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Açıklama"}),m.jsx("textarea",{value:ks.description,onChange:e=>Os("description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Etiket hakkında kısa açıklama"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Renk"}),m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("input",{type:"color",value:ks.color,onChange:e=>Os("color",e.target.value),className:"w-12 h-10 border border-gray-300 rounded cursor-pointer"}),m.jsx("input",{type:"text",value:ks.color,onChange:e=>Os("color",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"#3B82F6"}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("span",{className:"inline-block w-8 h-8 rounded-full border",style:{backgroundColor:ks.color}}),m.jsx("span",{className:"text-sm text-gray-500",children:"Önizleme"})]})]})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"flex items-center space-x-3",children:[m.jsx("input",{type:"checkbox",checked:ks.is_featured,onChange:e=>Os("is_featured",e.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),m.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Öne Çıkan Etiket"})]}),m.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-7",children:"Öne çıkan etiketler admin panelinde öncelikli gösterilir"})]}),ks.name&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Önizleme"}),m.jsx("div",{className:"flex items-center space-x-2",children:m.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm text-white",style:{backgroundColor:ks.color},children:[ks.name,ks.is_featured&&m.jsx("span",{className:"ml-1",children:"⭐"})]})})]}),m.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[m.jsx("button",{onClick:()=>l("tags"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"İptal"}),m.jsxs("button",{onClick:()=>c(null,null,function*(){if(ks.name.trim())try{let e;if(ze?(console.log("🔄 Etiket güncelleniyor:",ze.id),e=yield b.update(ze.id,ks)):(console.log("🆕 Yeni etiket oluşturuluyor..."),e=yield b.create(ks)),e.error)throw console.error("❌ Etiket işlemi hatası:",e.error),new Error(e.error.message);console.log("✅ Etiket işlemi başarılı!"),alert(ze?"Etiket güncellendi!":"Etiket oluşturuldu!"),l("tags"),Ys()}catch(e){console.error("❌ Etiket işlemi hatası:",e),alert("İşlem başarısız: "+e.message)}else alert("Etiket adı gereklidir")}),className:"px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[m.jsx(Z,{className:"h-4 w-4"}),m.jsx("span",{children:ze?"Güncelle":"Kaydet"})]})]})]})]}),"categoryForm"===r&&m.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[m.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:Ce?"Kategori Düzenle":"Yeni Kategori Ekle"}),m.jsx("button",{onClick:()=>l("categories"),className:"text-gray-600 hover:text-gray-900",children:m.jsx(M,{className:"h-5 w-5"})})]}),m.jsxs("div",{className:"p-6 space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kategori Adı *"}),m.jsx("input",{type:"text",value:zs.name,onChange:e=>Rs("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Örn: Turizm Gündemi",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Açıklama"}),m.jsx("textarea",{value:zs.description,onChange:e=>Rs("description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Kategori hakkında kısa açıklama"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Renk"}),m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("input",{type:"color",value:zs.color,onChange:e=>Rs("color",e.target.value),className:"w-12 h-10 border border-gray-300 rounded cursor-pointer"}),m.jsx("input",{type:"text",value:zs.color,onChange:e=>Rs("color",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"#3B82F6"}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("span",{className:"inline-block w-8 h-8 rounded-full border",style:{backgroundColor:zs.color}}),m.jsx("span",{className:"text-sm text-gray-500",children:"Önizleme"})]})]})]}),zs.name&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Önizleme"}),m.jsx("div",{className:"flex items-center space-x-2",children:m.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm text-white",style:{backgroundColor:zs.color},children:zs.name})})]}),m.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[m.jsx("button",{onClick:()=>l("categories"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"İptal"}),m.jsxs("button",{onClick:()=>c(null,null,function*(){if(zs.name.trim())try{let e;if(Ce?(console.log("🔄 Kategori güncelleniyor:",Ce.id),e=yield p.update(Ce.id,zs)):(console.log("🆕 Yeni kategori oluşturuluyor..."),e=yield p.create(zs)),e.error)throw console.error("❌ Kategori işlemi hatası:",e.error),new Error(e.error.message);console.log("✅ Kategori işlemi başarılı!"),alert(Ce?"Kategori güncellendi!":"Kategori oluşturuldu!"),l("categories"),Ps()}catch(e){console.error("❌ Kategori işlemi hatası:",e),alert("İşlem başarısız: "+e.message)}else alert("Kategori adı gereklidir")}),className:"px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[m.jsx(Z,{className:"h-4 w-4"}),m.jsx("span",{children:Ce?"Güncelle":"Kaydet"})]})]})]})]}),"cookieAnalytics"===r&&m.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[m.jsx("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Cookie Analytics"})}),m.jsx("div",{className:"p-6 space-y-6",children:m.jsx(ce,{})})]}),"cookieBusinessIntelligence"===r&&m.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[m.jsx("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Cookie Business Intelligence"})}),m.jsx("div",{className:"p-6 space-y-6",children:m.jsx(oe,{})})]}),"sitemap"===r&&m.jsx("div",{className:"space-y-6",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[m.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Site Haritası Yönetimi"}),m.jsx("p",{className:"text-sm text-gray-600",children:"Dinamik XML sitemap oluşturun ve yönetin"})]}),m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Sitemap Oluştur"}),m.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Tüm sayfalarınızı, blog yazılarınızı ve kategorilerinizi içeren dinamik XML sitemap oluşturun."}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("button",{onClick:()=>c(null,null,function*(){Je(!0),We(!1);try{const s=yield c(null,null,function*(){try{const[e,s,a]=yield Promise.all([ie(),ne(),de()]),t=(new Date).toISOString().split("T")[0];let r=[];return le.forEach(e=>{r.push({url:`${re}${e.url}`,lastmod:t,changefreq:e.changefreq,priority:e.priority,section:e.section})}),e.forEach(e=>{r.push({url:`${re}/kategori/${e.slug}`,lastmod:t,changefreq:"weekly",priority:.7,section:"Kategori Arşivleri"})}),s.forEach(e=>{r.push({url:`${re}/etiket/${e.slug}`,lastmod:t,changefreq:"weekly",priority:.6,section:"Etiket Sayfaları"})}),a.forEach(e=>{const s=e.published_at?new Date(e.published_at).toISOString().split("T")[0]:t;r.push({url:`${re}/${e.category_slug}/${e.slug}`,lastmod:s,changefreq:"monthly",priority:.6,section:"Blog Yazıları"})}),{xml:`<?xml version="1.0" encoding="UTF-8"?>\n<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">\n${r.map(e=>`  <url>\n    <loc>${e.url}</loc>\n    <lastmod>${e.lastmod}</lastmod>\n    <changefreq>${e.changefreq}</changefreq>\n    <priority>${e.priority}</priority>\n  </url>`).join("\n")}\n</urlset>`,urls:r,stats:{total:r.length,sections:{"Ana Sayfalar":r.filter(e=>"Ana Sayfalar"===e.section).length,"Kategori Sayfaları":r.filter(e=>"Kategori Sayfaları"===e.section).length,"Kategori Arşivleri":r.filter(e=>"Kategori Arşivleri"===e.section).length,"Etiket Sayfaları":r.filter(e=>"Etiket Sayfaları"===e.section).length,"Blog Yazıları":r.filter(e=>"Blog Yazıları"===e.section).length,"Statik Sayfalar":r.filter(e=>"Statik Sayfalar"===e.section).length}}}}catch(e){throw console.error("Sitemap oluşturma hatası:",e),e}});ws(s.xml),We(!0);try{const e=new Blob([s.xml],{type:"application/xml"}),a=URL.createObjectURL(e),t=document.createElement("a");t.href=a,t.download="sitemap.xml",t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(a);const r=yield c(null,null,function*(){try{const[e,s,a]=yield Promise.all([ie(),ne(),de()]),t=(new Date).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"}),r=le.filter(e=>"Ana Sayfalar"===e.section),l=le.filter(e=>"Kategori Sayfaları"===e.section),i=le.filter(e=>"Statik Sayfalar"===e.section);return`<!DOCTYPE html>\n<html lang="tr">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Site Haritası - JoinEscapes</title>\n    <style>\n        * { margin: 0; padding: 0; box-sizing: border-box; }\n        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; color: #333; background: #f8f9fa; }\n        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }\n        .header { text-align: center; margin-bottom: 40px; padding: 40px 0; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n        .header h1 { color: #2c3e50; font-size: 2.5em; margin-bottom: 10px; }\n        .header p { color: #7f8c8d; font-size: 1.1em; }\n        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 40px; }\n        .stat-card { background: white; padding: 20px; border-radius: 10px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n        .stat-number { font-size: 2em; font-weight: bold; color: #3498db; }\n        .stat-label { color: #7f8c8d; margin-top: 5px; }\n        .sitemap-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 30px; }\n        .section { background: white; border-radius: 10px; padding: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n        .section h2 { color: #2c3e50; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid #3498db; }\n        .section ul { list-style: none; }\n        .section li { margin-bottom: 8px; }\n        .section a { color: #3498db; text-decoration: none; padding: 5px 0; display: block; transition: color 0.3s; }\n        .section a:hover { color: #2980b9; text-decoration: underline; }\n        .footer { text-align: center; margin-top: 40px; padding: 20px; color: #7f8c8d; background: white; border-radius: 10px; }\n    </style>\n</head>\n<body>\n    <div class="container">\n        <div class="header">\n            <h1>🗺️ Site Haritası</h1>\n            <p>JoinEscapes sitesinin tüm sayfalarına buradan ulaşabilirsiniz</p>\n        </div>\n        \n        <div class="stats">\n            <div class="stat-card">\n                <div class="stat-number">${r.length}</div>\n                <div class="stat-label">Ana Sayfalar</div>\n            </div>\n            <div class="stat-card">\n                <div class="stat-number">${l.length}</div>\n                <div class="stat-label">Kategori Sayfaları</div>\n            </div>\n            <div class="stat-card">\n                <div class="stat-number">${e.length}</div>\n                <div class="stat-label">Kategori Arşivleri</div>\n            </div>\n            <div class="stat-card">\n                <div class="stat-number">${s.length}</div>\n                <div class="stat-label">Etiket Sayfaları</div>\n            </div>\n            <div class="stat-card">\n                <div class="stat-number">${a.length}</div>\n                <div class="stat-label">Blog Yazıları</div>\n            </div>\n            <div class="stat-card">\n                <div class="stat-number">${i.length}</div>\n                <div class="stat-label">Statik Sayfalar</div>\n            </div>\n        </div>\n        \n        <div class="sitemap-grid">\n            <div class="section">\n                <h2>📍 Ana Sayfalar</h2>\n                <ul>\n                    ${r.map(e=>`<li><a href="${e.url||"/"}">${""===e.url?"Ana Sayfa":e.url.replace("/","").replace("-"," ").toUpperCase()}</a></li>`).join("")}\n                </ul>\n            </div>\n            \n            <div class="section">\n                <h2>📂 Kategori Sayfaları</h2>\n                <ul>\n                    ${l.map(e=>`<li><a href="${e.url}">${e.url.replace("/","").replace("-"," ").toUpperCase()}</a></li>`).join("")}\n                </ul>\n            </div>\n            \n            <div class="section">\n                <h2>🗂️ Kategori Arşivleri</h2>\n                <ul>\n                    ${e.map(e=>`<li><a href="/kategori/${e.slug}">${e.name}</a></li>`).join("")}\n                </ul>\n            </div>\n            \n            <div class="section">\n                <h2>🏷️ Etiket Sayfaları</h2>\n                <ul>\n                    ${s.map(e=>`<li><a href="/etiket/${e.slug}">${e.name}</a></li>`).join("")}\n                </ul>\n            </div>\n            \n            <div class="section">\n                <h2>📝 Blog Yazıları</h2>\n                <ul>\n                    ${a.slice(0,50).map(e=>`<li><a href="/${e.category_slug}/${e.slug}">${e.title}</a></li>`).join("")}\n                    ${a.length>50?`<li><em>... ve ${a.length-50} yazı daha</em></li>`:""}\n                </ul>\n            </div>\n            \n            <div class="section">\n                <h2>📄 Statik Sayfalar</h2>\n                <ul>\n                    ${i.map(e=>`<li><a href="${e.url}">${e.url.replace("/","").replace("-"," ").toUpperCase()}</a></li>`).join("")}\n                </ul>\n            </div>\n        </div>\n        \n        <div class="footer">\n            <p>Son güncelleme: ${t}</p>\n            <p>Toplam ${r.length+l.length+e.length+s.length+a.length+i.length} sayfa</p>\n        </div>\n    </div>\n</body>\n</html>`}catch(e){throw console.error("HTML sitemap oluşturma hatası:",e),e}}),l=new Blob([r],{type:"text/html"}),i=URL.createObjectURL(l),n=document.createElement("a");n.href=i,n.download="sitemap.html",n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(i),alert("✅ Sitemap başarıyla oluşturuldu ve kaydedildi!\n\n📁 Dosyalar:\n- sitemap.xml\n- sitemap.html\n\n💡 Bu dosyaları public klasörüne kopyalayın.")}catch(e){console.warn("Sitemap kaydetme uyarısı:",e),alert("⚠️ Sitemap oluşturuldu ama kaydedilemedi. Manuel olarak indirin.")}}catch(s){console.error("Sitemap oluşturma hatası:",s),alert("Sitemap oluşturulurken hata oluştu: "+s.message)}finally{Je(!1)}}),disabled:Me,className:"w-full bg-primary-600 text-white px-4 py-3 rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:Me?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),m.jsx("span",{children:"Oluşturuluyor..."})]}):m.jsxs(m.Fragment,{children:[m.jsx(H,{className:"h-4 w-4"}),m.jsx("span",{children:"Sitemap Oluştur"})]})}),Xe&&m.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[m.jsxs("button",{onClick:()=>{if(!Ns)return;const e=new Blob([Ns],{type:"application/xml"}),s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download="sitemap.xml",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},className:"bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-1",children:[m.jsx(C,{className:"h-4 w-4"}),m.jsx("span",{children:"İndir"})]}),m.jsxs("button",{onClick:()=>c(null,null,function*(){var e,s;if(Ns)try{yield(e=Ns,c(null,null,function*(){try{if("undefined"==typeof window){const s=yield k(()=>import("./__vite-browser-external-FmFgRqLi.js"),[]),a=yield k(()=>import("./__vite-browser-external-FmFgRqLi.js"),[]);s.writeFileSync(a.join(process.cwd(),"sitemap.xml"),e),s.writeFileSync(a.join(process.cwd(),"public","sitemap.xml"),e)}else{const a=yield fetch("/api/save-sitemap",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({xml:e,html:s})});if(!a.ok)throw new Error("Sitemap kaydedilemedi");const t=yield a.json();console.log("Sitemap kaydedildi:",t)}return{success:!0}}catch(a){throw console.error("Sitemap kaydetme hatası:",a),a}})),alert("Sitemap başarıyla kaydedildi!")}catch(a){console.error("Sitemap kaydetme hatası:",a),alert("Sitemap kaydedilirken hata oluştu: "+a.message)}else alert("Önce sitemap oluşturun")}),className:"bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-1",children:[m.jsx(Z,{className:"h-4 w-4"}),m.jsx("span",{children:"Kaydet"})]}),m.jsxs("a",{href:"/sitemap.html",target:"_blank",rel:"noopener noreferrer",className:"bg-orange-600 text-white px-3 py-2 rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center space-x-1",children:[m.jsx(Q,{className:"h-4 w-4"}),m.jsx("span",{children:"HTML"})]})]})]})]}),Xe&&m.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[m.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Sitemap Bilgileri"}),m.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"XML Boyutu:"}),m.jsxs("span",{children:[(Ns.length/1024).toFixed(2)," KB"]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Toplam URL:"}),m.jsx("span",{children:(Ns.match(/<url>/g)||[]).length})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Oluşturulma:"}),m.jsx("span",{children:(new Date).toLocaleString("tr-TR")})]})]}),m.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:m.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"font-medium text-blue-600",children:"📍 Ana"}),m.jsx("div",{children:"3"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"font-medium text-green-600",children:"🏷️ Kategori"}),m.jsx("div",{children:"12"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"font-medium text-purple-600",children:"📝 Post"}),m.jsx("div",{children:Ns?(Ns.match(/\/[^/]+\/[^/]+<\/loc>/g)||[]).length:"20"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"font-medium text-orange-600",children:"🏷️ Etiket"}),m.jsx("div",{children:"3"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"font-medium text-gray-600",children:"📄 Statik"}),m.jsx("div",{children:"5"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"font-medium text-red-600",children:"🌐 HTML"}),m.jsx("div",{children:"✓"})]})]})})]})]}),m.jsx("div",{className:"space-y-4",children:m.jsxs("div",{children:[m.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Sitemap Önizleme"}),Xe?m.jsx("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg text-xs font-mono max-h-96 overflow-y-auto",children:m.jsx("pre",{children:Ns})}):m.jsxs("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[m.jsx(I,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),m.jsx("p",{className:"text-gray-500",children:"Sitemap oluşturun ve önizlemeyi görün"})]})]})})]}),m.jsxs("div",{className:"mt-8 bg-blue-50 rounded-lg p-4",children:[m.jsx("h5",{className:"font-medium text-blue-900 mb-2",children:"📋 Sitemap Yönergeleri"}),m.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[m.jsxs("li",{children:["• ",m.jsx("strong",{children:"XML Sitemap:"})," Arama motorları için optimizasyonu (Google, Bing)"]}),m.jsxs("li",{children:["• ",m.jsx("strong",{children:"HTML Sitemap:"})," Ziyaretçiler için düzenli site haritası"]}),m.jsx("li",{children:"• Otomatik olarak tüm sayfalar, kategoriler, etiketler ve blog yazıları dahil edilir"}),m.jsx("li",{children:"• Sitemap'i oluşturduktan sonra sunucuya kaydetmeyi unutmayın"}),m.jsxs("li",{children:["• Google Search Console'a ",m.jsx("code",{children:"sitemap.xml"})," URL'sini ekleyin"]}),m.jsx("li",{children:"• Yeni içerik ekledikçe sitemap'i düzenli olarak güncelleyin"})]})]})]})]})}),"videos"===r&&m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:m.jsx(F,{className:"h-6 w-6 text-red-600"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"YouTube Video Yönetimi"}),m.jsx("p",{className:"text-gray-600",children:"Ana sayfada gösterilecek YouTube videolarını yönetin"})]})]}),m.jsxs("div",{className:"text-sm text-gray-500",children:["Toplam ",Oe.length," video"]})]}),m.jsx("div",{className:"border-t pt-4",children:m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"YouTube Video URL'si"}),m.jsx("input",{type:"url",value:Re,onChange:e=>De(e.target.value),placeholder:"https://www.youtube.com/watch?v=... veya https://youtu.be/...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",disabled:Ie}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"YouTube video URL'sini yapıştırın. Video başlığı otomatik çekilecek."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Video Açıklaması (İsteğe Bağlı)"}),m.jsx("textarea",{value:Ue,onChange:e=>Fe(e.target.value),placeholder:"Video hakkında kısa açıklama yazın...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",disabled:Ie}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Boş bırakılırsa video başlığı açıklama olarak kullanılacak."})]}),m.jsx("div",{className:"flex justify-end",children:m.jsx("button",{onClick:()=>c(null,null,function*(){const e=se.checkCriticalEndpoint("add-video");if(!e.allowed)return void alert(e.message);const s=ae.validateYouTubeUrl(Re);if(!s.isValid)return void alert("Hata: "+s.errors.join(", "));const a=ae.validateText(Ue,{maxLength:500,allowHtml:!1,allowSpecialChars:!0});if(a.isValid){Le(!0);try{const e=v(s.sanitized);if(!e)throw new Error("Geçerli bir YouTube URL'si giriniz");const t=yield N(e),r=a.sanitized||t.title||"Video açıklaması mevcut değil",l=d(n({},t),{description:r}),{data:i,error:c}=yield w.add(l);if(c)throw new Error(c.message||"Video eklenirken hata oluştu");$e([i,...Oe]),De(""),Fe(""),window.dispatchEvent(new CustomEvent("youtube-videos-updated")),alert("✅ Video başarıyla eklendi!")}catch(t){alert("❌ Video eklenirken hata: "+t.message)}finally{Le(!1)}}else alert("Açıklama hatası: "+a.errors.join(", "))}),disabled:Ie||!Re.trim(),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:Ie?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),m.jsx("span",{children:"Ekleniyor..."})]}):m.jsxs(m.Fragment,{children:[m.jsx(T,{className:"h-4 w-4"}),m.jsx("span",{children:"Video Ekle"})]})})})]})})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[m.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[m.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Video Listesi"}),m.jsx("p",{className:"text-sm text-gray-600",children:"Ana sayfada görüntülenecek videolar (sıraya göre)"})]}),0===Oe.length?m.jsxs("div",{className:"px-6 py-12 text-center",children:[m.jsx(F,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),m.jsx("p",{className:"text-gray-500",children:"Henüz video eklenmemiş"}),m.jsx("p",{className:"text-sm text-gray-400",children:"YouTube video URL'si ekleyerek başlayın"})]}):m.jsx("div",{className:"divide-y divide-gray-200",children:Oe.map((e,s)=>m.jsx("div",{className:"px-6 py-4 hover:bg-gray-50",children:m.jsxs("div",{className:"flex items-start space-x-4",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsxs("div",{className:"w-32 h-20 bg-gray-200 rounded-lg overflow-hidden relative",children:[m.jsx("img",{src:`https://img.youtube.com/vi/${e.video_id}/mqdefault.webp`,alt:e.title,className:"w-full h-full object-cover"}),m.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center",children:m.jsx(ee,{className:"h-6 w-6 text-white"})})]})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h5",{className:"text-lg font-medium text-gray-900 truncate",children:e.title}),m.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:e.description}),m.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[m.jsxs("span",{children:["#",e.display_order+1]}),m.jsx("span",{children:e.channel_name}),m.jsx("span",{children:e.views_count}),m.jsx("span",{children:e.upload_date})]})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("a",{href:`https://www.youtube.com/watch?v=${e.video_id}`,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-gray-600",title:"YouTube'da aç",children:m.jsx(Q,{className:"h-4 w-4"})}),m.jsx("button",{onClick:()=>(e=>{Ve(e),He(!0)})(e),className:"text-gray-400 hover:text-blue-600",title:"Düzenle",children:m.jsx(O,{className:"h-4 w-4"})}),m.jsx("button",{onClick:()=>{return s=e.id,c(null,null,function*(){if(window.confirm("Bu videoyu silmek istediğinizden emin misiniz?"))try{const{error:e}=yield w.delete(s);if(e)throw new Error(e.message||"Video silinirken hata oluştu");$e(Oe.filter(e=>e.id!==s)),window.dispatchEvent(new CustomEvent("youtube-videos-updated")),alert("Video başarıyla silindi!")}catch(e){alert("Video silinirken hata: "+e.message)}});var s},className:"text-gray-400 hover:text-red-600",title:"Sil",children:m.jsx(G,{className:"h-4 w-4"})})]})]})},e.id))})]}),Ge&&qe&&m.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:m.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[m.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75"}),m.jsxs("div",{className:"inline-block w-full max-w-lg p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Video Düzenle"}),m.jsx("button",{onClick:()=>He(!1),className:"text-gray-400 hover:text-gray-600",children:m.jsx(M,{className:"h-5 w-5"})})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Video Başlığı"}),m.jsx("input",{type:"text",defaultValue:qe.title,onChange:e=>Ve(d(n({},qe),{title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Açıklama"}),m.jsx("textarea",{rows:3,defaultValue:qe.description,onChange:e=>Ve(d(n({},qe),{description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Görüntülenme"}),m.jsx("input",{type:"text",defaultValue:qe.views_count,onChange:e=>Ve(d(n({},qe),{views_count:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tarih"}),m.jsx("input",{type:"text",defaultValue:qe.upload_date,onChange:e=>Ve(d(n({},qe),{upload_date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500"})]})]})]}),m.jsxs("div",{className:"flex space-x-3 mt-6",children:[m.jsx("button",{onClick:()=>{return e=qe.id,s=qe,c(null,null,function*(){try{const{data:a,error:t}=yield w.update(e,s);if(t)throw new Error(t.message||"Video güncellenirken hata oluştu");$e(Oe.map(s=>s.id===e?a:s)),He(!1),Ve(null),window.dispatchEvent(new CustomEvent("youtube-videos-updated")),alert("Video güncellendi!")}catch(a){alert("Video güncellenirken hata: "+a.message)}});var e,s},className:"flex-1 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Kaydet"}),m.jsx("button",{onClick:()=>He(!1),className:"flex-1 bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors",children:"İptal"})]})]})]})})]}),"notifications"===r&&m.jsxs("div",{className:"space-y-6",children:[m.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:m.jsx("div",{className:"flex items-center justify-between mb-4",children:m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:m.jsx(D,{className:"h-6 w-6 text-blue-600"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Push Bildirimleri"}),m.jsx("p",{className:"text-sm text-gray-600",children:"Kullanıcılara bildirim gönderin ve istatistikleri görün"})]})]})})}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[m.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Toplam Kullanıcı"}),m.jsx("p",{className:"text-3xl font-bold text-gray-900",children:Ze.total})]}),m.jsx(U,{className:"h-8 w-8 text-blue-600"})]})}),m.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-600",children:"İzin Veren"}),m.jsx("p",{className:"text-3xl font-bold text-green-600",children:Ze.granted})]}),m.jsx(D,{className:"h-8 w-8 text-green-600"})]})}),m.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-600",children:"İzin Vermeyen"}),m.jsx("p",{className:"text-3xl font-bold text-red-600",children:Ze.denied})]}),m.jsx(M,{className:"h-8 w-8 text-red-600"})]})}),m.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Henüz Karar Vermemiş"}),m.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:Ze.default})]}),m.jsx(K,{className:"h-8 w-8 text-yellow-600"})]})})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[m.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Test Bildirimi"}),m.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Tüm izin veren kullanıcılara test bildirimi gönderin."}),m.jsx("button",{onClick:()=>c(null,null,function*(){ss(!0);try{const e=yield c(null,null,function*(){return yield me("🧪 Test Bildirimi","Bu bir test bildirimidir. Sistem çalışıyor!",{})});e.success?alert(`✅ Test bildirimi gönderildi!\nBaşarılı: ${e.successful}\nBaşarısız: ${e.failed}`):alert(`❌ Test bildirimi gönderilemedi: ${e.error}`)}catch(e){alert(`❌ Hata: ${e.message}`)}finally{ss(!1)}}),disabled:es,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:es?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),m.jsx("span",{children:"Gönderiliyor..."})]}):m.jsxs(m.Fragment,{children:[m.jsx(D,{className:"h-4 w-4"}),m.jsx("span",{children:"Test Bildirimi Gönder"})]})})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[m.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Kampanya Bildirimi"}),m.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Özel kampanya veya duyuru bildirimi gönderin."}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bildirim Başlığı"}),m.jsx("input",{type:"text",value:as.title,onChange:e=>ts(s=>d(n({},s),{title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Örn: Özel İndirim!"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bildirim Mesajı"}),m.jsx("textarea",{value:as.message,onChange:e=>ts(s=>d(n({},s),{message:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"Örn: %50'ye varan indirimler sadece bugün!"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yönlendirme URL (Opsiyonel)"}),m.jsx("input",{type:"url",value:as.url,onChange:e=>ts(s=>d(n({},s),{url:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://joinescapes.com/kampanya"})]}),m.jsx("button",{onClick:()=>c(null,null,function*(){if(as.title&&as.message){ss(!0);try{const a=yield(e=as.title,s=as.message,as.url,c(null,null,function*(){return yield me(e,s,{})}));a.success?(alert(`✅ Kampanya bildirimi gönderildi!\nBaşarılı: ${a.successful}\nBaşarısız: ${a.failed}`),ts({title:"",message:"",url:""})):alert(`❌ Kampanya bildirimi gönderilemedi: ${a.error}`)}catch(a){alert(`❌ Hata: ${a.message}`)}finally{ss(!1)}var e,s}else alert("❌ Başlık ve mesaj alanları zorunludur!")}),disabled:es||!as.title||!as.message,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:es?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),m.jsx("span",{children:"Gönderiliyor..."})]}):m.jsxs(m.Fragment,{children:[m.jsx(D,{className:"h-4 w-4"}),m.jsx("span",{children:"Kampanya Bildirimi Gönder"})]})})]})]})]}),"profile"===r&&m.jsxs("div",{className:"space-y-6",children:[m.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:m.jsx("div",{className:"flex items-center justify-between mb-4",children:m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:m.jsx(U,{className:"h-6 w-6 text-blue-600"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Profil Ayarları"}),m.jsx("p",{className:"text-sm text-gray-600",children:"Hesap bilgilerinizi ve güvenlik ayarlarınızı yönetin"})]})]})})}),m.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[bs&&m.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:m.jsx("p",{className:"text-green-700 text-sm",children:bs})}),fs&&m.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:m.jsx("p",{className:"text-red-600 text-sm",children:fs})}),m.jsxs("form",{onSubmit:e=>c(null,null,function*(){e.preventDefault(),ys(!0),vs(""),js("");try{if(hs.email&&hs.email!==(null==s?void 0:s.email)){const{error:e}=yield o.auth.updateUser({email:hs.email});if(e)throw e}if(hs.newPassword){if(hs.newPassword!==hs.confirmPassword)throw new Error("Şifreler eşleşmiyor");if(hs.newPassword.length<6)throw new Error("Şifre en az 6 karakter olmalıdır");const{error:e}=yield o.auth.updateUser({password:hs.newPassword});if(e)throw e}const{error:e}=yield o.auth.updateUser({data:{full_name:hs.fullName||"JoinEscapes",author_name:hs.authorName||"JoinEscapes",bio:hs.bio||""}});if(e)throw e;js("Profil başarıyla güncellendi!"),gs(e=>d(n({},e),{newPassword:"",confirmPassword:""}))}catch(a){vs(a.message)}finally{ys(!1)}}),className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Temel Bilgiler"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ad Soyad"}),m.jsx("input",{type:"text",value:hs.fullName,onChange:e=>gs(s=>d(n({},s),{fullName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Adınızı girin"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta"}),m.jsx("input",{type:"email",value:hs.email,onChange:e=>gs(s=>d(n({},s),{email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"E-posta adresiniz"})]})]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Şifre Değiştir"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yeni Şifre"}),m.jsx("input",{type:"password",value:hs.newPassword,onChange:e=>gs(s=>d(n({},s),{newPassword:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Yeni şifrenizi girin"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şifre Onayı"}),m.jsx("input",{type:"password",value:hs.confirmPassword,onChange:e=>gs(s=>d(n({},s),{confirmPassword:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Şifrenizi tekrar girin"})]})]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Yazar Ayarları"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yazar Adı (Yazılarda Görünecek)"}),m.jsx("input",{type:"text",value:hs.authorName,onChange:e=>gs(s=>d(n({},s),{authorName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Yazılarda görünecek yazar adı"}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Bu ad blog yazılarında yazar olarak görüntülenecek"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Biyografi (İsteğe Bağlı)"}),m.jsx("textarea",{rows:"3",value:hs.bio,onChange:e=>gs(s=>d(n({},s),{bio:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Kısa biyografinizi yazın..."})]})]})]}),m.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[m.jsx("button",{type:"button",className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"İptal"}),m.jsxs("button",{type:"submit",disabled:ps,className:`px-6 py-2 rounded-lg transition-colors flex items-center space-x-2 ${ps?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"} text-white`,children:[ps?m.jsx(H,{className:"h-4 w-4 animate-spin"}):m.jsx(Z,{className:"h-4 w-4"}),m.jsx("span",{children:ps?"Kaydediliyor...":"Kaydet"})]})]})]})]}),m.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[m.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Hesap Bilgileri"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-600",children:"Hesap ID:"}),m.jsx("p",{className:"font-mono text-xs text-gray-800 mt-1",children:(null==s?void 0:s.id)||"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-600",children:"Oluşturulma Tarihi:"}),m.jsx("p",{className:"text-gray-800 mt-1",children:(null==s?void 0:s.created_at)?new Date(s.created_at).toLocaleDateString("tr-TR"):"N/A"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-600",children:"Son Giriş:"}),m.jsx("p",{className:"text-gray-800 mt-1",children:(null==s?void 0:s.last_sign_in_at)?new Date(s.last_sign_in_at).toLocaleDateString("tr-TR"):"N/A"})]})]})]})]})]})]})};export{xe as default};
